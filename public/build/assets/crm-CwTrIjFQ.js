import{a as zl}from"./_commonjsHelpers-C4iS2aBk.js";function Jl(e,t){for(var i=0;i<t.length;i++){const n=t[i];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(n,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Gl=Object.create,Ga=Object.defineProperty,Kl=Object.getOwnPropertyDescriptor,Ka=Object.getOwnPropertyNames,Xl=Object.getPrototypeOf,Yl=Object.prototype.hasOwnProperty,pi=(e,t)=>function(){return t||(0,e[Ka(e)[0]])((t={exports:{}}).exports,t),t.exports},Ql=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Ka(t))!Yl.call(e,o)&&o!==i&&Ga(e,o,{get:()=>t[o],enumerable:!(n=Kl(t,o))||n.enumerable});return e},Ze=(e,t,i)=>(i=e!=null?Gl(Xl(e)):{},Ql(!e||!e.__esModule?Ga(i,"default",{value:e,enumerable:!0}):i,e)),wt=pi({"../alpine/packages/alpinejs/dist/module.cjs.js"(e,t){var i=Object.create,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,d=(r,c)=>function(){return c||(0,r[s(r)[0]])((c={exports:{}}).exports,c),c.exports},f=(r,c)=>{for(var u in c)n(r,u,{get:c[u],enumerable:!0})},g=(r,c,u,p)=>{if(c&&typeof c=="object"||typeof c=="function")for(let _ of s(c))!l.call(r,_)&&_!==u&&n(r,_,{get:()=>c[_],enumerable:!(p=o(c,_))||p.enumerable});return r},v=(r,c,u)=>(u=r!=null?i(a(r)):{},g(!r||!r.__esModule?n(u,"default",{value:r,enumerable:!0}):u,r)),w=r=>g(n({},"__esModule",{value:!0}),r),N=d({"node_modules/@vue/shared/dist/shared.cjs.js"(r){Object.defineProperty(r,"__esModule",{value:!0});function c(R,ee){const ce=Object.create(null),ve=R.split(",");for(let Ke=0;Ke<ve.length;Ke++)ce[ve[Ke]]=!0;return ee?Ke=>!!ce[Ke.toLowerCase()]:Ke=>!!ce[Ke]}var u={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"HYDRATE_EVENTS",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},p={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},_="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",y=c(_),x=2;function L(R,ee=0,ce=R.length){let ve=R.split(/(\r?\n)/);const Ke=ve.filter((Mt,St)=>St%2===1);ve=ve.filter((Mt,St)=>St%2===0);let ut=0;const Lt=[];for(let Mt=0;Mt<ve.length;Mt++)if(ut+=ve[Mt].length+(Ke[Mt]&&Ke[Mt].length||0),ut>=ee){for(let St=Mt-x;St<=Mt+x||ce>ut;St++){if(St<0||St>=ve.length)continue;const Un=St+1;Lt.push(`${Un}${" ".repeat(Math.max(3-String(Un).length,0))}|  ${ve[St]}`);const dn=ve[St].length,Cr=Ke[St]&&Ke[St].length||0;if(St===Mt){const fn=ee-(ut-(dn+Cr)),gs=Math.max(1,ce>ut?dn-fn:ce-ee);Lt.push("   |  "+" ".repeat(fn)+"^".repeat(gs))}else if(St>Mt){if(ce>ut){const fn=Math.max(Math.min(ce-ut,dn),1);Lt.push("   |  "+"^".repeat(fn))}ut+=dn+Cr}}break}return Lt.join(`
`)}var q="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ae=c(q),Le=c(q+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected"),ot=/[>/="'\u0009\u000a\u000c\u0020]/,Be={};function rt(R){if(Be.hasOwnProperty(R))return Be[R];const ee=ot.test(R);return ee&&console.error(`unsafe attribute name: ${R}`),Be[R]=!ee}var Vt={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},li=c("animation-iteration-count,border-image-outset,border-image-slice,border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,stroke-miterlimit,stroke-opacity,stroke-width"),xe=c("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap");function Ye(R){if(ni(R)){const ee={};for(let ce=0;ce<R.length;ce++){const ve=R[ce],Ke=Ye(ji(ve)?Dt(ve):ve);if(Ke)for(const ut in Ke)ee[ut]=Ke[ut]}return ee}else if(di(R))return R}var $e=/;(?![^(]*\))/g,Ge=/:(.+)/;function Dt(R){const ee={};return R.split($e).forEach(ce=>{if(ce){const ve=ce.split(Ge);ve.length>1&&(ee[ve[0].trim()]=ve[1].trim())}}),ee}function ii(R){let ee="";if(!R)return ee;for(const ce in R){const ve=R[ce],Ke=ce.startsWith("--")?ce:wr(ce);(ji(ve)||typeof ve=="number"&&li(Ke))&&(ee+=`${Ke}:${ve};`)}return ee}function ui(R){let ee="";if(ji(R))ee=R;else if(ni(R))for(let ce=0;ce<R.length;ce++){const ve=ui(R[ce]);ve&&(ee+=ve+" ")}else if(di(R))for(const ce in R)R[ce]&&(ee+=ce+" ");return ee.trim()}var Qi="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",On="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",Dn="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",Zi=c(Qi),rs=c(On),en=c(Dn),ss=/["'&<>]/;function os(R){const ee=""+R,ce=ss.exec(ee);if(!ce)return ee;let ve="",Ke,ut,Lt=0;for(ut=ce.index;ut<ee.length;ut++){switch(ee.charCodeAt(ut)){case 34:Ke="&quot;";break;case 38:Ke="&amp;";break;case 39:Ke="&#39;";break;case 60:Ke="&lt;";break;case 62:Ke="&gt;";break;default:continue}Lt!==ut&&(ve+=ee.substring(Lt,ut)),Lt=ut+1,ve+=Ke}return Lt!==ut?ve+ee.substring(Lt,ut):ve}var cr=/^-?>|<!--|-->|--!>|<!-$/g;function as(R){return R.replace(cr,"")}function cs(R,ee){if(R.length!==ee.length)return!1;let ce=!0;for(let ve=0;ce&&ve<R.length;ve++)ce=tn(R[ve],ee[ve]);return ce}function tn(R,ee){if(R===ee)return!0;let ce=Nn(R),ve=Nn(ee);if(ce||ve)return ce&&ve?R.getTime()===ee.getTime():!1;if(ce=ni(R),ve=ni(ee),ce||ve)return ce&&ve?cs(R,ee):!1;if(ce=di(R),ve=di(ee),ce||ve){if(!ce||!ve)return!1;const Ke=Object.keys(R).length,ut=Object.keys(ee).length;if(Ke!==ut)return!1;for(const Lt in R){const Mt=R.hasOwnProperty(Lt),St=ee.hasOwnProperty(Lt);if(Mt&&!St||!Mt&&St||!tn(R[Lt],ee[Lt]))return!1}}return String(R)===String(ee)}function lr(R,ee){return R.findIndex(ce=>tn(ce,ee))}var ur=R=>R==null?"":di(R)?JSON.stringify(R,ls,2):String(R),ls=(R,ee)=>Mi(ee)?{[`Map(${ee.size})`]:[...ee.entries()].reduce((ce,[ve,Ke])=>(ce[`${ve} =>`]=Ke,ce),{})}:ri(ee)?{[`Set(${ee.size})`]:[...ee.values()]}:di(ee)&&!ni(ee)&&!gr(ee)?String(ee):ee,us=["bigInt","optionalChaining","nullishCoalescingOperator"],Ln=Object.freeze({}),Mn=Object.freeze([]),jn=()=>{},nn=()=>!1,rn=/^on[^a-z]/,sn=R=>rn.test(R),on=R=>R.startsWith("onUpdate:"),dr=Object.assign,fr=(R,ee)=>{const ce=R.indexOf(ee);ce>-1&&R.splice(ce,1)},hr=Object.prototype.hasOwnProperty,pr=(R,ee)=>hr.call(R,ee),ni=Array.isArray,Mi=R=>Ni(R)==="[object Map]",ri=R=>Ni(R)==="[object Set]",Nn=R=>R instanceof Date,$n=R=>typeof R=="function",ji=R=>typeof R=="string",ds=R=>typeof R=="symbol",di=R=>R!==null&&typeof R=="object",an=R=>di(R)&&$n(R.then)&&$n(R.catch),mr=Object.prototype.toString,Ni=R=>mr.call(R),fs=R=>Ni(R).slice(8,-1),gr=R=>Ni(R)==="[object Object]",_r=R=>ji(R)&&R!=="NaN"&&R[0]!=="-"&&""+parseInt(R,10)===R,vr=c(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$i=R=>{const ee=Object.create(null);return ce=>ee[ce]||(ee[ce]=R(ce))},yr=/-(\w)/g,br=$i(R=>R.replace(yr,(ee,ce)=>ce?ce.toUpperCase():"")),hs=/\B([A-Z])/g,wr=$i(R=>R.replace(hs,"-$1").toLowerCase()),Fi=$i(R=>R.charAt(0).toUpperCase()+R.slice(1)),ps=$i(R=>R?`on${Fi(R)}`:""),Fn=(R,ee)=>R!==ee&&(R===R||ee===ee),ms=(R,ee)=>{for(let ce=0;ce<R.length;ce++)R[ce](ee)},cn=(R,ee,ce)=>{Object.defineProperty(R,ee,{configurable:!0,enumerable:!1,value:ce})},ln=R=>{const ee=parseFloat(R);return isNaN(ee)?R:ee},un,Sr=()=>un||(un=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});r.EMPTY_ARR=Mn,r.EMPTY_OBJ=Ln,r.NO=nn,r.NOOP=jn,r.PatchFlagNames=u,r.babelParserDefaultPlugins=us,r.camelize=br,r.capitalize=Fi,r.def=cn,r.escapeHtml=os,r.escapeHtmlComment=as,r.extend=dr,r.generateCodeFrame=L,r.getGlobalThis=Sr,r.hasChanged=Fn,r.hasOwn=pr,r.hyphenate=wr,r.invokeArrayFns=ms,r.isArray=ni,r.isBooleanAttr=Le,r.isDate=Nn,r.isFunction=$n,r.isGloballyWhitelisted=y,r.isHTMLTag=Zi,r.isIntegerKey=_r,r.isKnownAttr=xe,r.isMap=Mi,r.isModelListener=on,r.isNoUnitNumericStyleProp=li,r.isObject=di,r.isOn=sn,r.isPlainObject=gr,r.isPromise=an,r.isReservedProp=vr,r.isSSRSafeAttrName=rt,r.isSVGTag=rs,r.isSet=ri,r.isSpecialBooleanAttr=ae,r.isString=ji,r.isSymbol=ds,r.isVoidTag=en,r.looseEqual=tn,r.looseIndexOf=lr,r.makeMap=c,r.normalizeClass=ui,r.normalizeStyle=Ye,r.objectToString=mr,r.parseStringStyle=Dt,r.propsToAttrMap=Vt,r.remove=fr,r.slotFlagsText=p,r.stringifyStyle=ii,r.toDisplayString=ur,r.toHandlerKey=ps,r.toNumber=ln,r.toRawType=fs,r.toTypeString=Ni}}),k=d({"node_modules/@vue/shared/index.js"(r,c){c.exports=N()}}),b=d({"node_modules/@vue/reactivity/dist/reactivity.cjs.js"(r){Object.defineProperty(r,"__esModule",{value:!0});var c=k(),u=new WeakMap,p=[],_,y=Symbol("iterate"),x=Symbol("Map key iterate");function L(h){return h&&h._isEffect===!0}function q(h,F=c.EMPTY_OBJ){L(h)&&(h=h.raw);const H=ot(h,F);return F.lazy||H(),H}function ae(h){h.active&&(Be(h),h.options.onStop&&h.options.onStop(),h.active=!1)}var Le=0;function ot(h,F){const H=function(){if(!H.active)return h();if(!p.includes(H)){Be(H);try{return xe(),p.push(H),_=H,h()}finally{p.pop(),Ye(),_=p[p.length-1]}}};return H.id=Le++,H.allowRecurse=!!F.allowRecurse,H._isEffect=!0,H.active=!0,H.raw=h,H.deps=[],H.options=F,H}function Be(h){const{deps:F}=h;if(F.length){for(let H=0;H<F.length;H++)F[H].delete(h);F.length=0}}var rt=!0,Vt=[];function li(){Vt.push(rt),rt=!1}function xe(){Vt.push(rt),rt=!0}function Ye(){const h=Vt.pop();rt=h===void 0?!0:h}function $e(h,F,H){if(!rt||_===void 0)return;let de=u.get(h);de||u.set(h,de=new Map);let ie=de.get(H);ie||de.set(H,ie=new Set),ie.has(_)||(ie.add(_),_.deps.push(ie),_.options.onTrack&&_.options.onTrack({effect:_,target:h,type:F,key:H}))}function Ge(h,F,H,de,ie,ye){const Fe=u.get(h);if(!Fe)return;const dt=new Set,jt=At=>{At&&At.forEach(si=>{(si!==_||si.allowRecurse)&&dt.add(si)})};if(F==="clear")Fe.forEach(jt);else if(H==="length"&&c.isArray(h))Fe.forEach((At,si)=>{(si==="length"||si>=de)&&jt(At)});else switch(H!==void 0&&jt(Fe.get(H)),F){case"add":c.isArray(h)?c.isIntegerKey(H)&&jt(Fe.get("length")):(jt(Fe.get(y)),c.isMap(h)&&jt(Fe.get(x)));break;case"delete":c.isArray(h)||(jt(Fe.get(y)),c.isMap(h)&&jt(Fe.get(x)));break;case"set":c.isMap(h)&&jt(Fe.get(y));break}const Bn=At=>{At.options.onTrigger&&At.options.onTrigger({effect:At,target:h,key:H,type:F,newValue:de,oldValue:ie,oldTarget:ye}),At.options.scheduler?At.options.scheduler(At):At()};dt.forEach(Bn)}var Dt=c.makeMap("__proto__,__v_isRef,__isVue"),ii=new Set(Object.getOwnPropertyNames(Symbol).map(h=>Symbol[h]).filter(c.isSymbol)),ui=en(),Qi=en(!1,!0),On=en(!0),Dn=en(!0,!0),Zi=rs();function rs(){const h={};return["includes","indexOf","lastIndexOf"].forEach(F=>{h[F]=function(...H){const de=R(this);for(let ye=0,Fe=this.length;ye<Fe;ye++)$e(de,"get",ye+"");const ie=de[F](...H);return ie===-1||ie===!1?de[F](...H.map(R)):ie}}),["push","pop","shift","unshift","splice"].forEach(F=>{h[F]=function(...H){li();const de=R(this)[F].apply(this,H);return Ye(),de}}),h}function en(h=!1,F=!1){return function(de,ie,ye){if(ie==="__v_isReactive")return!h;if(ie==="__v_isReadonly")return h;if(ie==="__v_raw"&&ye===(h?F?br:yr:F?$i:vr).get(de))return de;const Fe=c.isArray(de);if(!h&&Fe&&c.hasOwn(Zi,ie))return Reflect.get(Zi,ie,ye);const dt=Reflect.get(de,ie,ye);return(c.isSymbol(ie)?ii.has(ie):Dt(ie))||(h||$e(de,"get",ie),F)?dt:ve(dt)?!Fe||!c.isIntegerKey(ie)?dt.value:dt:c.isObject(dt)?h?Fn(dt):Fi(dt):dt}}var ss=cr(),os=cr(!0);function cr(h=!1){return function(H,de,ie,ye){let Fe=H[de];if(!h&&(ie=R(ie),Fe=R(Fe),!c.isArray(H)&&ve(Fe)&&!ve(ie)))return Fe.value=ie,!0;const dt=c.isArray(H)&&c.isIntegerKey(de)?Number(de)<H.length:c.hasOwn(H,de),jt=Reflect.set(H,de,ie,ye);return H===R(ye)&&(dt?c.hasChanged(ie,Fe)&&Ge(H,"set",de,ie,Fe):Ge(H,"add",de,ie)),jt}}function as(h,F){const H=c.hasOwn(h,F),de=h[F],ie=Reflect.deleteProperty(h,F);return ie&&H&&Ge(h,"delete",F,void 0,de),ie}function cs(h,F){const H=Reflect.has(h,F);return(!c.isSymbol(F)||!ii.has(F))&&$e(h,"has",F),H}function tn(h){return $e(h,"iterate",c.isArray(h)?"length":y),Reflect.ownKeys(h)}var lr={get:ui,set:ss,deleteProperty:as,has:cs,ownKeys:tn},ur={get:On,set(h,F){return console.warn(`Set operation on key "${String(F)}" failed: target is readonly.`,h),!0},deleteProperty(h,F){return console.warn(`Delete operation on key "${String(F)}" failed: target is readonly.`,h),!0}},ls=c.extend({},lr,{get:Qi,set:os}),us=c.extend({},ur,{get:Dn}),Ln=h=>c.isObject(h)?Fi(h):h,Mn=h=>c.isObject(h)?Fn(h):h,jn=h=>h,nn=h=>Reflect.getPrototypeOf(h);function rn(h,F,H=!1,de=!1){h=h.__v_raw;const ie=R(h),ye=R(F);F!==ye&&!H&&$e(ie,"get",F),!H&&$e(ie,"get",ye);const{has:Fe}=nn(ie),dt=de?jn:H?Mn:Ln;if(Fe.call(ie,F))return dt(h.get(F));if(Fe.call(ie,ye))return dt(h.get(ye));h!==ie&&h.get(F)}function sn(h,F=!1){const H=this.__v_raw,de=R(H),ie=R(h);return h!==ie&&!F&&$e(de,"has",h),!F&&$e(de,"has",ie),h===ie?H.has(h):H.has(h)||H.has(ie)}function on(h,F=!1){return h=h.__v_raw,!F&&$e(R(h),"iterate",y),Reflect.get(h,"size",h)}function dr(h){h=R(h);const F=R(this);return nn(F).has.call(F,h)||(F.add(h),Ge(F,"add",h,h)),this}function fr(h,F){F=R(F);const H=R(this),{has:de,get:ie}=nn(H);let ye=de.call(H,h);ye?_r(H,de,h):(h=R(h),ye=de.call(H,h));const Fe=ie.call(H,h);return H.set(h,F),ye?c.hasChanged(F,Fe)&&Ge(H,"set",h,F,Fe):Ge(H,"add",h,F),this}function hr(h){const F=R(this),{has:H,get:de}=nn(F);let ie=H.call(F,h);ie?_r(F,H,h):(h=R(h),ie=H.call(F,h));const ye=de?de.call(F,h):void 0,Fe=F.delete(h);return ie&&Ge(F,"delete",h,void 0,ye),Fe}function pr(){const h=R(this),F=h.size!==0,H=c.isMap(h)?new Map(h):new Set(h),de=h.clear();return F&&Ge(h,"clear",void 0,void 0,H),de}function ni(h,F){return function(de,ie){const ye=this,Fe=ye.__v_raw,dt=R(Fe),jt=F?jn:h?Mn:Ln;return!h&&$e(dt,"iterate",y),Fe.forEach((Bn,At)=>de.call(ie,jt(Bn),jt(At),ye))}}function Mi(h,F,H){return function(...de){const ie=this.__v_raw,ye=R(ie),Fe=c.isMap(ye),dt=h==="entries"||h===Symbol.iterator&&Fe,jt=h==="keys"&&Fe,Bn=ie[h](...de),At=H?jn:F?Mn:Ln;return!F&&$e(ye,"iterate",jt?x:y),{next(){const{value:si,done:_s}=Bn.next();return _s?{value:si,done:_s}:{value:dt?[At(si[0]),At(si[1])]:At(si),done:_s}},[Symbol.iterator](){return this}}}}function ri(h){return function(...F){{const H=F[0]?`on key "${F[0]}" `:"";console.warn(`${c.capitalize(h)} operation ${H}failed: target is readonly.`,R(this))}return h==="delete"?!1:this}}function Nn(){const h={get(ye){return rn(this,ye)},get size(){return on(this)},has:sn,add:dr,set:fr,delete:hr,clear:pr,forEach:ni(!1,!1)},F={get(ye){return rn(this,ye,!1,!0)},get size(){return on(this)},has:sn,add:dr,set:fr,delete:hr,clear:pr,forEach:ni(!1,!0)},H={get(ye){return rn(this,ye,!0)},get size(){return on(this,!0)},has(ye){return sn.call(this,ye,!0)},add:ri("add"),set:ri("set"),delete:ri("delete"),clear:ri("clear"),forEach:ni(!0,!1)},de={get(ye){return rn(this,ye,!0,!0)},get size(){return on(this,!0)},has(ye){return sn.call(this,ye,!0)},add:ri("add"),set:ri("set"),delete:ri("delete"),clear:ri("clear"),forEach:ni(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(ye=>{h[ye]=Mi(ye,!1,!1),H[ye]=Mi(ye,!0,!1),F[ye]=Mi(ye,!1,!0),de[ye]=Mi(ye,!0,!0)}),[h,H,F,de]}var[$n,ji,ds,di]=Nn();function an(h,F){const H=F?h?di:ds:h?ji:$n;return(de,ie,ye)=>ie==="__v_isReactive"?!h:ie==="__v_isReadonly"?h:ie==="__v_raw"?de:Reflect.get(c.hasOwn(H,ie)&&ie in de?H:de,ie,ye)}var mr={get:an(!1,!1)},Ni={get:an(!1,!0)},fs={get:an(!0,!1)},gr={get:an(!0,!0)};function _r(h,F,H){const de=R(H);if(de!==H&&F.call(h,de)){const ie=c.toRawType(h);console.warn(`Reactive ${ie} contains both the raw and reactive versions of the same object${ie==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var vr=new WeakMap,$i=new WeakMap,yr=new WeakMap,br=new WeakMap;function hs(h){switch(h){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wr(h){return h.__v_skip||!Object.isExtensible(h)?0:hs(c.toRawType(h))}function Fi(h){return h&&h.__v_isReadonly?h:cn(h,!1,lr,mr,vr)}function ps(h){return cn(h,!1,ls,Ni,$i)}function Fn(h){return cn(h,!0,ur,fs,yr)}function ms(h){return cn(h,!0,us,gr,br)}function cn(h,F,H,de,ie){if(!c.isObject(h))return console.warn(`value cannot be made reactive: ${String(h)}`),h;if(h.__v_raw&&!(F&&h.__v_isReactive))return h;const ye=ie.get(h);if(ye)return ye;const Fe=wr(h);if(Fe===0)return h;const dt=new Proxy(h,Fe===2?de:H);return ie.set(h,dt),dt}function ln(h){return un(h)?ln(h.__v_raw):!!(h&&h.__v_isReactive)}function un(h){return!!(h&&h.__v_isReadonly)}function Sr(h){return ln(h)||un(h)}function R(h){return h&&R(h.__v_raw)||h}function ee(h){return c.def(h,"__v_skip",!0),h}var ce=h=>c.isObject(h)?Fi(h):h;function ve(h){return!!(h&&h.__v_isRef===!0)}function Ke(h){return Mt(h)}function ut(h){return Mt(h,!0)}var Lt=class{constructor(h,F=!1){this._shallow=F,this.__v_isRef=!0,this._rawValue=F?h:R(h),this._value=F?h:ce(h)}get value(){return $e(R(this),"get","value"),this._value}set value(h){h=this._shallow?h:R(h),c.hasChanged(h,this._rawValue)&&(this._rawValue=h,this._value=this._shallow?h:ce(h),Ge(R(this),"set","value",h))}};function Mt(h,F=!1){return ve(h)?h:new Lt(h,F)}function St(h){Ge(R(h),"set","value",h.value)}function Un(h){return ve(h)?h.value:h}var dn={get:(h,F,H)=>Un(Reflect.get(h,F,H)),set:(h,F,H,de)=>{const ie=h[F];return ve(ie)&&!ve(H)?(ie.value=H,!0):Reflect.set(h,F,H,de)}};function Cr(h){return ln(h)?h:new Proxy(h,dn)}var fn=class{constructor(h){this.__v_isRef=!0;const{get:F,set:H}=h(()=>$e(this,"get","value"),()=>Ge(this,"set","value"));this._get=F,this._set=H}get value(){return this._get()}set value(h){this._set(h)}};function gs(h){return new fn(h)}function Hl(h){Sr(h)||console.warn("toRefs() expects a reactive object but received a plain one.");const F=c.isArray(h)?new Array(h.length):{};for(const H in h)F[H]=Jo(h,H);return F}var Wl=class{constructor(h,F){this._object=h,this._key=F,this.__v_isRef=!0}get value(){return this._object[this._key]}set value(h){this._object[this._key]=h}};function Jo(h,F){return ve(h[F])?h[F]:new Wl(h,F)}var ql=class{constructor(h,F,H){this._setter=F,this._dirty=!0,this.__v_isRef=!0,this.effect=q(h,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,Ge(R(this),"set","value"))}}),this.__v_isReadonly=H}get value(){const h=R(this);return h._dirty&&(h._value=this.effect(),h._dirty=!1),$e(h,"get","value"),h._value}set value(h){this._setter(h)}};function Vl(h){let F,H;return c.isFunction(h)?(F=h,H=()=>{console.warn("Write operation failed: computed value is readonly")}):(F=h.get,H=h.set),new ql(F,H,c.isFunction(h)||!h.set)}r.ITERATE_KEY=y,r.computed=Vl,r.customRef=gs,r.effect=q,r.enableTracking=xe,r.isProxy=Sr,r.isReactive=ln,r.isReadonly=un,r.isRef=ve,r.markRaw=ee,r.pauseTracking=li,r.proxyRefs=Cr,r.reactive=Fi,r.readonly=Fn,r.ref=Ke,r.resetTracking=Ye,r.shallowReactive=ps,r.shallowReadonly=ms,r.shallowRef=ut,r.stop=ae,r.toRaw=R,r.toRef=Jo,r.toRefs=Hl,r.track=$e,r.trigger=Ge,r.triggerRef=St,r.unref=Un}}),P=d({"node_modules/@vue/reactivity/index.js"(r,c){c.exports=b()}}),C={};f(C,{Alpine:()=>zo,default:()=>Bl}),t.exports=w(C);var I=!1,j=!1,T=[],O=-1;function $(r){E(r)}function E(r){T.includes(r)||T.push(r),W()}function A(r){let c=T.indexOf(r);c!==-1&&c>O&&T.splice(c,1)}function W(){!j&&!I&&(I=!0,queueMicrotask(z))}function z(){I=!1,j=!0;for(let r=0;r<T.length;r++)T[r](),O=r;T.length=0,O=-1,j=!1}var X,J,Se,Xe,nt=!0;function kt(r){nt=!1,r(),nt=!0}function _t(r){X=r.reactive,Se=r.release,J=c=>r.effect(c,{scheduler:u=>{nt?$(u):u()}}),Xe=r.raw}function vt(r){J=r}function Ft(r){let c=()=>{};return[p=>{let _=J(p);return r._x_effects||(r._x_effects=new Set,r._x_runEffects=()=>{r._x_effects.forEach(y=>y())}),r._x_effects.add(_),c=()=>{_!==void 0&&(r._x_effects.delete(_),Se(_))},_},()=>{c()}]}function Pt(r,c){let u=!0,p,_=J(()=>{let y=r();JSON.stringify(y),u?p=y:queueMicrotask(()=>{c(y,p),p=y}),u=!1});return()=>Se(_)}var ke=[],we=[],Pe=[];function Ie(r){Pe.push(r)}function be(r,c){typeof c=="function"?(r._x_cleanups||(r._x_cleanups=[]),r._x_cleanups.push(c)):(c=r,we.push(c))}function te(r){ke.push(r)}function et(r,c,u){r._x_attributeCleanups||(r._x_attributeCleanups={}),r._x_attributeCleanups[c]||(r._x_attributeCleanups[c]=[]),r._x_attributeCleanups[c].push(u)}function bt(r,c){r._x_attributeCleanups&&Object.entries(r._x_attributeCleanups).forEach(([u,p])=>{(c===void 0||c.includes(u))&&(p.forEach(_=>_()),delete r._x_attributeCleanups[u])})}function Z(r){var c,u;for((c=r._x_effects)==null||c.forEach(A);(u=r._x_cleanups)!=null&&u.length;)r._x_cleanups.pop()()}var le=new MutationObserver(he),Re=!1;function Me(){le.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Re=!0}function Te(){It(),le.disconnect(),Re=!1}var ue=[];function It(){let r=le.takeRecords();ue.push(()=>r.length>0&&he(r));let c=ue.length;queueMicrotask(()=>{if(ue.length===c)for(;ue.length>0;)ue.shift()()})}function ne(r){if(!Re)return r();Te();let c=r();return Me(),c}var U=!1,V=[];function me(){U=!0}function Ce(){U=!1,he(V),V=[]}function he(r){if(U){V=V.concat(r);return}let c=[],u=new Set,p=new Map,_=new Map;for(let y=0;y<r.length;y++)if(!r[y].target._x_ignoreMutationObserver&&(r[y].type==="childList"&&(r[y].removedNodes.forEach(x=>{x.nodeType===1&&x._x_marker&&u.add(x)}),r[y].addedNodes.forEach(x=>{if(x.nodeType===1){if(u.has(x)){u.delete(x);return}x._x_marker||c.push(x)}})),r[y].type==="attributes")){let x=r[y].target,L=r[y].attributeName,q=r[y].oldValue,ae=()=>{p.has(x)||p.set(x,[]),p.get(x).push({name:L,value:x.getAttribute(L)})},Le=()=>{_.has(x)||_.set(x,[]),_.get(x).push(L)};x.hasAttribute(L)&&q===null?ae():x.hasAttribute(L)?(Le(),ae()):Le()}_.forEach((y,x)=>{bt(x,y)}),p.forEach((y,x)=>{ke.forEach(L=>L(x,y))});for(let y of u)c.some(x=>x.contains(y))||we.forEach(x=>x(y));for(let y of c)y.isConnected&&Pe.forEach(x=>x(y));c=null,u=null,p=null,_=null}function pe(r){return ge(Q(r))}function K(r,c,u){return r._x_dataStack=[c,...Q(u||r)],()=>{r._x_dataStack=r._x_dataStack.filter(p=>p!==c)}}function Q(r){return r._x_dataStack?r._x_dataStack:typeof ShadowRoot=="function"&&r instanceof ShadowRoot?Q(r.host):r.parentNode?Q(r.parentNode):[]}function ge(r){return new Proxy({objects:r},ze)}var ze={ownKeys({objects:r}){return Array.from(new Set(r.flatMap(c=>Object.keys(c))))},has({objects:r},c){return c==Symbol.unscopables?!1:r.some(u=>Object.prototype.hasOwnProperty.call(u,c)||Reflect.has(u,c))},get({objects:r},c,u){return c=="toJSON"?He:Reflect.get(r.find(p=>Reflect.has(p,c))||{},c,u)},set({objects:r},c,u,p){const _=r.find(x=>Object.prototype.hasOwnProperty.call(x,c))||r[r.length-1],y=Object.getOwnPropertyDescriptor(_,c);return y!=null&&y.set&&(y!=null&&y.get)?y.set.call(p,u)||!0:Reflect.set(_,c,u)}};function He(){return Reflect.ownKeys(this).reduce((c,u)=>(c[u]=Reflect.get(this,u),c),{})}function We(r){let c=p=>typeof p=="object"&&!Array.isArray(p)&&p!==null,u=(p,_="")=>{Object.entries(Object.getOwnPropertyDescriptors(p)).forEach(([y,{value:x,enumerable:L}])=>{if(L===!1||x===void 0||typeof x=="object"&&x!==null&&x.__v_skip)return;let q=_===""?y:`${_}.${y}`;typeof x=="object"&&x!==null&&x._x_interceptor?p[y]=x.initialize(r,q,y):c(x)&&x!==p&&!(x instanceof Element)&&u(x,q)})};return u(r)}function pt(r,c=()=>{}){let u={initialValue:void 0,_x_interceptor:!0,initialize(p,_,y){return r(this.initialValue,()=>Gt(p,_),x=>ei(p,_,x),_,y)}};return c(u),p=>{if(typeof p=="object"&&p!==null&&p._x_interceptor){let _=u.initialize.bind(u);u.initialize=(y,x,L)=>{let q=p.initialize(y,x,L);return u.initialValue=q,_(y,x,L)}}else u.initialValue=p;return u}}function Gt(r,c){return c.split(".").reduce((u,p)=>u[p],r)}function ei(r,c,u){if(typeof c=="string"&&(c=c.split(".")),c.length===1)r[c[0]]=u;else{if(c.length===0)throw error;return r[c[0]]||(r[c[0]]={}),ei(r[c[0]],c.slice(1),u)}}var Oi={};function Ut(r,c){Oi[r]=c}function mi(r,c){let u=Di(c);return Object.entries(Oi).forEach(([p,_])=>{Object.defineProperty(r,`$${p}`,{get(){return _(c,u)},enumerable:!1})}),r}function Di(r){let[c,u]=fe(r),p={interceptor:pt,...c};return be(r,u),p}function Xn(r,c,u,...p){try{return u(...p)}catch(_){Ai(_,r,c)}}function Ai(r,c,u=void 0){r=Object.assign(r??{message:"No error message given."},{el:c,expression:u}),console.warn(`Alpine Expression Error: ${r.message}

${u?'Expression: "'+u+`"

`:""}`,c),setTimeout(()=>{throw r},0)}var zi=!0;function Yn(r){let c=zi;zi=!1;let u=r();return zi=c,u}function gi(r,c,u={}){let p;return Rt(r,c)(_=>p=_,u),p}function Rt(...r){return Tn(...r)}var Tn=Zn;function Qn(r){Tn=r}function Zn(r,c){let u={};mi(u,r);let p=[u,...Q(r)],_=typeof c=="function"?Ur(p,c):Hr(p,c,r);return Xn.bind(null,r,c,_)}function Ur(r,c){return(u=()=>{},{scope:p={},params:_=[]}={})=>{let y=c.apply(ge([p,...r]),_);Ji(u,y)}}var An={};function Br(r,c){if(An[r])return An[r];let u=Object.getPrototypeOf(async function(){}).constructor,p=/^[\n\s]*if.*\(.*\)/.test(r.trim())||/^(let|const)\s/.test(r.trim())?`(async()=>{ ${r} })()`:r,y=(()=>{try{let x=new u(["__self","scope"],`with (scope) { __self.result = ${p} }; __self.finished = true; return __self.result;`);return Object.defineProperty(x,"name",{value:`[Alpine] ${r}`}),x}catch(x){return Ai(x,c,r),Promise.resolve()}})();return An[r]=y,y}function Hr(r,c,u){let p=Br(c,u);return(_=()=>{},{scope:y={},params:x=[]}={})=>{p.result=void 0,p.finished=!1;let L=ge([y,...r]);if(typeof p=="function"){let q=p(p,L).catch(ae=>Ai(ae,u,c));p.finished?(Ji(_,p.result,L,x,u),p.result=void 0):q.then(ae=>{Ji(_,ae,L,x,u)}).catch(ae=>Ai(ae,u,c)).finally(()=>p.result=void 0)}}}function Ji(r,c,u,p,_){if(zi&&typeof c=="function"){let y=c.apply(u,p);y instanceof Promise?y.then(x=>Ji(r,x,u,p)).catch(x=>Ai(x,_,c)):r(y)}else typeof c=="object"&&c instanceof Promise?c.then(y=>r(y)):r(c)}var Gi="x-";function _i(r=""){return Gi+r}function er(r){Gi=r}var Ki={};function m(r,c){return Ki[r]=c,{before(u){if(!Ki[u]){console.warn(String.raw`Cannot find directive \`${u}\`. \`${r}\` will use the default order of execution`);return}const p=st.indexOf(u);st.splice(p>=0?p:st.indexOf("DEFAULT"),0,r)}}}function S(r){return Object.keys(Ki).includes(r)}function D(r,c,u){if(c=Array.from(c),r._x_virtualDirectives){let y=Object.entries(r._x_virtualDirectives).map(([L,q])=>({name:L,value:q})),x=M(y);y=y.map(L=>x.find(q=>q.name===L.name)?{name:`x-bind:${L.name}`,value:`"${L.value}"`}:L),c=c.concat(y)}let p={};return c.map(qe((y,x)=>p[y]=x)).filter(Ue).map(Ve(p,u)).sort(qt).map(y=>_e(r,y))}function M(r){return Array.from(r).map(qe()).filter(c=>!Ue(c))}var B=!1,G=new Map,Y=Symbol();function re(r){B=!0;let c=Symbol();Y=c,G.set(c,[]);let u=()=>{for(;G.get(c).length;)G.get(c).shift()();G.delete(c)},p=()=>{B=!1,u()};r(u),p()}function fe(r){let c=[],u=L=>c.push(L),[p,_]=Ft(r);return c.push(_),[{Alpine:Rn,effect:p,cleanup:u,evaluateLater:Rt.bind(Rt,r),evaluate:gi.bind(gi,r)},()=>c.forEach(L=>L())]}function _e(r,c){let u=()=>{},p=Ki[c.type]||u,[_,y]=fe(r);et(r,c.original,y);let x=()=>{r._x_ignore||r._x_ignoreSelf||(p.inline&&p.inline(r,c,_),p=p.bind(p,r,c,_),B?G.get(Y).push(p):p())};return x.runCleanups=y,x}var Ne=(r,c)=>({name:u,value:p})=>(u.startsWith(r)&&(u=u.replace(r,c)),{name:u,value:p}),Oe=r=>r;function qe(r=()=>{}){return({name:c,value:u})=>{let{name:p,value:_}=Ae.reduce((y,x)=>x(y),{name:c,value:u});return p!==c&&r(p,c),{name:p,value:_}}}var Ae=[];function De(r){Ae.push(r)}function Ue({name:r}){return ct().test(r)}var ct=()=>new RegExp(`^${Gi}([^:^.]+)\\b`);function Ve(r,c){return({name:u,value:p})=>{let _=u.match(ct()),y=u.match(/:([a-zA-Z0-9\-_:]+)/),x=u.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],L=c||r[u]||u;return{type:_?_[1]:null,value:y?y[1]:null,modifiers:x.map(q=>q.replace(".","")),expression:p,original:L}}}var lt="DEFAULT",st=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",lt,"teleport"];function qt(r,c){let u=st.indexOf(r.type)===-1?lt:r.type,p=st.indexOf(c.type)===-1?lt:c.type;return st.indexOf(u)-st.indexOf(p)}function mt(r,c,u={}){r.dispatchEvent(new CustomEvent(c,{detail:u,bubbles:!0,composed:!0,cancelable:!0}))}function Bt(r,c){if(typeof ShadowRoot=="function"&&r instanceof ShadowRoot){Array.from(r.children).forEach(_=>Bt(_,c));return}let u=!1;if(c(r,()=>u=!0),u)return;let p=r.firstElementChild;for(;p;)Bt(p,c),p=p.nextElementSibling}function Ot(r,...c){console.warn(`Alpine Warning: ${r}`,...c)}var ki=!1;function tr(){ki&&Ot("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),ki=!0,document.body||Ot("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),mt(document,"alpine:init"),mt(document,"alpine:initializing"),Me(),Ie(c=>yi(c,Bt)),be(c=>Yi(c)),te((c,u)=>{D(c,u).forEach(p=>p())});let r=c=>!ti(c.parentElement,!0);Array.from(document.querySelectorAll(Pn().join(","))).filter(r).forEach(c=>{yi(c)}),mt(document,"alpine:initialized"),setTimeout(()=>{Vc()})}var Xi=[],kn=[];function ci(){return Xi.map(r=>r())}function Pn(){return Xi.concat(kn).map(r=>r())}function Pi(r){Xi.push(r)}function vi(r){kn.push(r)}function ti(r,c=!1){return Kt(r,u=>{if((c?Pn():ci()).some(_=>u.matches(_)))return!0})}function Kt(r,c){if(r){if(c(r))return r;if(r._x_teleportBack&&(r=r._x_teleportBack),!!r.parentElement)return Kt(r.parentElement,c)}}function Wr(r){return ci().some(c=>r.matches(c))}var _o=[];function Wc(r){_o.push(r)}var qc=1;function yi(r,c=Bt,u=()=>{}){Kt(r,p=>p._x_ignore)||re(()=>{c(r,(p,_)=>{p._x_marker||(u(p,_),_o.forEach(y=>y(p,_)),D(p,p.attributes).forEach(y=>y()),p._x_ignore||(p._x_marker=qc++),p._x_ignore&&_())})})}function Yi(r,c=Bt){c(r,u=>{Z(u),bt(u),delete u._x_marker})}function Vc(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([c,u,p])=>{S(u)||p.some(_=>{if(document.querySelector(_))return Ot(`found "${_}", but missing ${c} plugin`),!0})})}var qr=[],Vr=!1;function zr(r=()=>{}){return queueMicrotask(()=>{Vr||setTimeout(()=>{Jr()})}),new Promise(c=>{qr.push(()=>{r(),c()})})}function Jr(){for(Vr=!1;qr.length;)qr.shift()()}function zc(){Vr=!0}function Gr(r,c){return Array.isArray(c)?vo(r,c.join(" ")):typeof c=="object"&&c!==null?Jc(r,c):typeof c=="function"?Gr(r,c()):vo(r,c)}function vo(r,c){let u=_=>_.split(" ").filter(y=>!r.classList.contains(y)).filter(Boolean),p=_=>(r.classList.add(..._),()=>{r.classList.remove(..._)});return c=c===!0?c="":c||"",p(u(c))}function Jc(r,c){let u=L=>L.split(" ").filter(Boolean),p=Object.entries(c).flatMap(([L,q])=>q?u(L):!1).filter(Boolean),_=Object.entries(c).flatMap(([L,q])=>q?!1:u(L)).filter(Boolean),y=[],x=[];return _.forEach(L=>{r.classList.contains(L)&&(r.classList.remove(L),x.push(L))}),p.forEach(L=>{r.classList.contains(L)||(r.classList.add(L),y.push(L))}),()=>{x.forEach(L=>r.classList.add(L)),y.forEach(L=>r.classList.remove(L))}}function ir(r,c){return typeof c=="object"&&c!==null?Gc(r,c):Kc(r,c)}function Gc(r,c){let u={};return Object.entries(c).forEach(([p,_])=>{u[p]=r.style[p],p.startsWith("--")||(p=Xc(p)),r.style.setProperty(p,_)}),setTimeout(()=>{r.style.length===0&&r.removeAttribute("style")}),()=>{ir(r,u)}}function Kc(r,c){let u=r.getAttribute("style",c);return r.setAttribute("style",c),()=>{r.setAttribute("style",u||"")}}function Xc(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Kr(r,c=()=>{}){let u=!1;return function(){u?c.apply(this,arguments):(u=!0,r.apply(this,arguments))}}m("transition",(r,{value:c,modifiers:u,expression:p},{evaluate:_})=>{typeof p=="function"&&(p=_(p)),p!==!1&&(!p||typeof p=="boolean"?Qc(r,u,c):Yc(r,p,c))});function Yc(r,c,u){yo(r,Gr,""),{enter:_=>{r._x_transition.enter.during=_},"enter-start":_=>{r._x_transition.enter.start=_},"enter-end":_=>{r._x_transition.enter.end=_},leave:_=>{r._x_transition.leave.during=_},"leave-start":_=>{r._x_transition.leave.start=_},"leave-end":_=>{r._x_transition.leave.end=_}}[u](c)}function Qc(r,c,u){yo(r,ir);let p=!c.includes("in")&&!c.includes("out")&&!u,_=p||c.includes("in")||["enter"].includes(u),y=p||c.includes("out")||["leave"].includes(u);c.includes("in")&&!p&&(c=c.filter((Ye,$e)=>$e<c.indexOf("out"))),c.includes("out")&&!p&&(c=c.filter((Ye,$e)=>$e>c.indexOf("out")));let x=!c.includes("opacity")&&!c.includes("scale"),L=x||c.includes("opacity"),q=x||c.includes("scale"),ae=L?0:1,Le=q?In(c,"scale",95)/100:1,ot=In(c,"delay",0)/1e3,Be=In(c,"origin","center"),rt="opacity, transform",Vt=In(c,"duration",150)/1e3,li=In(c,"duration",75)/1e3,xe="cubic-bezier(0.4, 0.0, 0.2, 1)";_&&(r._x_transition.enter.during={transformOrigin:Be,transitionDelay:`${ot}s`,transitionProperty:rt,transitionDuration:`${Vt}s`,transitionTimingFunction:xe},r._x_transition.enter.start={opacity:ae,transform:`scale(${Le})`},r._x_transition.enter.end={opacity:1,transform:"scale(1)"}),y&&(r._x_transition.leave.during={transformOrigin:Be,transitionDelay:`${ot}s`,transitionProperty:rt,transitionDuration:`${li}s`,transitionTimingFunction:xe},r._x_transition.leave.start={opacity:1,transform:"scale(1)"},r._x_transition.leave.end={opacity:ae,transform:`scale(${Le})`})}function yo(r,c,u={}){r._x_transition||(r._x_transition={enter:{during:u,start:u,end:u},leave:{during:u,start:u,end:u},in(p=()=>{},_=()=>{}){Xr(r,c,{during:this.enter.during,start:this.enter.start,end:this.enter.end},p,_)},out(p=()=>{},_=()=>{}){Xr(r,c,{during:this.leave.during,start:this.leave.start,end:this.leave.end},p,_)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(r,c,u,p){const _=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let y=()=>_(u);if(c){r._x_transition&&(r._x_transition.enter||r._x_transition.leave)?r._x_transition.enter&&(Object.entries(r._x_transition.enter.during).length||Object.entries(r._x_transition.enter.start).length||Object.entries(r._x_transition.enter.end).length)?r._x_transition.in(u):y():r._x_transition?r._x_transition.in(u):y();return}r._x_hidePromise=r._x_transition?new Promise((x,L)=>{r._x_transition.out(()=>{},()=>x(p)),r._x_transitioning&&r._x_transitioning.beforeCancel(()=>L({isFromCancelledTransition:!0}))}):Promise.resolve(p),queueMicrotask(()=>{let x=bo(r);x?(x._x_hideChildren||(x._x_hideChildren=[]),x._x_hideChildren.push(r)):_(()=>{let L=q=>{let ae=Promise.all([q._x_hidePromise,...(q._x_hideChildren||[]).map(L)]).then(([Le])=>Le==null?void 0:Le());return delete q._x_hidePromise,delete q._x_hideChildren,ae};L(r).catch(q=>{if(!q.isFromCancelledTransition)throw q})})})};function bo(r){let c=r.parentNode;if(c)return c._x_hidePromise?c:bo(c)}function Xr(r,c,{during:u,start:p,end:_}={},y=()=>{},x=()=>{}){if(r._x_transitioning&&r._x_transitioning.cancel(),Object.keys(u).length===0&&Object.keys(p).length===0&&Object.keys(_).length===0){y(),x();return}let L,q,ae;Zc(r,{start(){L=c(r,p)},during(){q=c(r,u)},before:y,end(){L(),ae=c(r,_)},after:x,cleanup(){q(),ae()}})}function Zc(r,c){let u,p,_,y=Kr(()=>{ne(()=>{u=!0,p||c.before(),_||(c.end(),Jr()),c.after(),r.isConnected&&c.cleanup(),delete r._x_transitioning})});r._x_transitioning={beforeCancels:[],beforeCancel(x){this.beforeCancels.push(x)},cancel:Kr(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();y()}),finish:y},ne(()=>{c.start(),c.during()}),zc(),requestAnimationFrame(()=>{if(u)return;let x=Number(getComputedStyle(r).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,L=Number(getComputedStyle(r).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;x===0&&(x=Number(getComputedStyle(r).animationDuration.replace("s",""))*1e3),ne(()=>{c.before()}),p=!0,requestAnimationFrame(()=>{u||(ne(()=>{c.end()}),Jr(),setTimeout(r._x_transitioning.finish,x+L),_=!0)})})}function In(r,c,u){if(r.indexOf(c)===-1)return u;const p=r[r.indexOf(c)+1];if(!p||c==="scale"&&isNaN(p))return u;if(c==="duration"||c==="delay"){let _=p.match(/([0-9]+)ms/);if(_)return _[1]}return c==="origin"&&["top","right","left","center","bottom"].includes(r[r.indexOf(c)+2])?[p,r[r.indexOf(c)+2]].join(" "):p}var Ii=!1;function Ri(r,c=()=>{}){return(...u)=>Ii?c(...u):r(...u)}function el(r){return(...c)=>Ii&&r(...c)}var wo=[];function nr(r){wo.push(r)}function tl(r,c){wo.forEach(u=>u(r,c)),Ii=!0,So(()=>{yi(c,(u,p)=>{p(u,()=>{})})}),Ii=!1}var Yr=!1;function il(r,c){c._x_dataStack||(c._x_dataStack=r._x_dataStack),Ii=!0,Yr=!0,So(()=>{nl(c)}),Ii=!1,Yr=!1}function nl(r){let c=!1;yi(r,(p,_)=>{Bt(p,(y,x)=>{if(c&&Wr(y))return x();c=!0,_(y,x)})})}function So(r){let c=J;vt((u,p)=>{let _=c(u);return Se(_),()=>{}}),r(),vt(c)}function Co(r,c,u,p=[]){switch(r._x_bindings||(r._x_bindings=X({})),r._x_bindings[c]=u,c=p.includes("camel")?dl(c):c,c){case"value":rl(r,u);break;case"style":ol(r,u);break;case"class":sl(r,u);break;case"selected":case"checked":al(r,c,u);break;default:xo(r,c,u);break}}function rl(r,c){if(ko(r))r.attributes.value===void 0&&(r.value=c),window.fromModel&&(typeof c=="boolean"?r.checked=rr(r.value)===c:r.checked=Eo(r.value,c));else if(Qr(r))Number.isInteger(c)?r.value=c:!Array.isArray(c)&&typeof c!="boolean"&&![null,void 0].includes(c)?r.value=String(c):Array.isArray(c)?r.checked=c.some(u=>Eo(u,r.value)):r.checked=!!c;else if(r.tagName==="SELECT")ul(r,c);else{if(r.value===c)return;r.value=c===void 0?"":c}}function sl(r,c){r._x_undoAddedClasses&&r._x_undoAddedClasses(),r._x_undoAddedClasses=Gr(r,c)}function ol(r,c){r._x_undoAddedStyles&&r._x_undoAddedStyles(),r._x_undoAddedStyles=ir(r,c)}function al(r,c,u){xo(r,c,u),ll(r,c,u)}function xo(r,c,u){[null,void 0,!1].includes(u)&&hl(c)?r.removeAttribute(c):(To(c)&&(u=c),cl(r,c,u))}function cl(r,c,u){r.getAttribute(c)!=u&&r.setAttribute(c,u)}function ll(r,c,u){r[c]!==u&&(r[c]=u)}function ul(r,c){const u=[].concat(c).map(p=>p+"");Array.from(r.options).forEach(p=>{p.selected=u.includes(p.value)})}function dl(r){return r.toLowerCase().replace(/-(\w)/g,(c,u)=>u.toUpperCase())}function Eo(r,c){return r==c}function rr(r){return[1,"1","true","on","yes",!0].includes(r)?!0:[0,"0","false","off","no",!1].includes(r)?!1:r?!!r:null}var fl=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function To(r){return fl.has(r)}function hl(r){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(r)}function pl(r,c,u){return r._x_bindings&&r._x_bindings[c]!==void 0?r._x_bindings[c]:Ao(r,c,u)}function ml(r,c,u,p=!0){if(r._x_bindings&&r._x_bindings[c]!==void 0)return r._x_bindings[c];if(r._x_inlineBindings&&r._x_inlineBindings[c]!==void 0){let _=r._x_inlineBindings[c];return _.extract=p,Yn(()=>gi(r,_.expression))}return Ao(r,c,u)}function Ao(r,c,u){let p=r.getAttribute(c);return p===null?typeof u=="function"?u():u:p===""?!0:To(c)?!![c,"true"].includes(p):p}function Qr(r){return r.type==="checkbox"||r.localName==="ui-checkbox"||r.localName==="ui-switch"}function ko(r){return r.type==="radio"||r.localName==="ui-radio"}function Po(r,c){var u;return function(){var p=this,_=arguments,y=function(){u=null,r.apply(p,_)};clearTimeout(u),u=setTimeout(y,c)}}function Io(r,c){let u;return function(){let p=this,_=arguments;u||(r.apply(p,_),u=!0,setTimeout(()=>u=!1,c))}}function Ro({get:r,set:c},{get:u,set:p}){let _=!0,y,x=J(()=>{let L=r(),q=u();if(_)p(Zr(L)),_=!1;else{let ae=JSON.stringify(L),Le=JSON.stringify(q);ae!==y?p(Zr(L)):ae!==Le&&c(Zr(q))}y=JSON.stringify(r()),JSON.stringify(u())});return()=>{Se(x)}}function Zr(r){return typeof r=="object"?JSON.parse(JSON.stringify(r)):r}function gl(r){(Array.isArray(r)?r:[r]).forEach(u=>u(Rn))}var Li={},Oo=!1;function _l(r,c){if(Oo||(Li=X(Li),Oo=!0),c===void 0)return Li[r];Li[r]=c,We(Li[r]),typeof c=="object"&&c!==null&&c.hasOwnProperty("init")&&typeof c.init=="function"&&Li[r].init()}function vl(){return Li}var Do={};function yl(r,c){let u=typeof c!="function"?()=>c:c;return r instanceof Element?Lo(r,u()):(Do[r]=u,()=>{})}function bl(r){return Object.entries(Do).forEach(([c,u])=>{Object.defineProperty(r,c,{get(){return(...p)=>u(...p)}})}),r}function Lo(r,c,u){let p=[];for(;p.length;)p.pop()();let _=Object.entries(c).map(([x,L])=>({name:x,value:L})),y=M(_);return _=_.map(x=>y.find(L=>L.name===x.name)?{name:`x-bind:${x.name}`,value:`"${x.value}"`}:x),D(r,_,u).map(x=>{p.push(x.runCleanups),x()}),()=>{for(;p.length;)p.pop()()}}var Mo={};function wl(r,c){Mo[r]=c}function Sl(r,c){return Object.entries(Mo).forEach(([u,p])=>{Object.defineProperty(r,u,{get(){return(..._)=>p.bind(c)(..._)},enumerable:!1})}),r}var Cl={get reactive(){return X},get release(){return Se},get effect(){return J},get raw(){return Xe},version:"3.14.9",flushAndStopDeferringMutations:Ce,dontAutoEvaluateFunctions:Yn,disableEffectScheduling:kt,startObservingMutations:Me,stopObservingMutations:Te,setReactivityEngine:_t,onAttributeRemoved:et,onAttributesAdded:te,closestDataStack:Q,skipDuringClone:Ri,onlyDuringClone:el,addRootSelector:Pi,addInitSelector:vi,interceptClone:nr,addScopeToNode:K,deferMutations:me,mapAttributes:De,evaluateLater:Rt,interceptInit:Wc,setEvaluator:Qn,mergeProxies:ge,extractProp:ml,findClosest:Kt,onElRemoved:be,closestRoot:ti,destroyTree:Yi,interceptor:pt,transition:Xr,setStyles:ir,mutateDom:ne,directive:m,entangle:Ro,throttle:Io,debounce:Po,evaluate:gi,initTree:yi,nextTick:zr,prefixed:_i,prefix:er,plugin:gl,magic:Ut,store:_l,start:tr,clone:il,cloneNode:tl,bound:pl,$data:pe,watch:Pt,walk:Bt,data:wl,bind:yl},Rn=Cl,sr=v(P());Ut("nextTick",()=>zr),Ut("dispatch",r=>mt.bind(mt,r)),Ut("watch",(r,{evaluateLater:c,cleanup:u})=>(p,_)=>{let y=c(p),L=Pt(()=>{let q;return y(ae=>q=ae),q},_);u(L)}),Ut("store",vl),Ut("data",r=>pe(r)),Ut("root",r=>ti(r)),Ut("refs",r=>(r._x_refs_proxy||(r._x_refs_proxy=ge(xl(r))),r._x_refs_proxy));function xl(r){let c=[];return Kt(r,u=>{u._x_refs&&c.push(u._x_refs)}),c}var es={};function jo(r){return es[r]||(es[r]=0),++es[r]}function El(r,c){return Kt(r,u=>{if(u._x_ids&&u._x_ids[c])return!0})}function Tl(r,c){r._x_ids||(r._x_ids={}),r._x_ids[c]||(r._x_ids[c]=jo(c))}Ut("id",(r,{cleanup:c})=>(u,p=null)=>{let _=`${u}${p?`-${p}`:""}`;return Al(r,_,c,()=>{let y=El(r,u),x=y?y._x_ids[u]:jo(u);return p?`${u}-${x}-${p}`:`${u}-${x}`})}),nr((r,c)=>{r._x_id&&(c._x_id=r._x_id)});function Al(r,c,u,p){if(r._x_id||(r._x_id={}),r._x_id[c])return r._x_id[c];let _=p();return r._x_id[c]=_,u(()=>{delete r._x_id[c]}),_}Ut("el",r=>r),No("Focus","focus","focus"),No("Persist","persist","persist");function No(r,c,u){Ut(c,p=>Ot(`You can't use [$${c}] without first installing the "${r}" plugin here: https://alpinejs.dev/plugins/${u}`,p))}m("modelable",(r,{expression:c},{effect:u,evaluateLater:p,cleanup:_})=>{let y=p(c),x=()=>{let Le;return y(ot=>Le=ot),Le},L=p(`${c} = __placeholder`),q=Le=>L(()=>{},{scope:{__placeholder:Le}}),ae=x();q(ae),queueMicrotask(()=>{if(!r._x_model)return;r._x_removeModelListeners.default();let Le=r._x_model.get,ot=r._x_model.set,Be=Ro({get(){return Le()},set(rt){ot(rt)}},{get(){return x()},set(rt){q(rt)}});_(Be)})}),m("teleport",(r,{modifiers:c,expression:u},{cleanup:p})=>{r.tagName.toLowerCase()!=="template"&&Ot("x-teleport can only be used on a <template> tag",r);let _=$o(u),y=r.content.cloneNode(!0).firstElementChild;r._x_teleport=y,y._x_teleportBack=r,r.setAttribute("data-teleport-template",!0),y.setAttribute("data-teleport-target",!0),r._x_forwardEvents&&r._x_forwardEvents.forEach(L=>{y.addEventListener(L,q=>{q.stopPropagation(),r.dispatchEvent(new q.constructor(q.type,q))})}),K(y,{},r);let x=(L,q,ae)=>{ae.includes("prepend")?q.parentNode.insertBefore(L,q):ae.includes("append")?q.parentNode.insertBefore(L,q.nextSibling):q.appendChild(L)};ne(()=>{x(y,_,c),Ri(()=>{yi(y)})()}),r._x_teleportPutBack=()=>{let L=$o(u);ne(()=>{x(r._x_teleport,L,c)})},p(()=>ne(()=>{y.remove(),Yi(y)}))});var kl=document.createElement("div");function $o(r){let c=Ri(()=>document.querySelector(r),()=>kl)();return c||Ot(`Cannot find x-teleport element for selector: "${r}"`),c}var Fo=()=>{};Fo.inline=(r,{modifiers:c},{cleanup:u})=>{c.includes("self")?r._x_ignoreSelf=!0:r._x_ignore=!0,u(()=>{c.includes("self")?delete r._x_ignoreSelf:delete r._x_ignore})},m("ignore",Fo),m("effect",Ri((r,{expression:c},{effect:u})=>{u(Rt(r,c))}));function ts(r,c,u,p){let _=r,y=q=>p(q),x={},L=(q,ae)=>Le=>ae(q,Le);if(u.includes("dot")&&(c=Pl(c)),u.includes("camel")&&(c=Il(c)),u.includes("passive")&&(x.passive=!0),u.includes("capture")&&(x.capture=!0),u.includes("window")&&(_=window),u.includes("document")&&(_=document),u.includes("debounce")){let q=u[u.indexOf("debounce")+1]||"invalid-wait",ae=or(q.split("ms")[0])?Number(q.split("ms")[0]):250;y=Po(y,ae)}if(u.includes("throttle")){let q=u[u.indexOf("throttle")+1]||"invalid-wait",ae=or(q.split("ms")[0])?Number(q.split("ms")[0]):250;y=Io(y,ae)}return u.includes("prevent")&&(y=L(y,(q,ae)=>{ae.preventDefault(),q(ae)})),u.includes("stop")&&(y=L(y,(q,ae)=>{ae.stopPropagation(),q(ae)})),u.includes("once")&&(y=L(y,(q,ae)=>{q(ae),_.removeEventListener(c,y,x)})),(u.includes("away")||u.includes("outside"))&&(_=document,y=L(y,(q,ae)=>{r.contains(ae.target)||ae.target.isConnected!==!1&&(r.offsetWidth<1&&r.offsetHeight<1||r._x_isShown!==!1&&q(ae))})),u.includes("self")&&(y=L(y,(q,ae)=>{ae.target===r&&q(ae)})),(Ol(c)||Uo(c))&&(y=L(y,(q,ae)=>{Dl(ae,u)||q(ae)})),_.addEventListener(c,y,x),()=>{_.removeEventListener(c,y,x)}}function Pl(r){return r.replace(/-/g,".")}function Il(r){return r.toLowerCase().replace(/-(\w)/g,(c,u)=>u.toUpperCase())}function or(r){return!Array.isArray(r)&&!isNaN(r)}function Rl(r){return[" ","_"].includes(r)?r:r.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Ol(r){return["keydown","keyup"].includes(r)}function Uo(r){return["contextmenu","click","mouse"].some(c=>r.includes(c))}function Dl(r,c){let u=c.filter(y=>!["window","document","prevent","stop","once","capture","self","away","outside","passive"].includes(y));if(u.includes("debounce")){let y=u.indexOf("debounce");u.splice(y,or((u[y+1]||"invalid-wait").split("ms")[0])?2:1)}if(u.includes("throttle")){let y=u.indexOf("throttle");u.splice(y,or((u[y+1]||"invalid-wait").split("ms")[0])?2:1)}if(u.length===0||u.length===1&&Bo(r.key).includes(u[0]))return!1;const _=["ctrl","shift","alt","meta","cmd","super"].filter(y=>u.includes(y));return u=u.filter(y=>!_.includes(y)),!(_.length>0&&_.filter(x=>((x==="cmd"||x==="super")&&(x="meta"),r[`${x}Key`])).length===_.length&&(Uo(r.type)||Bo(r.key).includes(u[0])))}function Bo(r){if(!r)return[];r=Rl(r);let c={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return c[r]=r,Object.keys(c).map(u=>{if(c[u]===r)return u}).filter(u=>u)}m("model",(r,{modifiers:c,expression:u},{effect:p,cleanup:_})=>{let y=r;c.includes("parent")&&(y=r.parentNode);let x=Rt(y,u),L;typeof u=="string"?L=Rt(y,`${u} = __placeholder`):typeof u=="function"&&typeof u()=="string"?L=Rt(y,`${u()} = __placeholder`):L=()=>{};let q=()=>{let Be;return x(rt=>Be=rt),Ho(Be)?Be.get():Be},ae=Be=>{let rt;x(Vt=>rt=Vt),Ho(rt)?rt.set(Be):L(()=>{},{scope:{__placeholder:Be}})};typeof u=="string"&&r.type==="radio"&&ne(()=>{r.hasAttribute("name")||r.setAttribute("name",u)});var Le=r.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(r.type)||c.includes("lazy")?"change":"input";let ot=Ii?()=>{}:ts(r,Le,c,Be=>{ae(is(r,c,Be,q()))});if(c.includes("fill")&&([void 0,null,""].includes(q())||Qr(r)&&Array.isArray(q())||r.tagName.toLowerCase()==="select"&&r.multiple)&&ae(is(r,c,{target:r},q())),r._x_removeModelListeners||(r._x_removeModelListeners={}),r._x_removeModelListeners.default=ot,_(()=>r._x_removeModelListeners.default()),r.form){let Be=ts(r.form,"reset",[],rt=>{zr(()=>r._x_model&&r._x_model.set(is(r,c,{target:r},q())))});_(()=>Be())}r._x_model={get(){return q()},set(Be){ae(Be)}},r._x_forceModelUpdate=Be=>{Be===void 0&&typeof u=="string"&&u.match(/\./)&&(Be=""),window.fromModel=!0,ne(()=>Co(r,"value",Be)),delete window.fromModel},p(()=>{let Be=q();c.includes("unintrusive")&&document.activeElement.isSameNode(r)||r._x_forceModelUpdate(Be)})});function is(r,c,u,p){return ne(()=>{if(u instanceof CustomEvent&&u.detail!==void 0)return u.detail!==null&&u.detail!==void 0?u.detail:u.target.value;if(Qr(r))if(Array.isArray(p)){let _=null;return c.includes("number")?_=ns(u.target.value):c.includes("boolean")?_=rr(u.target.value):_=u.target.value,u.target.checked?p.includes(_)?p:p.concat([_]):p.filter(y=>!Ll(y,_))}else return u.target.checked;else{if(r.tagName.toLowerCase()==="select"&&r.multiple)return c.includes("number")?Array.from(u.target.selectedOptions).map(_=>{let y=_.value||_.text;return ns(y)}):c.includes("boolean")?Array.from(u.target.selectedOptions).map(_=>{let y=_.value||_.text;return rr(y)}):Array.from(u.target.selectedOptions).map(_=>_.value||_.text);{let _;return ko(r)?u.target.checked?_=u.target.value:_=p:_=u.target.value,c.includes("number")?ns(_):c.includes("boolean")?rr(_):c.includes("trim")?_.trim():_}}})}function ns(r){let c=r?parseFloat(r):null;return Ml(c)?c:r}function Ll(r,c){return r==c}function Ml(r){return!Array.isArray(r)&&!isNaN(r)}function Ho(r){return r!==null&&typeof r=="object"&&typeof r.get=="function"&&typeof r.set=="function"}m("cloak",r=>queueMicrotask(()=>ne(()=>r.removeAttribute(_i("cloak"))))),vi(()=>`[${_i("init")}]`),m("init",Ri((r,{expression:c},{evaluate:u})=>typeof c=="string"?!!c.trim()&&u(c,{},!1):u(c,{},!1))),m("text",(r,{expression:c},{effect:u,evaluateLater:p})=>{let _=p(c);u(()=>{_(y=>{ne(()=>{r.textContent=y})})})}),m("html",(r,{expression:c},{effect:u,evaluateLater:p})=>{let _=p(c);u(()=>{_(y=>{ne(()=>{r.innerHTML=y,r._x_ignoreSelf=!0,yi(r),delete r._x_ignoreSelf})})})}),De(Ne(":",Oe(_i("bind:"))));var Wo=(r,{value:c,modifiers:u,expression:p,original:_},{effect:y,cleanup:x})=>{if(!c){let q={};bl(q),Rt(r,p)(Le=>{Lo(r,Le,_)},{scope:q});return}if(c==="key")return jl(r,p);if(r._x_inlineBindings&&r._x_inlineBindings[c]&&r._x_inlineBindings[c].extract)return;let L=Rt(r,p);y(()=>L(q=>{q===void 0&&typeof p=="string"&&p.match(/\./)&&(q=""),ne(()=>Co(r,c,q,u))})),x(()=>{r._x_undoAddedClasses&&r._x_undoAddedClasses(),r._x_undoAddedStyles&&r._x_undoAddedStyles()})};Wo.inline=(r,{value:c,modifiers:u,expression:p})=>{c&&(r._x_inlineBindings||(r._x_inlineBindings={}),r._x_inlineBindings[c]={expression:p,extract:!1})},m("bind",Wo);function jl(r,c){r._x_keyExpression=c}Pi(()=>`[${_i("data")}]`),m("data",(r,{expression:c},{cleanup:u})=>{if(Nl(r))return;c=c===""?"{}":c;let p={};mi(p,r);let _={};Sl(_,p);let y=gi(r,c,{scope:_});(y===void 0||y===!0)&&(y={}),mi(y,r);let x=X(y);We(x);let L=K(r,x);x.init&&gi(r,x.init),u(()=>{x.destroy&&gi(r,x.destroy),L()})}),nr((r,c)=>{r._x_dataStack&&(c._x_dataStack=r._x_dataStack,c.setAttribute("data-has-alpine-state",!0))});function Nl(r){return Ii?Yr?!0:r.hasAttribute("data-has-alpine-state"):!1}m("show",(r,{modifiers:c,expression:u},{effect:p})=>{let _=Rt(r,u);r._x_doHide||(r._x_doHide=()=>{ne(()=>{r.style.setProperty("display","none",c.includes("important")?"important":void 0)})}),r._x_doShow||(r._x_doShow=()=>{ne(()=>{r.style.length===1&&r.style.display==="none"?r.removeAttribute("style"):r.style.removeProperty("display")})});let y=()=>{r._x_doHide(),r._x_isShown=!1},x=()=>{r._x_doShow(),r._x_isShown=!0},L=()=>setTimeout(x),q=Kr(ot=>ot?x():y(),ot=>{typeof r._x_toggleAndCascadeWithTransitions=="function"?r._x_toggleAndCascadeWithTransitions(r,ot,x,y):ot?L():y()}),ae,Le=!0;p(()=>_(ot=>{!Le&&ot===ae||(c.includes("immediate")&&(ot?L():y()),q(ot),ae=ot,Le=!1)}))}),m("for",(r,{expression:c},{effect:u,cleanup:p})=>{let _=Fl(c),y=Rt(r,_.items),x=Rt(r,r._x_keyExpression||"index");r._x_prevKeys=[],r._x_lookup={},u(()=>$l(r,_,y,x)),p(()=>{Object.values(r._x_lookup).forEach(L=>ne(()=>{Yi(L),L.remove()})),delete r._x_prevKeys,delete r._x_lookup})});function $l(r,c,u,p){let _=x=>typeof x=="object"&&!Array.isArray(x),y=r;u(x=>{Ul(x)&&x>=0&&(x=Array.from(Array(x).keys(),xe=>xe+1)),x===void 0&&(x=[]);let L=r._x_lookup,q=r._x_prevKeys,ae=[],Le=[];if(_(x))x=Object.entries(x).map(([xe,Ye])=>{let $e=qo(c,Ye,xe,x);p(Ge=>{Le.includes(Ge)&&Ot("Duplicate key on x-for",r),Le.push(Ge)},{scope:{index:xe,...$e}}),ae.push($e)});else for(let xe=0;xe<x.length;xe++){let Ye=qo(c,x[xe],xe,x);p($e=>{Le.includes($e)&&Ot("Duplicate key on x-for",r),Le.push($e)},{scope:{index:xe,...Ye}}),ae.push(Ye)}let ot=[],Be=[],rt=[],Vt=[];for(let xe=0;xe<q.length;xe++){let Ye=q[xe];Le.indexOf(Ye)===-1&&rt.push(Ye)}q=q.filter(xe=>!rt.includes(xe));let li="template";for(let xe=0;xe<Le.length;xe++){let Ye=Le[xe],$e=q.indexOf(Ye);if($e===-1)q.splice(xe,0,Ye),ot.push([li,xe]);else if($e!==xe){let Ge=q.splice(xe,1)[0],Dt=q.splice($e-1,1)[0];q.splice(xe,0,Dt),q.splice($e,0,Ge),Be.push([Ge,Dt])}else Vt.push(Ye);li=Ye}for(let xe=0;xe<rt.length;xe++){let Ye=rt[xe];Ye in L&&(ne(()=>{Yi(L[Ye]),L[Ye].remove()}),delete L[Ye])}for(let xe=0;xe<Be.length;xe++){let[Ye,$e]=Be[xe],Ge=L[Ye],Dt=L[$e],ii=document.createElement("div");ne(()=>{Dt||Ot('x-for ":key" is undefined or invalid',y,$e,L),Dt.after(ii),Ge.after(Dt),Dt._x_currentIfEl&&Dt.after(Dt._x_currentIfEl),ii.before(Ge),Ge._x_currentIfEl&&Ge.after(Ge._x_currentIfEl),ii.remove()}),Dt._x_refreshXForScope(ae[Le.indexOf($e)])}for(let xe=0;xe<ot.length;xe++){let[Ye,$e]=ot[xe],Ge=Ye==="template"?y:L[Ye];Ge._x_currentIfEl&&(Ge=Ge._x_currentIfEl);let Dt=ae[$e],ii=Le[$e],ui=document.importNode(y.content,!0).firstElementChild,Qi=X(Dt);K(ui,Qi,y),ui._x_refreshXForScope=On=>{Object.entries(On).forEach(([Dn,Zi])=>{Qi[Dn]=Zi})},ne(()=>{Ge.after(ui),Ri(()=>yi(ui))()}),typeof ii=="object"&&Ot("x-for key cannot be an object, it must be a string or an integer",y),L[ii]=ui}for(let xe=0;xe<Vt.length;xe++)L[Vt[xe]]._x_refreshXForScope(ae[Le.indexOf(Vt[xe])]);y._x_prevKeys=Le})}function Fl(r){let c=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,u=/^\s*\(|\)\s*$/g,p=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,_=r.match(p);if(!_)return;let y={};y.items=_[2].trim();let x=_[1].replace(u,"").trim(),L=x.match(c);return L?(y.item=x.replace(c,"").trim(),y.index=L[1].trim(),L[2]&&(y.collection=L[2].trim())):y.item=x,y}function qo(r,c,u,p){let _={};return/^\[.*\]$/.test(r.item)&&Array.isArray(c)?r.item.replace("[","").replace("]","").split(",").map(x=>x.trim()).forEach((x,L)=>{_[x]=c[L]}):/^\{.*\}$/.test(r.item)&&!Array.isArray(c)&&typeof c=="object"?r.item.replace("{","").replace("}","").split(",").map(x=>x.trim()).forEach(x=>{_[x]=c[x]}):_[r.item]=c,r.index&&(_[r.index]=u),r.collection&&(_[r.collection]=p),_}function Ul(r){return!Array.isArray(r)&&!isNaN(r)}function Vo(){}Vo.inline=(r,{expression:c},{cleanup:u})=>{let p=ti(r);p._x_refs||(p._x_refs={}),p._x_refs[c]=r,u(()=>delete p._x_refs[c])},m("ref",Vo),m("if",(r,{expression:c},{effect:u,cleanup:p})=>{r.tagName.toLowerCase()!=="template"&&Ot("x-if can only be used on a <template> tag",r);let _=Rt(r,c),y=()=>{if(r._x_currentIfEl)return r._x_currentIfEl;let L=r.content.cloneNode(!0).firstElementChild;return K(L,{},r),ne(()=>{r.after(L),Ri(()=>yi(L))()}),r._x_currentIfEl=L,r._x_undoIf=()=>{ne(()=>{Yi(L),L.remove()}),delete r._x_currentIfEl},L},x=()=>{r._x_undoIf&&(r._x_undoIf(),delete r._x_undoIf)};u(()=>_(L=>{L?y():x()})),p(()=>r._x_undoIf&&r._x_undoIf())}),m("id",(r,{expression:c},{evaluate:u})=>{u(c).forEach(_=>Tl(r,_))}),nr((r,c)=>{r._x_ids&&(c._x_ids=r._x_ids)}),De(Ne("@",Oe(_i("on:")))),m("on",Ri((r,{value:c,modifiers:u,expression:p},{cleanup:_})=>{let y=p?Rt(r,p):()=>{};r.tagName.toLowerCase()==="template"&&(r._x_forwardEvents||(r._x_forwardEvents=[]),r._x_forwardEvents.includes(c)||r._x_forwardEvents.push(c));let x=ts(r,c,u,L=>{y(()=>{},{scope:{$event:L},params:[L]})});_(()=>x())})),ar("Collapse","collapse","collapse"),ar("Intersect","intersect","intersect"),ar("Focus","trap","focus"),ar("Mask","mask","mask");function ar(r,c,u){m(c,p=>Ot(`You can't use [x-${c}] without first installing the "${r}" plugin here: https://alpinejs.dev/plugins/${u}`,p))}Rn.setEvaluator(Zn),Rn.setReactivityEngine({reactive:sr.reactive,effect:sr.effect,release:sr.stop,raw:sr.toRaw});var zo=Rn,Bl=zo}}),Zl=pi({"../alpine/packages/collapse/dist/module.cjs.js"(e,t){var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(N,k)=>{for(var b in k)i(N,b,{get:k[b],enumerable:!0})},l=(N,k,b,P)=>{if(k&&typeof k=="object"||typeof k=="function")for(let C of o(k))!s.call(N,C)&&C!==b&&i(N,C,{get:()=>k[C],enumerable:!(P=n(k,C))||P.enumerable});return N},d=N=>l(i({},"__esModule",{value:!0}),N),f={};a(f,{collapse:()=>g,default:()=>w}),t.exports=d(f);function g(N){N.directive("collapse",k),k.inline=(b,{modifiers:P})=>{P.includes("min")&&(b._x_doShow=()=>{},b._x_doHide=()=>{})};function k(b,{modifiers:P}){let C=v(P,"duration",250)/1e3,I=v(P,"min",0),j=!P.includes("min");b._x_isShown||(b.style.height=`${I}px`),!b._x_isShown&&j&&(b.hidden=!0),b._x_isShown||(b.style.overflow="hidden");let T=($,E)=>{let A=N.setStyles($,E);return E.height?()=>{}:A},O={transitionProperty:"height",transitionDuration:`${C}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};b._x_transition={in($=()=>{},E=()=>{}){j&&(b.hidden=!1),j&&(b.style.display=null);let A=b.getBoundingClientRect().height;b.style.height="auto";let W=b.getBoundingClientRect().height;A===W&&(A=I),N.transition(b,N.setStyles,{during:O,start:{height:A+"px"},end:{height:W+"px"}},()=>b._x_isShown=!0,()=>{Math.abs(b.getBoundingClientRect().height-W)<1&&(b.style.overflow=null)})},out($=()=>{},E=()=>{}){let A=b.getBoundingClientRect().height;N.transition(b,T,{during:O,start:{height:A+"px"},end:{height:I+"px"}},()=>b.style.overflow="hidden",()=>{b._x_isShown=!1,b.style.height==`${I}px`&&j&&(b.style.display="none",b.hidden=!0)})}}}}function v(N,k,b){if(N.indexOf(k)===-1)return b;const P=N[N.indexOf(k)+1];if(!P)return b;if(k==="duration"){let C=P.match(/([0-9]+)ms/);if(C)return C[1]}if(k==="min"){let C=P.match(/([0-9]+)px/);if(C)return C[1]}return P}var w=g}}),eu=pi({"../alpine/packages/focus/dist/module.cjs.js"(e,t){var i=Object.create,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,a=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,d=(E,A)=>function(){return A||(0,E[s(E)[0]])((A={exports:{}}).exports,A),A.exports},f=(E,A)=>{for(var W in A)n(E,W,{get:A[W],enumerable:!0})},g=(E,A,W,z)=>{if(A&&typeof A=="object"||typeof A=="function")for(let X of s(A))!l.call(E,X)&&X!==W&&n(E,X,{get:()=>A[X],enumerable:!(z=o(A,X))||z.enumerable});return E},v=(E,A,W)=>(W=E!=null?i(a(E)):{},g(!E||!E.__esModule?n(W,"default",{value:E,enumerable:!0}):W,E)),w=E=>g(n({},"__esModule",{value:!0}),E),N=d({"node_modules/tabbable/dist/index.js"(E){Object.defineProperty(E,"__esModule",{value:!0});var A=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],W=A.join(","),z=typeof Element>"u",X=z?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,J=!z&&Element.prototype.getRootNode?function(ne){return ne.getRootNode()}:function(ne){return ne.ownerDocument},Se=function(U,V,me){var Ce=Array.prototype.slice.apply(U.querySelectorAll(W));return V&&X.call(U,W)&&Ce.unshift(U),Ce=Ce.filter(me),Ce},Xe=function ne(U,V,me){for(var Ce=[],he=Array.from(U);he.length;){var pe=he.shift();if(pe.tagName==="SLOT"){var K=pe.assignedElements(),Q=K.length?K:pe.children,ge=ne(Q,!0,me);me.flatten?Ce.push.apply(Ce,ge):Ce.push({scope:pe,candidates:ge})}else{var ze=X.call(pe,W);ze&&me.filter(pe)&&(V||!U.includes(pe))&&Ce.push(pe);var He=pe.shadowRoot||typeof me.getShadowRoot=="function"&&me.getShadowRoot(pe),We=!me.shadowRootFilter||me.shadowRootFilter(pe);if(He&&We){var pt=ne(He===!0?pe.children:He.children,!0,me);me.flatten?Ce.push.apply(Ce,pt):Ce.push({scope:pe,candidates:pt})}else he.unshift.apply(he,pe.children)}}return Ce},nt=function(U,V){return U.tabIndex<0&&(V||/^(AUDIO|VIDEO|DETAILS)$/.test(U.tagName)||U.isContentEditable)&&isNaN(parseInt(U.getAttribute("tabindex"),10))?0:U.tabIndex},kt=function(U,V){return U.tabIndex===V.tabIndex?U.documentOrder-V.documentOrder:U.tabIndex-V.tabIndex},_t=function(U){return U.tagName==="INPUT"},vt=function(U){return _t(U)&&U.type==="hidden"},Ft=function(U){var V=U.tagName==="DETAILS"&&Array.prototype.slice.apply(U.children).some(function(me){return me.tagName==="SUMMARY"});return V},Pt=function(U,V){for(var me=0;me<U.length;me++)if(U[me].checked&&U[me].form===V)return U[me]},ke=function(U){if(!U.name)return!0;var V=U.form||J(U),me=function(K){return V.querySelectorAll('input[type="radio"][name="'+K+'"]')},Ce;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")Ce=me(window.CSS.escape(U.name));else try{Ce=me(U.name)}catch(pe){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",pe.message),!1}var he=Pt(Ce,U.form);return!he||he===U},we=function(U){return _t(U)&&U.type==="radio"},Pe=function(U){return we(U)&&!ke(U)},Ie=function(U){var V=U.getBoundingClientRect(),me=V.width,Ce=V.height;return me===0&&Ce===0},be=function(U,V){var me=V.displayCheck,Ce=V.getShadowRoot;if(getComputedStyle(U).visibility==="hidden")return!0;var he=X.call(U,"details>summary:first-of-type"),pe=he?U.parentElement:U;if(X.call(pe,"details:not([open]) *"))return!0;var K=J(U).host,Q=(K==null?void 0:K.ownerDocument.contains(K))||U.ownerDocument.contains(U);if(!me||me==="full"){if(typeof Ce=="function"){for(var ge=U;U;){var ze=U.parentElement,He=J(U);if(ze&&!ze.shadowRoot&&Ce(ze)===!0)return Ie(U);U.assignedSlot?U=U.assignedSlot:!ze&&He!==U.ownerDocument?U=He.host:U=ze}U=ge}if(Q)return!U.getClientRects().length}else if(me==="non-zero-area")return Ie(U);return!1},te=function(U){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(U.tagName))for(var V=U.parentElement;V;){if(V.tagName==="FIELDSET"&&V.disabled){for(var me=0;me<V.children.length;me++){var Ce=V.children.item(me);if(Ce.tagName==="LEGEND")return X.call(V,"fieldset[disabled] *")?!0:!Ce.contains(U)}return!0}V=V.parentElement}return!1},et=function(U,V){return!(V.disabled||vt(V)||be(V,U)||Ft(V)||te(V))},bt=function(U,V){return!(Pe(V)||nt(V)<0||!et(U,V))},Z=function(U){var V=parseInt(U.getAttribute("tabindex"),10);return!!(isNaN(V)||V>=0)},le=function ne(U){var V=[],me=[];return U.forEach(function(Ce,he){var pe=!!Ce.scope,K=pe?Ce.scope:Ce,Q=nt(K,pe),ge=pe?ne(Ce.candidates):K;Q===0?pe?V.push.apply(V,ge):V.push(K):me.push({documentOrder:he,tabIndex:Q,item:Ce,isScope:pe,content:ge})}),me.sort(kt).reduce(function(Ce,he){return he.isScope?Ce.push.apply(Ce,he.content):Ce.push(he.content),Ce},[]).concat(V)},Re=function(U,V){V=V||{};var me;return V.getShadowRoot?me=Xe([U],V.includeContainer,{filter:bt.bind(null,V),flatten:!1,getShadowRoot:V.getShadowRoot,shadowRootFilter:Z}):me=Se(U,V.includeContainer,bt.bind(null,V)),le(me)},Me=function(U,V){V=V||{};var me;return V.getShadowRoot?me=Xe([U],V.includeContainer,{filter:et.bind(null,V),flatten:!0,getShadowRoot:V.getShadowRoot}):me=Se(U,V.includeContainer,et.bind(null,V)),me},Te=function(U,V){if(V=V||{},!U)throw new Error("No node provided");return X.call(U,W)===!1?!1:bt(V,U)},ue=A.concat("iframe").join(","),It=function(U,V){if(V=V||{},!U)throw new Error("No node provided");return X.call(U,ue)===!1?!1:et(V,U)};E.focusable=Me,E.isFocusable=It,E.isTabbable=Te,E.tabbable=Re}}),k=d({"node_modules/focus-trap/dist/focus-trap.js"(E){Object.defineProperty(E,"__esModule",{value:!0});var A=N();function W(ke,we){var Pe=Object.keys(ke);if(Object.getOwnPropertySymbols){var Ie=Object.getOwnPropertySymbols(ke);we&&(Ie=Ie.filter(function(be){return Object.getOwnPropertyDescriptor(ke,be).enumerable})),Pe.push.apply(Pe,Ie)}return Pe}function z(ke){for(var we=1;we<arguments.length;we++){var Pe=arguments[we]!=null?arguments[we]:{};we%2?W(Object(Pe),!0).forEach(function(Ie){X(ke,Ie,Pe[Ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ke,Object.getOwnPropertyDescriptors(Pe)):W(Object(Pe)).forEach(function(Ie){Object.defineProperty(ke,Ie,Object.getOwnPropertyDescriptor(Pe,Ie))})}return ke}function X(ke,we,Pe){return we in ke?Object.defineProperty(ke,we,{value:Pe,enumerable:!0,configurable:!0,writable:!0}):ke[we]=Pe,ke}var J=function(){var ke=[];return{activateTrap:function(Pe){if(ke.length>0){var Ie=ke[ke.length-1];Ie!==Pe&&Ie.pause()}var be=ke.indexOf(Pe);be===-1||ke.splice(be,1),ke.push(Pe)},deactivateTrap:function(Pe){var Ie=ke.indexOf(Pe);Ie!==-1&&ke.splice(Ie,1),ke.length>0&&ke[ke.length-1].unpause()}}}(),Se=function(we){return we.tagName&&we.tagName.toLowerCase()==="input"&&typeof we.select=="function"},Xe=function(we){return we.key==="Escape"||we.key==="Esc"||we.keyCode===27},nt=function(we){return we.key==="Tab"||we.keyCode===9},kt=function(we){return setTimeout(we,0)},_t=function(we,Pe){var Ie=-1;return we.every(function(be,te){return Pe(be)?(Ie=te,!1):!0}),Ie},vt=function(we){for(var Pe=arguments.length,Ie=new Array(Pe>1?Pe-1:0),be=1;be<Pe;be++)Ie[be-1]=arguments[be];return typeof we=="function"?we.apply(void 0,Ie):we},Ft=function(we){return we.target.shadowRoot&&typeof we.composedPath=="function"?we.composedPath()[0]:we.target},Pt=function(we,Pe){var Ie=(Pe==null?void 0:Pe.document)||document,be=z({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},Pe),te={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},et,bt=function(K,Q,ge){return K&&K[Q]!==void 0?K[Q]:be[ge||Q]},Z=function(K){return te.containerGroups.findIndex(function(Q){var ge=Q.container,ze=Q.tabbableNodes;return ge.contains(K)||ze.find(function(He){return He===K})})},le=function(K){var Q=be[K];if(typeof Q=="function"){for(var ge=arguments.length,ze=new Array(ge>1?ge-1:0),He=1;He<ge;He++)ze[He-1]=arguments[He];Q=Q.apply(void 0,ze)}if(Q===!0&&(Q=void 0),!Q){if(Q===void 0||Q===!1)return Q;throw new Error("`".concat(K,"` was specified but was not a node, or did not return a node"))}var We=Q;if(typeof Q=="string"&&(We=Ie.querySelector(Q),!We))throw new Error("`".concat(K,"` as selector refers to no known node"));return We},Re=function(){var K=le("initialFocus");if(K===!1)return!1;if(K===void 0)if(Z(Ie.activeElement)>=0)K=Ie.activeElement;else{var Q=te.tabbableGroups[0],ge=Q&&Q.firstTabbableNode;K=ge||le("fallbackFocus")}if(!K)throw new Error("Your focus-trap needs to have at least one focusable element");return K},Me=function(){if(te.containerGroups=te.containers.map(function(K){var Q=A.tabbable(K,be.tabbableOptions),ge=A.focusable(K,be.tabbableOptions);return{container:K,tabbableNodes:Q,focusableNodes:ge,firstTabbableNode:Q.length>0?Q[0]:null,lastTabbableNode:Q.length>0?Q[Q.length-1]:null,nextTabbableNode:function(He){var We=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,pt=ge.findIndex(function(Gt){return Gt===He});if(!(pt<0))return We?ge.slice(pt+1).find(function(Gt){return A.isTabbable(Gt,be.tabbableOptions)}):ge.slice(0,pt).reverse().find(function(Gt){return A.isTabbable(Gt,be.tabbableOptions)})}}}),te.tabbableGroups=te.containerGroups.filter(function(K){return K.tabbableNodes.length>0}),te.tabbableGroups.length<=0&&!le("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},Te=function pe(K){if(K!==!1&&K!==Ie.activeElement){if(!K||!K.focus){pe(Re());return}K.focus({preventScroll:!!be.preventScroll}),te.mostRecentlyFocusedNode=K,Se(K)&&K.select()}},ue=function(K){var Q=le("setReturnFocus",K);return Q||(Q===!1?!1:K)},It=function(K){var Q=Ft(K);if(!(Z(Q)>=0)){if(vt(be.clickOutsideDeactivates,K)){et.deactivate({returnFocus:be.returnFocusOnDeactivate&&!A.isFocusable(Q,be.tabbableOptions)});return}vt(be.allowOutsideClick,K)||K.preventDefault()}},ne=function(K){var Q=Ft(K),ge=Z(Q)>=0;ge||Q instanceof Document?ge&&(te.mostRecentlyFocusedNode=Q):(K.stopImmediatePropagation(),Te(te.mostRecentlyFocusedNode||Re()))},U=function(K){var Q=Ft(K);Me();var ge=null;if(te.tabbableGroups.length>0){var ze=Z(Q),He=ze>=0?te.containerGroups[ze]:void 0;if(ze<0)K.shiftKey?ge=te.tabbableGroups[te.tabbableGroups.length-1].lastTabbableNode:ge=te.tabbableGroups[0].firstTabbableNode;else if(K.shiftKey){var We=_t(te.tabbableGroups,function(mi){var Di=mi.firstTabbableNode;return Q===Di});if(We<0&&(He.container===Q||A.isFocusable(Q,be.tabbableOptions)&&!A.isTabbable(Q,be.tabbableOptions)&&!He.nextTabbableNode(Q,!1))&&(We=ze),We>=0){var pt=We===0?te.tabbableGroups.length-1:We-1,Gt=te.tabbableGroups[pt];ge=Gt.lastTabbableNode}}else{var ei=_t(te.tabbableGroups,function(mi){var Di=mi.lastTabbableNode;return Q===Di});if(ei<0&&(He.container===Q||A.isFocusable(Q,be.tabbableOptions)&&!A.isTabbable(Q,be.tabbableOptions)&&!He.nextTabbableNode(Q))&&(ei=ze),ei>=0){var Oi=ei===te.tabbableGroups.length-1?0:ei+1,Ut=te.tabbableGroups[Oi];ge=Ut.firstTabbableNode}}}else ge=le("fallbackFocus");ge&&(K.preventDefault(),Te(ge))},V=function(K){if(Xe(K)&&vt(be.escapeDeactivates,K)!==!1){K.preventDefault(),et.deactivate();return}if(nt(K)){U(K);return}},me=function(K){var Q=Ft(K);Z(Q)>=0||vt(be.clickOutsideDeactivates,K)||vt(be.allowOutsideClick,K)||(K.preventDefault(),K.stopImmediatePropagation())},Ce=function(){if(te.active)return J.activateTrap(et),te.delayInitialFocusTimer=be.delayInitialFocus?kt(function(){Te(Re())}):Te(Re()),Ie.addEventListener("focusin",ne,!0),Ie.addEventListener("mousedown",It,{capture:!0,passive:!1}),Ie.addEventListener("touchstart",It,{capture:!0,passive:!1}),Ie.addEventListener("click",me,{capture:!0,passive:!1}),Ie.addEventListener("keydown",V,{capture:!0,passive:!1}),et},he=function(){if(te.active)return Ie.removeEventListener("focusin",ne,!0),Ie.removeEventListener("mousedown",It,!0),Ie.removeEventListener("touchstart",It,!0),Ie.removeEventListener("click",me,!0),Ie.removeEventListener("keydown",V,!0),et};return et={get active(){return te.active},get paused(){return te.paused},activate:function(K){if(te.active)return this;var Q=bt(K,"onActivate"),ge=bt(K,"onPostActivate"),ze=bt(K,"checkCanFocusTrap");ze||Me(),te.active=!0,te.paused=!1,te.nodeFocusedBeforeActivation=Ie.activeElement,Q&&Q();var He=function(){ze&&Me(),Ce(),ge&&ge()};return ze?(ze(te.containers.concat()).then(He,He),this):(He(),this)},deactivate:function(K){if(!te.active)return this;var Q=z({onDeactivate:be.onDeactivate,onPostDeactivate:be.onPostDeactivate,checkCanReturnFocus:be.checkCanReturnFocus},K);clearTimeout(te.delayInitialFocusTimer),te.delayInitialFocusTimer=void 0,he(),te.active=!1,te.paused=!1,J.deactivateTrap(et);var ge=bt(Q,"onDeactivate"),ze=bt(Q,"onPostDeactivate"),He=bt(Q,"checkCanReturnFocus"),We=bt(Q,"returnFocus","returnFocusOnDeactivate");ge&&ge();var pt=function(){kt(function(){We&&Te(ue(te.nodeFocusedBeforeActivation)),ze&&ze()})};return We&&He?(He(ue(te.nodeFocusedBeforeActivation)).then(pt,pt),this):(pt(),this)},pause:function(){return te.paused||!te.active?this:(te.paused=!0,he(),this)},unpause:function(){return!te.paused||!te.active?this:(te.paused=!1,Me(),Ce(),this)},updateContainerElements:function(K){var Q=[].concat(K).filter(Boolean);return te.containers=Q.map(function(ge){return typeof ge=="string"?Ie.querySelector(ge):ge}),te.active&&Me(),this}},et.updateContainerElements(we),et};E.createFocusTrap=Pt}}),b={};f(b,{default:()=>$,focus:()=>I}),t.exports=w(b);var P=v(k()),C=v(N());function I(E){let A,W;window.addEventListener("focusin",()=>{A=W,W=document.activeElement}),E.magic("focus",z=>{let X=z;return{__noscroll:!1,__wrapAround:!1,within(J){return X=J,this},withoutScrolling(){return this.__noscroll=!0,this},noscroll(){return this.__noscroll=!0,this},withWrapAround(){return this.__wrapAround=!0,this},wrap(){return this.withWrapAround()},focusable(J){return(0,C.isFocusable)(J)},previouslyFocused(){return A},lastFocused(){return A},focused(){return W},focusables(){return Array.isArray(X)?X:(0,C.focusable)(X,{displayCheck:"none"})},all(){return this.focusables()},isFirst(J){let Se=this.all();return Se[0]&&Se[0].isSameNode(J)},isLast(J){let Se=this.all();return Se.length&&Se.slice(-1)[0].isSameNode(J)},getFirst(){return this.all()[0]},getLast(){return this.all().slice(-1)[0]},getNext(){let J=this.all(),Se=document.activeElement;if(J.indexOf(Se)!==-1)return this.__wrapAround&&J.indexOf(Se)===J.length-1?J[0]:J[J.indexOf(Se)+1]},getPrevious(){let J=this.all(),Se=document.activeElement;if(J.indexOf(Se)!==-1)return this.__wrapAround&&J.indexOf(Se)===0?J.slice(-1)[0]:J[J.indexOf(Se)-1]},first(){this.focus(this.getFirst())},last(){this.focus(this.getLast())},next(){this.focus(this.getNext())},previous(){this.focus(this.getPrevious())},prev(){return this.previous()},focus(J){J&&setTimeout(()=>{J.hasAttribute("tabindex")||J.setAttribute("tabindex","0"),J.focus({preventScroll:this.__noscroll})})}}}),E.directive("trap",E.skipDuringClone((z,{expression:X,modifiers:J},{effect:Se,evaluateLater:Xe,cleanup:nt})=>{let kt=Xe(X),_t=!1,vt={escapeDeactivates:!1,allowOutsideClick:!0,fallbackFocus:()=>z};if(J.includes("noautofocus"))vt.initialFocus=!1;else{let Pe=z.querySelector("[autofocus]");Pe&&(vt.initialFocus=Pe)}let Ft=(0,P.createFocusTrap)(z,vt),Pt=()=>{},ke=()=>{};const we=()=>{Pt(),Pt=()=>{},ke(),ke=()=>{},Ft.deactivate({returnFocus:!J.includes("noreturn")})};Se(()=>kt(Pe=>{_t!==Pe&&(Pe&&!_t&&(J.includes("noscroll")&&(ke=O()),J.includes("inert")&&(Pt=j(z)),setTimeout(()=>{Ft.activate()},15)),!Pe&&_t&&we(),_t=!!Pe)})),nt(we)},(z,{expression:X,modifiers:J},{evaluate:Se})=>{J.includes("inert")&&Se(X)&&j(z)}))}function j(E){let A=[];return T(E,W=>{let z=W.hasAttribute("aria-hidden");W.setAttribute("aria-hidden","true"),A.push(()=>z||W.removeAttribute("aria-hidden"))}),()=>{for(;A.length;)A.pop()()}}function T(E,A){E.isSameNode(document.body)||!E.parentNode||Array.from(E.parentNode.children).forEach(W=>{W.isSameNode(E)?T(E.parentNode,A):A(W)})}function O(){let E=document.documentElement.style.overflow,A=document.documentElement.style.paddingRight,W=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${W}px`,()=>{document.documentElement.style.overflow=E,document.documentElement.style.paddingRight=A}}var $=I}}),tu=pi({"../alpine/packages/persist/dist/module.cjs.js"(e,t){var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(b,P)=>{for(var C in P)i(b,C,{get:P[C],enumerable:!0})},l=(b,P,C,I)=>{if(P&&typeof P=="object"||typeof P=="function")for(let j of o(P))!s.call(b,j)&&j!==C&&i(b,j,{get:()=>P[j],enumerable:!(I=n(P,j))||I.enumerable});return b},d=b=>l(i({},"__esModule",{value:!0}),b),f={};a(f,{default:()=>k,persist:()=>g}),t.exports=d(f);function g(b){let P=()=>{let C,I;try{I=localStorage}catch(j){console.error(j),console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let T=new Map;I={getItem:T.get.bind(T),setItem:T.set.bind(T)}}return b.interceptor((j,T,O,$,E)=>{let A=C||`_x_${$}`,W=v(A,I)?w(A,I):j;return O(W),b.effect(()=>{let z=T();N(A,z,I),O(z)}),W},j=>{j.as=T=>(C=T,j),j.using=T=>(I=T,j)})};Object.defineProperty(b,"$persist",{get:()=>P()}),b.magic("persist",P),b.persist=(C,{get:I,set:j},T=localStorage)=>{let O=v(C,T)?w(C,T):I();j(O),b.effect(()=>{let $=I();N(C,$,T),j($)})}}function v(b,P){return P.getItem(b)!==null}function w(b,P){let C=P.getItem(b,P);if(C!==void 0)return JSON.parse(C)}function N(b,P,C){C.setItem(b,JSON.stringify(P))}var k=g}}),iu=pi({"../alpine/packages/intersect/dist/module.cjs.js"(e,t){var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(b,P)=>{for(var C in P)i(b,C,{get:P[C],enumerable:!0})},l=(b,P,C,I)=>{if(P&&typeof P=="object"||typeof P=="function")for(let j of o(P))!s.call(b,j)&&j!==C&&i(b,j,{get:()=>P[j],enumerable:!(I=n(P,j))||I.enumerable});return b},d=b=>l(i({},"__esModule",{value:!0}),b),f={};a(f,{default:()=>k,intersect:()=>g}),t.exports=d(f);function g(b){b.directive("intersect",b.skipDuringClone((P,{value:C,expression:I,modifiers:j},{evaluateLater:T,cleanup:O})=>{let $=T(I),E={rootMargin:N(j),threshold:v(j)},A=new IntersectionObserver(W=>{W.forEach(z=>{z.isIntersecting!==(C==="leave")&&($(),j.includes("once")&&A.disconnect())})},E);A.observe(P),O(()=>{A.disconnect()})}))}function v(b){if(b.includes("full"))return .99;if(b.includes("half"))return .5;if(!b.includes("threshold"))return 0;let P=b[b.indexOf("threshold")+1];return P==="100"?1:P==="0"?0:+`.${P}`}function w(b){let P=b.match(/^(-?[0-9]+)(px|%)?$/);return P?P[1]+(P[2]||"px"):void 0}function N(b){const P="margin",C="0px 0px 0px 0px",I=b.indexOf(P);if(I===-1)return C;let j=[];for(let T=1;T<5;T++)j.push(w(b[I+T]||""));return j=j.filter(T=>T!==void 0),j.length?j.join(" ").trim():C}var k=g}}),nu=pi({"node_modules/@alpinejs/resize/dist/module.cjs.js"(e,t){var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(C,I)=>{for(var j in I)i(C,j,{get:I[j],enumerable:!0})},l=(C,I,j,T)=>{if(I&&typeof I=="object"||typeof I=="function")for(let O of o(I))!s.call(C,O)&&O!==j&&i(C,O,{get:()=>I[O],enumerable:!(T=n(I,O))||T.enumerable});return C},d=C=>l(i({},"__esModule",{value:!0}),C),f={};a(f,{default:()=>P,resize:()=>g}),t.exports=d(f);function g(C){C.directive("resize",C.skipDuringClone((I,{value:j,expression:T,modifiers:O},{evaluateLater:$,cleanup:E})=>{let A=$(T),W=(X,J)=>{A(()=>{},{scope:{$width:X,$height:J}})},z=O.includes("document")?k(W):v(I,W);E(()=>z())}))}function v(C,I){let j=new ResizeObserver(T=>{let[O,$]=b(T);I(O,$)});return j.observe(C),()=>j.disconnect()}var w,N=new Set;function k(C){return N.add(C),w||(w=new ResizeObserver(I=>{let[j,T]=b(I);N.forEach(O=>O(j,T))}),w.observe(document.documentElement)),()=>{N.delete(C)}}function b(C){let I,j;for(let T of C)I=T.borderBoxSize[0].inlineSize,j=T.borderBoxSize[0].blockSize;return[I,j]}var P=g}}),ru=pi({"../alpine/packages/anchor/dist/module.cjs.js"(e,t){var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(m,S)=>{for(var D in S)i(m,D,{get:S[D],enumerable:!0})},l=(m,S,D,M)=>{if(S&&typeof S=="object"||typeof S=="function")for(let B of o(S))!s.call(m,B)&&B!==D&&i(m,B,{get:()=>S[B],enumerable:!(M=n(S,B))||M.enumerable});return m},d=m=>l(i({},"__esModule",{value:!0}),m),f={};a(f,{anchor:()=>Gi,default:()=>Ki}),t.exports=d(f);var g=Math.min,v=Math.max,w=Math.round,N=Math.floor,k=m=>({x:m,y:m}),b={left:"right",right:"left",bottom:"top",top:"bottom"},P={start:"end",end:"start"};function C(m,S,D){return v(m,g(S,D))}function I(m,S){return typeof m=="function"?m(S):m}function j(m){return m.split("-")[0]}function T(m){return m.split("-")[1]}function O(m){return m==="x"?"y":"x"}function $(m){return m==="y"?"height":"width"}function E(m){return["top","bottom"].includes(j(m))?"y":"x"}function A(m){return O(E(m))}function W(m,S,D){D===void 0&&(D=!1);const M=T(m),B=A(m),G=$(B);let Y=B==="x"?M===(D?"end":"start")?"right":"left":M==="start"?"bottom":"top";return S.reference[G]>S.floating[G]&&(Y=Xe(Y)),[Y,Xe(Y)]}function z(m){const S=Xe(m);return[X(m),S,X(S)]}function X(m){return m.replace(/start|end/g,S=>P[S])}function J(m,S,D){const M=["left","right"],B=["right","left"],G=["top","bottom"],Y=["bottom","top"];switch(m){case"top":case"bottom":return D?S?B:M:S?M:B;case"left":case"right":return S?G:Y;default:return[]}}function Se(m,S,D,M){const B=T(m);let G=J(j(m),D==="start",M);return B&&(G=G.map(Y=>Y+"-"+B),S&&(G=G.concat(G.map(X)))),G}function Xe(m){return m.replace(/left|right|bottom|top/g,S=>b[S])}function nt(m){return{top:0,right:0,bottom:0,left:0,...m}}function kt(m){return typeof m!="number"?nt(m):{top:m,right:m,bottom:m,left:m}}function _t(m){return{...m,top:m.y,left:m.x,right:m.x+m.width,bottom:m.y+m.height}}function vt(m,S,D){let{reference:M,floating:B}=m;const G=E(S),Y=A(S),re=$(Y),fe=j(S),_e=G==="y",Ne=M.x+M.width/2-B.width/2,Oe=M.y+M.height/2-B.height/2,qe=M[re]/2-B[re]/2;let Ae;switch(fe){case"top":Ae={x:Ne,y:M.y-B.height};break;case"bottom":Ae={x:Ne,y:M.y+M.height};break;case"right":Ae={x:M.x+M.width,y:Oe};break;case"left":Ae={x:M.x-B.width,y:Oe};break;default:Ae={x:M.x,y:M.y}}switch(T(S)){case"start":Ae[Y]-=qe*(D&&_e?-1:1);break;case"end":Ae[Y]+=qe*(D&&_e?-1:1);break}return Ae}var Ft=async(m,S,D)=>{const{placement:M="bottom",strategy:B="absolute",middleware:G=[],platform:Y}=D,re=G.filter(Boolean),fe=await(Y.isRTL==null?void 0:Y.isRTL(S));let _e=await Y.getElementRects({reference:m,floating:S,strategy:B}),{x:Ne,y:Oe}=vt(_e,M,fe),qe=M,Ae={},De=0;for(let Ue=0;Ue<re.length;Ue++){const{name:ct,fn:Ve}=re[Ue],{x:lt,y:st,data:qt,reset:mt}=await Ve({x:Ne,y:Oe,initialPlacement:M,placement:qe,strategy:B,middlewareData:Ae,rects:_e,platform:Y,elements:{reference:m,floating:S}});if(Ne=lt??Ne,Oe=st??Oe,Ae={...Ae,[ct]:{...Ae[ct],...qt}},mt&&De<=50){De++,typeof mt=="object"&&(mt.placement&&(qe=mt.placement),mt.rects&&(_e=mt.rects===!0?await Y.getElementRects({reference:m,floating:S,strategy:B}):mt.rects),{x:Ne,y:Oe}=vt(_e,qe,fe)),Ue=-1;continue}}return{x:Ne,y:Oe,placement:qe,strategy:B,middlewareData:Ae}};async function Pt(m,S){var D;S===void 0&&(S={});const{x:M,y:B,platform:G,rects:Y,elements:re,strategy:fe}=m,{boundary:_e="clippingAncestors",rootBoundary:Ne="viewport",elementContext:Oe="floating",altBoundary:qe=!1,padding:Ae=0}=I(S,m),De=kt(Ae),ct=re[qe?Oe==="floating"?"reference":"floating":Oe],Ve=_t(await G.getClippingRect({element:(D=await(G.isElement==null?void 0:G.isElement(ct)))==null||D?ct:ct.contextElement||await(G.getDocumentElement==null?void 0:G.getDocumentElement(re.floating)),boundary:_e,rootBoundary:Ne,strategy:fe})),lt=Oe==="floating"?{...Y.floating,x:M,y:B}:Y.reference,st=await(G.getOffsetParent==null?void 0:G.getOffsetParent(re.floating)),qt=await(G.isElement==null?void 0:G.isElement(st))?await(G.getScale==null?void 0:G.getScale(st))||{x:1,y:1}:{x:1,y:1},mt=_t(G.convertOffsetParentRelativeRectToViewportRelativeRect?await G.convertOffsetParentRelativeRectToViewportRelativeRect({rect:lt,offsetParent:st,strategy:fe}):lt);return{top:(Ve.top-mt.top+De.top)/qt.y,bottom:(mt.bottom-Ve.bottom+De.bottom)/qt.y,left:(Ve.left-mt.left+De.left)/qt.x,right:(mt.right-Ve.right+De.right)/qt.x}}var ke=function(m){return m===void 0&&(m={}),{name:"flip",options:m,async fn(S){var D,M;const{placement:B,middlewareData:G,rects:Y,initialPlacement:re,platform:fe,elements:_e}=S,{mainAxis:Ne=!0,crossAxis:Oe=!0,fallbackPlacements:qe,fallbackStrategy:Ae="bestFit",fallbackAxisSideDirection:De="none",flipAlignment:Ue=!0,...ct}=I(m,S);if((D=G.arrow)!=null&&D.alignmentOffset)return{};const Ve=j(B),lt=j(re)===re,st=await(fe.isRTL==null?void 0:fe.isRTL(_e.floating)),qt=qe||(lt||!Ue?[Xe(re)]:z(re));!qe&&De!=="none"&&qt.push(...Se(re,Ue,De,st));const mt=[re,...qt],Bt=await Pt(S,ct),Ot=[];let ki=((M=G.flip)==null?void 0:M.overflows)||[];if(Ne&&Ot.push(Bt[Ve]),Oe){const ci=W(B,Y,st);Ot.push(Bt[ci[0]],Bt[ci[1]])}if(ki=[...ki,{placement:B,overflows:Ot}],!Ot.every(ci=>ci<=0)){var tr,Xi;const ci=(((tr=G.flip)==null?void 0:tr.index)||0)+1,Pn=mt[ci];if(Pn)return{data:{index:ci,overflows:ki},reset:{placement:Pn}};let Pi=(Xi=ki.filter(vi=>vi.overflows[0]<=0).sort((vi,ti)=>vi.overflows[1]-ti.overflows[1])[0])==null?void 0:Xi.placement;if(!Pi)switch(Ae){case"bestFit":{var kn;const vi=(kn=ki.map(ti=>[ti.placement,ti.overflows.filter(Kt=>Kt>0).reduce((Kt,Wr)=>Kt+Wr,0)]).sort((ti,Kt)=>ti[1]-Kt[1])[0])==null?void 0:kn[0];vi&&(Pi=vi);break}case"initialPlacement":Pi=re;break}if(B!==Pi)return{reset:{placement:Pi}}}return{}}}};async function we(m,S){const{placement:D,platform:M,elements:B}=m,G=await(M.isRTL==null?void 0:M.isRTL(B.floating)),Y=j(D),re=T(D),fe=E(D)==="y",_e=["left","top"].includes(Y)?-1:1,Ne=G&&fe?-1:1,Oe=I(S,m);let{mainAxis:qe,crossAxis:Ae,alignmentAxis:De}=typeof Oe=="number"?{mainAxis:Oe,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...Oe};return re&&typeof De=="number"&&(Ae=re==="end"?De*-1:De),fe?{x:Ae*Ne,y:qe*_e}:{x:qe*_e,y:Ae*Ne}}var Pe=function(m){return m===void 0&&(m=0),{name:"offset",options:m,async fn(S){const{x:D,y:M}=S,B=await we(S,m);return{x:D+B.x,y:M+B.y,data:B}}}},Ie=function(m){return m===void 0&&(m={}),{name:"shift",options:m,async fn(S){const{x:D,y:M,placement:B}=S,{mainAxis:G=!0,crossAxis:Y=!1,limiter:re={fn:ct=>{let{x:Ve,y:lt}=ct;return{x:Ve,y:lt}}},...fe}=I(m,S),_e={x:D,y:M},Ne=await Pt(S,fe),Oe=E(j(B)),qe=O(Oe);let Ae=_e[qe],De=_e[Oe];if(G){const ct=qe==="y"?"top":"left",Ve=qe==="y"?"bottom":"right",lt=Ae+Ne[ct],st=Ae-Ne[Ve];Ae=C(lt,Ae,st)}if(Y){const ct=Oe==="y"?"top":"left",Ve=Oe==="y"?"bottom":"right",lt=De+Ne[ct],st=De-Ne[Ve];De=C(lt,De,st)}const Ue=re.fn({...S,[qe]:Ae,[Oe]:De});return{...Ue,data:{x:Ue.x-D,y:Ue.y-M}}}}};function be(m){return bt(m)?(m.nodeName||"").toLowerCase():"#document"}function te(m){var S;return(m==null||(S=m.ownerDocument)==null?void 0:S.defaultView)||window}function et(m){var S;return(S=(bt(m)?m.ownerDocument:m.document)||window.document)==null?void 0:S.documentElement}function bt(m){return m instanceof Node||m instanceof te(m).Node}function Z(m){return m instanceof Element||m instanceof te(m).Element}function le(m){return m instanceof HTMLElement||m instanceof te(m).HTMLElement}function Re(m){return typeof ShadowRoot>"u"?!1:m instanceof ShadowRoot||m instanceof te(m).ShadowRoot}function Me(m){const{overflow:S,overflowX:D,overflowY:M,display:B}=V(m);return/auto|scroll|overlay|hidden|clip/.test(S+M+D)&&!["inline","contents"].includes(B)}function Te(m){return["table","td","th"].includes(be(m))}function ue(m){const S=ne(),D=V(m);return D.transform!=="none"||D.perspective!=="none"||(D.containerType?D.containerType!=="normal":!1)||!S&&(D.backdropFilter?D.backdropFilter!=="none":!1)||!S&&(D.filter?D.filter!=="none":!1)||["transform","perspective","filter"].some(M=>(D.willChange||"").includes(M))||["paint","layout","strict","content"].some(M=>(D.contain||"").includes(M))}function It(m){let S=Ce(m);for(;le(S)&&!U(S);){if(ue(S))return S;S=Ce(S)}return null}function ne(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function U(m){return["html","body","#document"].includes(be(m))}function V(m){return te(m).getComputedStyle(m)}function me(m){return Z(m)?{scrollLeft:m.scrollLeft,scrollTop:m.scrollTop}:{scrollLeft:m.pageXOffset,scrollTop:m.pageYOffset}}function Ce(m){if(be(m)==="html")return m;const S=m.assignedSlot||m.parentNode||Re(m)&&m.host||et(m);return Re(S)?S.host:S}function he(m){const S=Ce(m);return U(S)?m.ownerDocument?m.ownerDocument.body:m.body:le(S)&&Me(S)?S:he(S)}function pe(m,S,D){var M;S===void 0&&(S=[]),D===void 0&&(D=!0);const B=he(m),G=B===((M=m.ownerDocument)==null?void 0:M.body),Y=te(B);return G?S.concat(Y,Y.visualViewport||[],Me(B)?B:[],Y.frameElement&&D?pe(Y.frameElement):[]):S.concat(B,pe(B,[],D))}function K(m){const S=V(m);let D=parseFloat(S.width)||0,M=parseFloat(S.height)||0;const B=le(m),G=B?m.offsetWidth:D,Y=B?m.offsetHeight:M,re=w(D)!==G||w(M)!==Y;return re&&(D=G,M=Y),{width:D,height:M,$:re}}function Q(m){return Z(m)?m:m.contextElement}function ge(m){const S=Q(m);if(!le(S))return k(1);const D=S.getBoundingClientRect(),{width:M,height:B,$:G}=K(S);let Y=(G?w(D.width):D.width)/M,re=(G?w(D.height):D.height)/B;return(!Y||!Number.isFinite(Y))&&(Y=1),(!re||!Number.isFinite(re))&&(re=1),{x:Y,y:re}}var ze=k(0);function He(m){const S=te(m);return!ne()||!S.visualViewport?ze:{x:S.visualViewport.offsetLeft,y:S.visualViewport.offsetTop}}function We(m,S,D){return S===void 0&&(S=!1),!D||S&&D!==te(m)?!1:S}function pt(m,S,D,M){S===void 0&&(S=!1),D===void 0&&(D=!1);const B=m.getBoundingClientRect(),G=Q(m);let Y=k(1);S&&(M?Z(M)&&(Y=ge(M)):Y=ge(m));const re=We(G,D,M)?He(G):k(0);let fe=(B.left+re.x)/Y.x,_e=(B.top+re.y)/Y.y,Ne=B.width/Y.x,Oe=B.height/Y.y;if(G){const qe=te(G),Ae=M&&Z(M)?te(M):M;let De=qe.frameElement;for(;De&&M&&Ae!==qe;){const Ue=ge(De),ct=De.getBoundingClientRect(),Ve=V(De),lt=ct.left+(De.clientLeft+parseFloat(Ve.paddingLeft))*Ue.x,st=ct.top+(De.clientTop+parseFloat(Ve.paddingTop))*Ue.y;fe*=Ue.x,_e*=Ue.y,Ne*=Ue.x,Oe*=Ue.y,fe+=lt,_e+=st,De=te(De).frameElement}}return _t({width:Ne,height:Oe,x:fe,y:_e})}function Gt(m){let{rect:S,offsetParent:D,strategy:M}=m;const B=le(D),G=et(D);if(D===G)return S;let Y={scrollLeft:0,scrollTop:0},re=k(1);const fe=k(0);if((B||!B&&M!=="fixed")&&((be(D)!=="body"||Me(G))&&(Y=me(D)),le(D))){const _e=pt(D);re=ge(D),fe.x=_e.x+D.clientLeft,fe.y=_e.y+D.clientTop}return{width:S.width*re.x,height:S.height*re.y,x:S.x*re.x-Y.scrollLeft*re.x+fe.x,y:S.y*re.y-Y.scrollTop*re.y+fe.y}}function ei(m){return Array.from(m.getClientRects())}function Oi(m){return pt(et(m)).left+me(m).scrollLeft}function Ut(m){const S=et(m),D=me(m),M=m.ownerDocument.body,B=v(S.scrollWidth,S.clientWidth,M.scrollWidth,M.clientWidth),G=v(S.scrollHeight,S.clientHeight,M.scrollHeight,M.clientHeight);let Y=-D.scrollLeft+Oi(m);const re=-D.scrollTop;return V(M).direction==="rtl"&&(Y+=v(S.clientWidth,M.clientWidth)-B),{width:B,height:G,x:Y,y:re}}function mi(m,S){const D=te(m),M=et(m),B=D.visualViewport;let G=M.clientWidth,Y=M.clientHeight,re=0,fe=0;if(B){G=B.width,Y=B.height;const _e=ne();(!_e||_e&&S==="fixed")&&(re=B.offsetLeft,fe=B.offsetTop)}return{width:G,height:Y,x:re,y:fe}}function Di(m,S){const D=pt(m,!0,S==="fixed"),M=D.top+m.clientTop,B=D.left+m.clientLeft,G=le(m)?ge(m):k(1),Y=m.clientWidth*G.x,re=m.clientHeight*G.y,fe=B*G.x,_e=M*G.y;return{width:Y,height:re,x:fe,y:_e}}function Xn(m,S,D){let M;if(S==="viewport")M=mi(m,D);else if(S==="document")M=Ut(et(m));else if(Z(S))M=Di(S,D);else{const B=He(m);M={...S,x:S.x-B.x,y:S.y-B.y}}return _t(M)}function Ai(m,S){const D=Ce(m);return D===S||!Z(D)||U(D)?!1:V(D).position==="fixed"||Ai(D,S)}function zi(m,S){const D=S.get(m);if(D)return D;let M=pe(m,[],!1).filter(re=>Z(re)&&be(re)!=="body"),B=null;const G=V(m).position==="fixed";let Y=G?Ce(m):m;for(;Z(Y)&&!U(Y);){const re=V(Y),fe=ue(Y);!fe&&re.position==="fixed"&&(B=null),(G?!fe&&!B:!fe&&re.position==="static"&&!!B&&["absolute","fixed"].includes(B.position)||Me(Y)&&!fe&&Ai(m,Y))?M=M.filter(Ne=>Ne!==Y):B=re,Y=Ce(Y)}return S.set(m,M),M}function Yn(m){let{element:S,boundary:D,rootBoundary:M,strategy:B}=m;const Y=[...D==="clippingAncestors"?zi(S,this._c):[].concat(D),M],re=Y[0],fe=Y.reduce((_e,Ne)=>{const Oe=Xn(S,Ne,B);return _e.top=v(Oe.top,_e.top),_e.right=g(Oe.right,_e.right),_e.bottom=g(Oe.bottom,_e.bottom),_e.left=v(Oe.left,_e.left),_e},Xn(S,re,B));return{width:fe.right-fe.left,height:fe.bottom-fe.top,x:fe.left,y:fe.top}}function gi(m){return K(m)}function Rt(m,S,D){const M=le(S),B=et(S),G=D==="fixed",Y=pt(m,!0,G,S);let re={scrollLeft:0,scrollTop:0};const fe=k(0);if(M||!M&&!G)if((be(S)!=="body"||Me(B))&&(re=me(S)),M){const _e=pt(S,!0,G,S);fe.x=_e.x+S.clientLeft,fe.y=_e.y+S.clientTop}else B&&(fe.x=Oi(B));return{x:Y.left+re.scrollLeft-fe.x,y:Y.top+re.scrollTop-fe.y,width:Y.width,height:Y.height}}function Tn(m,S){return!le(m)||V(m).position==="fixed"?null:S?S(m):m.offsetParent}function Qn(m,S){const D=te(m);if(!le(m))return D;let M=Tn(m,S);for(;M&&Te(M)&&V(M).position==="static";)M=Tn(M,S);return M&&(be(M)==="html"||be(M)==="body"&&V(M).position==="static"&&!ue(M))?D:M||It(m)||D}var Zn=async function(m){let{reference:S,floating:D,strategy:M}=m;const B=this.getOffsetParent||Qn,G=this.getDimensions;return{reference:Rt(S,await B(D),M),floating:{x:0,y:0,...await G(D)}}};function Ur(m){return V(m).direction==="rtl"}var An={convertOffsetParentRelativeRectToViewportRelativeRect:Gt,getDocumentElement:et,getClippingRect:Yn,getOffsetParent:Qn,getElementRects:Zn,getClientRects:ei,getDimensions:gi,getScale:ge,isElement:Z,isRTL:Ur};function Br(m,S){let D=null,M;const B=et(m);function G(){clearTimeout(M),D&&D.disconnect(),D=null}function Y(re,fe){re===void 0&&(re=!1),fe===void 0&&(fe=1),G();const{left:_e,top:Ne,width:Oe,height:qe}=m.getBoundingClientRect();if(re||S(),!Oe||!qe)return;const Ae=N(Ne),De=N(B.clientWidth-(_e+Oe)),Ue=N(B.clientHeight-(Ne+qe)),ct=N(_e),lt={rootMargin:-Ae+"px "+-De+"px "+-Ue+"px "+-ct+"px",threshold:v(0,g(1,fe))||1};let st=!0;function qt(mt){const Bt=mt[0].intersectionRatio;if(Bt!==fe){if(!st)return Y();Bt?Y(!1,Bt):M=setTimeout(()=>{Y(!1,1e-7)},100)}st=!1}try{D=new IntersectionObserver(qt,{...lt,root:B.ownerDocument})}catch{D=new IntersectionObserver(qt,lt)}D.observe(m)}return Y(!0),G}function Hr(m,S,D,M){M===void 0&&(M={});const{ancestorScroll:B=!0,ancestorResize:G=!0,elementResize:Y=typeof ResizeObserver=="function",layoutShift:re=typeof IntersectionObserver=="function",animationFrame:fe=!1}=M,_e=Q(m),Ne=B||G?[..._e?pe(_e):[],...pe(S)]:[];Ne.forEach(Ve=>{B&&Ve.addEventListener("scroll",D,{passive:!0}),G&&Ve.addEventListener("resize",D)});const Oe=_e&&re?Br(_e,D):null;let qe=-1,Ae=null;Y&&(Ae=new ResizeObserver(Ve=>{let[lt]=Ve;lt&&lt.target===_e&&Ae&&(Ae.unobserve(S),cancelAnimationFrame(qe),qe=requestAnimationFrame(()=>{Ae&&Ae.observe(S)})),D()}),_e&&!fe&&Ae.observe(_e),Ae.observe(S));let De,Ue=fe?pt(m):null;fe&&ct();function ct(){const Ve=pt(m);Ue&&(Ve.x!==Ue.x||Ve.y!==Ue.y||Ve.width!==Ue.width||Ve.height!==Ue.height)&&D(),Ue=Ve,De=requestAnimationFrame(ct)}return D(),()=>{Ne.forEach(Ve=>{B&&Ve.removeEventListener("scroll",D),G&&Ve.removeEventListener("resize",D)}),Oe&&Oe(),Ae&&Ae.disconnect(),Ae=null,fe&&cancelAnimationFrame(De)}}var Ji=(m,S,D)=>{const M=new Map,B={platform:An,...D},G={...B.platform,_c:M};return Ft(m,S,{...B,platform:G})};function Gi(m){m.magic("anchor",S=>{if(!S._x_anchor)throw"Alpine: No x-anchor directive found on element using $anchor...";return S._x_anchor}),m.interceptClone((S,D)=>{S&&S._x_anchor&&!D._x_anchor&&(D._x_anchor=S._x_anchor)}),m.directive("anchor",m.skipDuringClone((S,{expression:D,modifiers:M,value:B},{cleanup:G,evaluate:Y})=>{let{placement:re,offsetValue:fe,unstyled:_e}=er(M);S._x_anchor=m.reactive({x:0,y:0});let Ne=Y(D);if(!Ne)throw"Alpine: no element provided to x-anchor...";let Oe=()=>{let Ae;Ji(Ne,S,{placement:re,middleware:[ke(),Ie({padding:5}),Pe(fe)]}).then(({x:De,y:Ue})=>{_e||_i(S,De,Ue),JSON.stringify({x:De,y:Ue})!==Ae&&(S._x_anchor.x=De,S._x_anchor.y=Ue),Ae=JSON.stringify({x:De,y:Ue})})},qe=Hr(Ne,S,()=>Oe());G(()=>qe())},(S,{expression:D,modifiers:M,value:B},{cleanup:G,evaluate:Y})=>{let{unstyled:re}=er(M);S._x_anchor&&(re||_i(S,S._x_anchor.x,S._x_anchor.y))}))}function _i(m,S,D){Object.assign(m.style,{left:S+"px",top:D+"px",position:"absolute"})}function er(m){let D=["top","top-start","top-end","right","right-start","right-end","bottom","bottom-start","bottom-end","left","left-start","left-end"].find(G=>m.includes(G)),M=0;if(m.includes("offset")){let G=m.findIndex(Y=>Y==="offset");M=m[G+1]!==void 0?Number(m[G+1]):M}let B=m.includes("no-style");return{placement:D,offsetValue:M,unstyled:B}}var Ki=Gi}}),su=pi({"node_modules/nprogress/nprogress.js"(e,t){(function(i,n){typeof define=="function"&&define.amd?define(n):typeof e=="object"?t.exports=n():i.NProgress=n()})(e,function(){var i={};i.version="0.2.0";var n=i.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};i.configure=function(k){var b,P;for(b in k)P=k[b],P!==void 0&&k.hasOwnProperty(b)&&(n[b]=P);return this},i.status=null,i.set=function(k){var b=i.isStarted();k=o(k,n.minimum,1),i.status=k===1?null:k;var P=i.render(!b),C=P.querySelector(n.barSelector),I=n.speed,j=n.easing;return P.offsetWidth,l(function(T){n.positionUsing===""&&(n.positionUsing=i.getPositioningCSS()),d(C,a(k,I,j)),k===1?(d(P,{transition:"none",opacity:1}),P.offsetWidth,setTimeout(function(){d(P,{transition:"all "+I+"ms linear",opacity:0}),setTimeout(function(){i.remove(),T()},I)},I)):setTimeout(T,I)}),this},i.isStarted=function(){return typeof i.status=="number"},i.start=function(){i.status||i.set(0);var k=function(){setTimeout(function(){i.status&&(i.trickle(),k())},n.trickleSpeed)};return n.trickle&&k(),this},i.done=function(k){return!k&&!i.status?this:i.inc(.3+.5*Math.random()).set(1)},i.inc=function(k){var b=i.status;return b?(typeof k!="number"&&(k=(1-b)*o(Math.random()*b,.1,.95)),b=o(b+k,0,.994),i.set(b)):i.start()},i.trickle=function(){return i.inc(Math.random()*n.trickleRate)},function(){var k=0,b=0;i.promise=function(P){return!P||P.state()==="resolved"?this:(b===0&&i.start(),k++,b++,P.always(function(){b--,b===0?(k=0,i.done()):i.set((k-b)/k)}),this)}}(),i.render=function(k){if(i.isRendered())return document.getElementById("nprogress");g(document.documentElement,"nprogress-busy");var b=document.createElement("div");b.id="nprogress",b.innerHTML=n.template;var P=b.querySelector(n.barSelector),C=k?"-100":s(i.status||0),I=document.querySelector(n.parent),j;return d(P,{transition:"all 0 linear",transform:"translate3d("+C+"%,0,0)"}),n.showSpinner||(j=b.querySelector(n.spinnerSelector),j&&N(j)),I!=document.body&&g(I,"nprogress-custom-parent"),I.appendChild(b),b},i.remove=function(){v(document.documentElement,"nprogress-busy"),v(document.querySelector(n.parent),"nprogress-custom-parent");var k=document.getElementById("nprogress");k&&N(k)},i.isRendered=function(){return!!document.getElementById("nprogress")},i.getPositioningCSS=function(){var k=document.body.style,b="WebkitTransform"in k?"Webkit":"MozTransform"in k?"Moz":"msTransform"in k?"ms":"OTransform"in k?"O":"";return b+"Perspective"in k?"translate3d":b+"Transform"in k?"translate":"margin"};function o(k,b,P){return k<b?b:k>P?P:k}function s(k){return(-1+k)*100}function a(k,b,P){var C;return n.positionUsing==="translate3d"?C={transform:"translate3d("+s(k)+"%,0,0)"}:n.positionUsing==="translate"?C={transform:"translate("+s(k)+"%,0)"}:C={"margin-left":s(k)+"%"},C.transition="all "+b+"ms "+P,C}var l=function(){var k=[];function b(){var P=k.shift();P&&P(b)}return function(P){k.push(P),k.length==1&&b()}}(),d=function(){var k=["Webkit","O","Moz","ms"],b={};function P(T){return T.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(O,$){return $.toUpperCase()})}function C(T){var O=document.body.style;if(T in O)return T;for(var $=k.length,E=T.charAt(0).toUpperCase()+T.slice(1),A;$--;)if(A=k[$]+E,A in O)return A;return T}function I(T){return T=P(T),b[T]||(b[T]=C(T))}function j(T,O,$){O=I(O),T.style[O]=$}return function(T,O){var $=arguments,E,A;if($.length==2)for(E in O)A=O[E],A!==void 0&&O.hasOwnProperty(E)&&j(T,E,A);else j(T,$[1],$[2])}}();function f(k,b){var P=typeof k=="string"?k:w(k);return P.indexOf(" "+b+" ")>=0}function g(k,b){var P=w(k),C=P+b;f(P,b)||(k.className=C.substring(1))}function v(k,b){var P=w(k),C;f(k,b)&&(C=P.replace(" "+b+" "," "),k.className=C.substring(1,C.length-1))}function w(k){return(" "+(k.className||"")+" ").replace(/\s+/gi," ")}function N(k){k&&k.parentNode&&k.parentNode.removeChild(k)}return i})}}),ou=pi({"../alpine/packages/morph/dist/module.cjs.js"(e,t){var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(E,A)=>{for(var W in A)i(E,W,{get:A[W],enumerable:!0})},l=(E,A,W,z)=>{if(A&&typeof A=="object"||typeof A=="function")for(let X of o(A))!s.call(E,X)&&X!==W&&i(E,X,{get:()=>A[X],enumerable:!(z=n(A,X))||z.enumerable});return E},d=E=>l(i({},"__esModule",{value:!0}),E),f={};a(f,{default:()=>$,morph:()=>O}),t.exports=d(f);function g(E,A,W){j();let z,X,J,Se,Xe,nt,kt,_t,vt;function Ft(Z={}){let le=Me=>Me.getAttribute("key"),Re=()=>{};Se=Z.updating||Re,Xe=Z.updated||Re,nt=Z.removing||Re,kt=Z.removed||Re,_t=Z.adding||Re,vt=Z.added||Re,X=Z.key||le,J=Z.lookahead||!1}function Pt(Z,le){if(ke(Z,le))return we(Z,le);let Re=!1,Me=!1;if(!w(Se,()=>Me=!0,Z,le,()=>Re=!0)){if(Z.nodeType===1&&window.Alpine&&(window.Alpine.cloneNode(Z,le),Z._x_teleport&&le._x_teleport&&Pt(Z._x_teleport,le._x_teleport)),b(le)){Pe(Z,le),Xe(Z,le);return}Re||Ie(Z,le),Xe(Z,le),Me||be(Z,le)}}function ke(Z,le){return Z.nodeType!=le.nodeType||Z.nodeName!=le.nodeName||te(Z)!=te(le)}function we(Z,le){if(v(nt,Z))return;let Re=le.cloneNode(!0);v(_t,Re)||(Z.replaceWith(Re),kt(Z),vt(Re))}function Pe(Z,le){let Re=le.nodeValue;Z.nodeValue!==Re&&(Z.nodeValue=Re)}function Ie(Z,le){if(Z._x_transitioning||Z._x_isShown&&!le._x_isShown||!Z._x_isShown&&le._x_isShown)return;let Re=Array.from(Z.attributes),Me=Array.from(le.attributes);for(let Te=Re.length-1;Te>=0;Te--){let ue=Re[Te].name;le.hasAttribute(ue)||Z.removeAttribute(ue)}for(let Te=Me.length-1;Te>=0;Te--){let ue=Me[Te].name,It=Me[Te].value;Z.getAttribute(ue)!==It&&Z.setAttribute(ue,It)}}function be(Z,le){let Re=et(Z.children),Me={},Te=C(le),ue=C(Z);for(;Te;){T(Te,ue);let ne=te(Te),U=te(ue);if(!ue)if(ne&&Me[ne]){let he=Me[ne];Z.appendChild(he),ue=he,U=te(ue)}else{if(!v(_t,Te)){let he=Te.cloneNode(!0);Z.appendChild(he),vt(he)}Te=I(le,Te);continue}let V=he=>he&&he.nodeType===8&&he.textContent==="[if BLOCK]><![endif]",me=he=>he&&he.nodeType===8&&he.textContent==="[if ENDBLOCK]><![endif]";if(V(Te)&&V(ue)){let he=0,pe=ue;for(;ue;){let We=I(Z,ue);if(V(We))he++;else if(me(We)&&he>0)he--;else if(me(We)&&he===0){ue=We;break}ue=We}let K=ue;he=0;let Q=Te;for(;Te;){let We=I(le,Te);if(V(We))he++;else if(me(We)&&he>0)he--;else if(me(We)&&he===0){Te=We;break}Te=We}let ge=Te,ze=new P(pe,K),He=new P(Q,ge);be(ze,He);continue}if(ue.nodeType===1&&J&&!ue.isEqualNode(Te)){let he=I(le,Te),pe=!1;for(;!pe&&he;)he.nodeType===1&&ue.isEqualNode(he)&&(pe=!0,ue=bt(Z,Te,ue),U=te(ue)),he=I(le,he)}if(ne!==U){if(!ne&&U){Me[U]=ue,ue=bt(Z,Te,ue),Me[U].remove(),ue=I(Z,ue),Te=I(le,Te);continue}if(ne&&!U&&Re[ne]&&(ue.replaceWith(Re[ne]),ue=Re[ne],U=te(ue)),ne&&U){let he=Re[ne];if(he)Me[U]=ue,ue.replaceWith(he),ue=he,U=te(ue);else{Me[U]=ue,ue=bt(Z,Te,ue),Me[U].remove(),ue=I(Z,ue),Te=I(le,Te);continue}}}let Ce=ue&&I(Z,ue);Pt(ue,Te),Te=Te&&I(le,Te),ue=Ce}let It=[];for(;ue;)v(nt,ue)||It.push(ue),ue=I(Z,ue);for(;It.length;){let ne=It.shift();ne.remove(),kt(ne)}}function te(Z){return Z&&Z.nodeType===1&&X(Z)}function et(Z){let le={};for(let Re of Z){let Me=te(Re);Me&&(le[Me]=Re)}return le}function bt(Z,le,Re){if(!v(_t,le)){let Me=le.cloneNode(!0);return Z.insertBefore(Me,Re),vt(Me),Me}return le}return Ft(W),z=typeof A=="string"?k(A):A,window.Alpine&&window.Alpine.closestDataStack&&!E._x_dataStack&&(z._x_dataStack=window.Alpine.closestDataStack(E),z._x_dataStack&&window.Alpine.cloneNode(E,z)),Pt(E,z),z=void 0,E}g.step=()=>{},g.log=()=>{};function v(E,...A){let W=!1;return E(...A,()=>W=!0),W}function w(E,A,...W){let z=!1;return E(...W,()=>z=!0,A),z}var N=!1;function k(E){const A=document.createElement("template");return A.innerHTML=E,A.content.firstElementChild}function b(E){return E.nodeType===3||E.nodeType===8}var P=class{constructor(E,A){this.startComment=E,this.endComment=A}get children(){let E=[],A=this.startComment.nextSibling;for(;A&&A!==this.endComment;)E.push(A),A=A.nextSibling;return E}appendChild(E){this.endComment.before(E)}get firstChild(){let E=this.startComment.nextSibling;if(E!==this.endComment)return E}nextNode(E){let A=E.nextSibling;if(A!==this.endComment)return A}insertBefore(E,A){return A.before(E),E}};function C(E){return E.firstChild}function I(E,A){let W;return E instanceof P?W=E.nextNode(A):W=A.nextSibling,W}function j(){if(N)return;N=!0;let E=Element.prototype.setAttribute,A=document.createElement("div");Element.prototype.setAttribute=function(z,X){if(!z.includes("@"))return E.call(this,z,X);A.innerHTML=`<span ${z}="${X}"></span>`;let J=A.firstElementChild.getAttributeNode(z);A.firstElementChild.removeAttributeNode(J),this.setAttributeNode(J)}}function T(E,A){let W=A&&A._x_bindings&&A._x_bindings.id;W&&E.setAttribute&&(E.setAttribute("id",W),E.id=W)}function O(E){E.morph=g}var $=O}}),au=pi({"../alpine/packages/mask/dist/module.cjs.js"(e,t){var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(P,C)=>{for(var I in C)i(P,I,{get:C[I],enumerable:!0})},l=(P,C,I,j)=>{if(C&&typeof C=="object"||typeof C=="function")for(let T of o(C))!s.call(P,T)&&T!==I&&i(P,T,{get:()=>C[T],enumerable:!(j=n(C,T))||j.enumerable});return P},d=P=>l(i({},"__esModule",{value:!0}),P),f={};a(f,{default:()=>b,mask:()=>g,stripDown:()=>w}),t.exports=d(f);function g(P){P.directive("mask",(C,{value:I,expression:j},{effect:T,evaluateLater:O,cleanup:$})=>{let E=()=>j,A="";queueMicrotask(()=>{if(["function","dynamic"].includes(I)){let J=O(j);T(()=>{E=Se=>{let Xe;return P.dontAutoEvaluateFunctions(()=>{J(nt=>{Xe=typeof nt=="function"?nt(Se):nt},{scope:{$input:Se,$money:k.bind({el:C})}})}),Xe},z(C,!1)})}else z(C,!1);if(C._x_model){if(C._x_model.get()===C.value||C._x_model.get()===null&&C.value==="")return;C._x_model.set(C.value)}});const W=new AbortController;$(()=>{W.abort()}),C.addEventListener("input",()=>z(C),{signal:W.signal,capture:!0}),C.addEventListener("blur",()=>z(C,!1),{signal:W.signal});function z(J,Se=!0){let Xe=J.value,nt=E(Xe);if(!nt||nt==="false")return!1;if(A.length-J.value.length===1)return A=J.value;let kt=()=>{A=J.value=X(Xe,nt)};Se?v(J,nt,()=>{kt()}):kt()}function X(J,Se){if(J==="")return"";let Xe=w(Se,J);return N(Se,Xe)}}).before("model")}function v(P,C,I){let j=P.selectionStart,T=P.value;I();let O=T.slice(0,j),$=N(C,w(C,O)).length;P.setSelectionRange($,$)}function w(P,C){let I=C,j="",T={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},O="";for(let $=0;$<P.length;$++){if(["9","a","*"].includes(P[$])){O+=P[$];continue}for(let E=0;E<I.length;E++)if(I[E]===P[$]){I=I.slice(0,E)+I.slice(E+1);break}}for(let $=0;$<O.length;$++){let E=!1;for(let A=0;A<I.length;A++)if(T[O[$]].test(I[A])){j+=I[A],I=I.slice(0,A)+I.slice(A+1),E=!0;break}if(!E)break}return j}function N(P,C){let I=Array.from(C),j="";for(let T=0;T<P.length;T++){if(!["9","a","*"].includes(P[T])){j+=P[T];continue}if(I.length===0)break;j+=I.shift()}return j}function k(P,C=".",I,j=2){if(P==="-")return"-";if(/^\D+$/.test(P))return"9";I==null&&(I=C===","?".":",");let T=(A,W)=>{let z="",X=0;for(let J=A.length-1;J>=0;J--)A[J]!==W&&(X===3?(z=A[J]+W+z,X=0):z=A[J]+z,X++);return z},O=P.startsWith("-")?"-":"",$=P.replaceAll(new RegExp(`[^0-9\\${C}]`,"g"),""),E=Array.from({length:$.split(C)[0].length}).fill("9").join("");return E=`${O}${T(E,I)}`,j>0&&P.includes(C)&&(E+=`${C}`+"9".repeat(j)),queueMicrotask(()=>{this.el.value.endsWith(C)||this.el.value[this.el.selectionStart-1]===C&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),E}var b=g}}),cu=class{constructor(){this.arrays={}}add(e,t){this.arrays[e]||(this.arrays[e]=[]),this.arrays[e].push(t)}remove(e){this.arrays[e]&&delete this.arrays[e]}get(e){return this.arrays[e]||[]}each(e,t){return this.get(e).forEach(t)}},Xa=class{constructor(){this.arrays=new WeakMap}add(e,t){this.arrays.has(e)||this.arrays.set(e,[]),this.arrays.get(e).push(t)}remove(e){this.arrays.has(e)&&this.arrays.delete(e,[])}get(e){return this.arrays.has(e)?this.arrays.get(e):[]}each(e,t){return this.get(e).forEach(t)}};function vs(e,t,i={},n=!0){e.dispatchEvent(new CustomEvent(t,{detail:i,bubbles:n,composed:!0,cancelable:!0}))}function ys(e,t,i){return e.addEventListener(t,i),()=>e.removeEventListener(t,i)}function Zs(e){return typeof e=="object"&&e!==null}function Go(e){return Zs(e)&&!Is(e)}function Is(e){return Array.isArray(e)}function Ya(e){return typeof e=="function"}function Ko(e){return typeof e!="object"||e===null}function Ui(e){return JSON.parse(JSON.stringify(e))}function Ci(e,t){return t===""?e:t.split(".").reduce((i,n)=>i==null?void 0:i[n],e)}function Or(e,t,i){let n=t.split(".");if(n.length===1)return e[t]=i;let o=n.shift(),s=n.join(".");e[o]===void 0&&(e[o]={}),Or(e[o],s,i)}function eo(e,t,i={},n=""){if(e===t)return i;if(typeof e!=typeof t||Go(e)&&Is(t)||Is(e)&&Go(t)||Ko(e)||Ko(t))return i[n]=t,i;let o=Object.keys(e);return Object.entries(t).forEach(([s,a])=>{i={...i,...eo(e[s],t[s],i,n===""?s:`${n}.${s}`)},o=o.filter(l=>l!==s)}),o.forEach(s=>{i[`${n}.${s}`]="__rm__"}),i}function vn(e){let t=Xo(e)?e[0]:e;return Xo(e)&&e[1],Zs(t)&&Object.entries(t).forEach(([i,n])=>{t[i]=vn(n)}),t}function Xo(e){return Array.isArray(e)&&e.length===2&&typeof e[1]=="object"&&Object.keys(e[1]).includes("s")}function Qa(){if(document.querySelector('meta[name="csrf-token"]'))return document.querySelector('meta[name="csrf-token"]').getAttribute("content");if(document.querySelector("[data-csrf]"))return document.querySelector("[data-csrf]").getAttribute("data-csrf");if(window.livewireScriptConfig.csrf??!1)return window.livewireScriptConfig.csrf;throw"Livewire: No CSRF token detected"}var hn;function lu(){if(hn)return hn;if(window.livewireScriptConfig&&(window.livewireScriptConfig.nonce??!1))return hn=window.livewireScriptConfig.nonce,hn;const e=document.querySelector("style[data-livewire-style][nonce]");return e?(hn=e.nonce,hn):null}function uu(){var e;return((e=document.querySelector("[data-update-uri]"))==null?void 0:e.getAttribute("data-update-uri"))??window.livewireScriptConfig.uri??null}function Za(e){return!!e.match(/<script>Sfdump\(".+"\)<\/script>/)}function du(e){let t=e.match(/.*<script>Sfdump\(".+"\)<\/script>/s);return[t,e.replace(t,"")]}var bs=new WeakMap;function Kn(e){if(!bs.has(e)){let t=new hu(e);bs.set(e,t),t.registerListeners()}return bs.get(e)}function fu(e,t,i,n){let o=Kn(i),s=()=>e.dispatchEvent(new CustomEvent("livewire-upload-start",{bubbles:!0,detail:{id:i.id,property:t}})),a=()=>e.dispatchEvent(new CustomEvent("livewire-upload-finish",{bubbles:!0,detail:{id:i.id,property:t}})),l=()=>e.dispatchEvent(new CustomEvent("livewire-upload-error",{bubbles:!0,detail:{id:i.id,property:t}})),d=()=>e.dispatchEvent(new CustomEvent("livewire-upload-cancel",{bubbles:!0,detail:{id:i.id,property:t}})),f=w=>{var N=Math.round(w.loaded*100/w.total);e.dispatchEvent(new CustomEvent("livewire-upload-progress",{bubbles:!0,detail:{progress:N}}))},g=w=>{w.target.files.length!==0&&(s(),w.target.multiple?o.uploadMultiple(t,w.target.files,a,l,f,d):o.upload(t,w.target.files[0],a,l,f,d))};e.addEventListener("change",g),i.$wire.$watch(t,w=>{e.isConnected&&((w===null||w==="")&&(e.value=""),e.multiple&&Array.isArray(w)&&w.length===0&&(e.value=""))});let v=()=>{e.value=null};e.addEventListener("click",v),e.addEventListener("livewire-upload-cancel",v),n(()=>{e.removeEventListener("change",g),e.removeEventListener("click",v)})}var hu=class{constructor(e){this.component=e,this.uploadBag=new Yo,this.removeBag=new Yo}registerListeners(){this.component.$wire.$on("upload:generatedSignedUrl",({name:e,url:t})=>{this.component,this.handleSignedUrl(e,t)}),this.component.$wire.$on("upload:generatedSignedUrlForS3",({name:e,payload:t})=>{this.component,this.handleS3PreSignedUrl(e,t)}),this.component.$wire.$on("upload:finished",({name:e,tmpFilenames:t})=>this.markUploadFinished(e,t)),this.component.$wire.$on("upload:errored",({name:e})=>this.markUploadErrored(e)),this.component.$wire.$on("upload:removed",({name:e,tmpFilename:t})=>this.removeBag.shift(e).finishCallback(t))}upload(e,t,i,n,o,s){this.setUpload(e,{files:[t],multiple:!1,finishCallback:i,errorCallback:n,progressCallback:o,cancelledCallback:s})}uploadMultiple(e,t,i,n,o,s){this.setUpload(e,{files:Array.from(t),multiple:!0,finishCallback:i,errorCallback:n,progressCallback:o,cancelledCallback:s})}removeUpload(e,t,i){this.removeBag.push(e,{tmpFilename:t,finishCallback:i}),this.component.$wire.call("_removeUpload",e,t)}setUpload(e,t){this.uploadBag.add(e,t),this.uploadBag.get(e).length===1&&this.startUpload(e,t)}handleSignedUrl(e,t){let i=new FormData;Array.from(this.uploadBag.first(e).files).forEach(s=>i.append("files[]",s,s.name));let n={Accept:"application/json"},o=Qa();o&&(n["X-CSRF-TOKEN"]=o),this.makeRequest(e,i,"post",t,n,s=>s.paths)}handleS3PreSignedUrl(e,t){let i=this.uploadBag.first(e).files[0],n=t.headers;"Host"in n&&delete n.Host;let o=t.url;this.makeRequest(e,i,"put",o,n,s=>[t.path])}makeRequest(e,t,i,n,o,s){let a=new XMLHttpRequest;a.open(i,n),Object.entries(o).forEach(([l,d])=>{a.setRequestHeader(l,d)}),a.upload.addEventListener("progress",l=>{l.detail={},l.detail.progress=Math.floor(l.loaded*100/l.total),this.uploadBag.first(e).progressCallback(l)}),a.addEventListener("load",()=>{if((a.status+"")[0]==="2"){let d=s(a.response&&JSON.parse(a.response));this.component.$wire.call("_finishUpload",e,d,this.uploadBag.first(e).multiple);return}let l=null;a.status===422&&(l=a.response),this.component.$wire.call("_uploadErrored",e,l,this.uploadBag.first(e).multiple)}),this.uploadBag.first(e).request=a,a.send(t)}startUpload(e,t){let i=t.files.map(n=>({name:n.name,size:n.size,type:n.type}));this.component.$wire.call("_startUpload",e,i,t.multiple),this.component}markUploadFinished(e,t){this.component;let i=this.uploadBag.shift(e);i.finishCallback(i.multiple?t:t[0]),this.uploadBag.get(e).length>0&&this.startUpload(e,this.uploadBag.last(e))}markUploadErrored(e){this.component,this.uploadBag.shift(e).errorCallback(),this.uploadBag.get(e).length>0&&this.startUpload(e,this.uploadBag.last(e))}cancelUpload(e,t=null){this.component;let i=this.uploadBag.first(e);i&&(i.request&&i.request.abort(),this.uploadBag.shift(e).cancelledCallback(),t&&t())}},Yo=class{constructor(){this.bag={}}add(e,t){this.bag[e]||(this.bag[e]=[]),this.bag[e].push(t)}push(e,t){this.add(e,t)}first(e){return this.bag[e]?this.bag[e][0]:null}last(e){return this.bag[e].slice(-1)[0]}get(e){return this.bag[e]}shift(e){return this.bag[e].shift()}call(e,...t){(this.listeners[e]||[]).forEach(i=>{i(...t)})}has(e){return Object.keys(this.listeners).includes(e)}};function pu(e,t,i,n=()=>{},o=()=>{},s=()=>{},a=()=>{}){Kn(e).upload(t,i,n,o,s,a)}function mu(e,t,i,n=()=>{},o=()=>{},s=()=>{},a=()=>{}){Kn(e).uploadMultiple(t,i,n,o,s,a)}function gu(e,t,i,n=()=>{},o=()=>{}){Kn(e).removeUpload(t,i,n,o)}function _u(e,t,i=()=>{}){Kn(e).cancelUpload(t,i)}var Qo=Ze(wt());function ec(e,t){return t||(t=()=>{}),(i,n=!1)=>{let o=n,s=i,a=e.$wire,l=a.get(s);return Qo.default.interceptor((f,g,v,w,N)=>{if(typeof l>"u"){console.error(`Livewire Entangle Error: Livewire property ['${s}'] cannot be found on component: ['${e.name}']`);return}let k=Qo.default.entangle({get(){return a.get(i)},set(b){a.set(i,b,o)}},{get(){return g()},set(b){v(b)}});return t(()=>k()),vu(a.get(i))},f=>{Object.defineProperty(f,"live",{get(){return o=!0,f}})})(l)}}function vu(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}var Hi=[];function Je(e,t){return Hi[e]||(Hi[e]=[]),Hi[e].push(t),()=>{Hi[e]=Hi[e].filter(i=>i!==t)}}function ht(e,...t){let i=Hi[e]||[],n=[];for(let o=0;o<i.length;o++){let s=i[o](...t);Ya(s)&&n.push(s)}return o=>ic(n,o)}async function tc(e,...t){let i=Hi[e]||[],n=[];for(let o=0;o<i.length;o++){let s=await i[o](...t);Ya(s)&&n.push(s)}return o=>ic(n,o)}function ic(e,t){let i=t;for(let n=0;n<e.length;n++){let o=e[n](i);o!==void 0&&(i=o)}return i}function nc(e){let t=document.createElement("html");t.innerHTML=e,t.querySelectorAll("a").forEach(o=>o.setAttribute("target","_top"));let i=document.getElementById("livewire-error");typeof i<"u"&&i!=null?i.innerHTML="":(i=document.createElement("div"),i.id="livewire-error",i.style.position="fixed",i.style.width="100vw",i.style.height="100vh",i.style.padding="50px",i.style.backgroundColor="rgba(0, 0, 0, .6)",i.style.zIndex=2e5);let n=document.createElement("iframe");n.style.backgroundColor="#17161A",n.style.borderRadius="5px",n.style.width="100%",n.style.height="100%",i.appendChild(n),document.body.prepend(i),document.body.style.overflow="hidden",n.contentWindow.document.open(),n.contentWindow.document.write(t.outerHTML),n.contentWindow.document.close(),i.addEventListener("click",()=>Zo(i)),i.setAttribute("tabindex",0),i.addEventListener("keydown",o=>{o.key==="Escape"&&Zo(i)}),i.focus()}function Zo(e){e.outerHTML="",document.body.style.overflow="visible"}var yu=class{constructor(){this.commits=new Set}add(e){this.commits.add(e)}delete(e){this.commits.delete(e)}hasCommitFor(e){return!!this.findCommitByComponent(e)}findCommitByComponent(e){for(let[t,i]of this.commits.entries())if(i.component===e)return i}shouldHoldCommit(e){return!e.isolate}empty(){return this.commits.size===0}async send(){this.prepare(),await xu(this)}prepare(){this.commits.forEach(e=>e.prepare())}payload(){let e=[],t=[],i=[];return this.commits.forEach(s=>{let[a,l,d]=s.toRequestPayload();e.push(a),t.push(l),i.push(d)}),[e,s=>t.forEach(a=>a(s.shift())),()=>i.forEach(s=>s())]}},bu=class{constructor(e){this.component=e,this.isolate=!1,this.calls=[],this.receivers=[],this.resolvers=[]}addResolver(e){this.resolvers.push(e)}addCall(e,t,i){this.calls.push({path:"",method:e,params:t,handleReturn(n){i(n)}})}prepare(){ht("commit.prepare",{component:this.component})}toRequestPayload(){let e=eo(this.component.canonical,this.component.ephemeral),t=this.component.mergeQueuedUpdates(e),i={snapshot:this.component.snapshotEncoded,updates:t,calls:this.calls.map(w=>({path:w.path,method:w.method,params:w.params}))},n=[],o=[],s=[],a=w=>n.forEach(N=>N(w)),l=()=>o.forEach(w=>w()),d=()=>s.forEach(w=>w()),f=ht("commit",{component:this.component,commit:i,succeed:w=>{n.push(w)},fail:w=>{o.push(w)},respond:w=>{s.push(w)}});return[i,w=>{let{snapshot:N,effects:k}=w;if(d(),this.component.mergeNewSnapshot(N,k,t),this.component.processEffects(this.component.effects),k.returns){let P=k.returns;this.calls.map(({handleReturn:I})=>I).forEach((I,j)=>{I(P[j])})}let b=JSON.parse(N);f({snapshot:b,effects:k}),this.resolvers.forEach(P=>P()),a(w)},()=>{d(),l()}]}},wu=class{constructor(){this.commits=new Set,this.pools=new Set}add(e){let t=this.findCommitOr(e,()=>{let i=new bu(e);return this.commits.add(i),i});return Su(t,()=>{this.findPoolWithComponent(t.component)||this.createAndSendNewPool()}),t}findCommitOr(e,t){for(let[i,n]of this.commits.entries())if(n.component===e)return n;return t()}findPoolWithComponent(e){for(let[t,i]of this.pools.entries())if(i.hasCommitFor(e))return i}createAndSendNewPool(){ht("commit.pooling",{commits:this.commits});let e=this.corraleCommitsIntoPools();this.commits.clear(),ht("commit.pooled",{pools:e}),e.forEach(t=>{t.empty()||(this.pools.add(t),t.send().then(()=>{this.pools.delete(t),this.sendAnyQueuedCommits()}))})}corraleCommitsIntoPools(){let e=new Set;for(let[t,i]of this.commits.entries()){let n=!1;if(e.forEach(o=>{o.shouldHoldCommit(i)&&(o.add(i),n=!0)}),!n){let o=new yu;o.add(i),e.add(o)}}return e}sendAnyQueuedCommits(){this.commits.size>0&&this.createAndSendNewPool()}},ws=new WeakMap;function Su(e,t){ws.has(e)||ws.set(e,setTimeout(()=>{t(),ws.delete(e)},5))}var rc=new wu;async function sc(e){let t=rc.add(e),i=new Promise(n=>{t.addResolver(n)});return i.commit=t,i}async function Cu(e,t,i){let n=rc.add(e),o=new Promise(s=>{n.addCall(t,i,a=>s(a))});return o.commit=n,o}async function xu(e){let[t,i,n]=e.payload(),o={method:"POST",body:JSON.stringify({_token:Qa(),components:t}),headers:{"Content-type":"application/json","X-Livewire":""}},s=[],a=[],l=[],d=I=>s.forEach(j=>j(I)),f=I=>a.forEach(j=>j(I)),g=I=>l.forEach(j=>j(I)),v=ht("request.profile",o),w=uu();ht("request",{url:w,options:o,payload:o.body,respond:I=>l.push(I),succeed:I=>s.push(I),fail:I=>a.push(I)});let N;try{N=await fetch(w,o)}catch{v({content:"{}",failed:!0}),n(),f({status:503,content:null,preventDefault:()=>{}});return}let k={status:N.status,response:N};g(k),N=k.response;let b=await N.text();if(!N.ok){v({content:"{}",failed:!0});let I=!1;return n(),f({status:N.status,content:b,preventDefault:()=>I=!0}),I?void 0:(N.status===419&&Eu(),Tu(b))}if(N.redirected&&(window.location.href=N.url),Za(b)){let I;[I,b]=du(b),nc(I),v({content:"{}",failed:!0})}else v({content:b,failed:!1});let{components:P,assets:C}=JSON.parse(b);await tc("payload.intercept",{components:P,assets:C}),await i(P),d({status:N.status,json:JSON.parse(b)})}function Eu(){confirm(`This page has expired.
Would you like to refresh the page?`)&&window.location.reload()}function Tu(e){nc(e)}var oc=Ze(wt()),to={},ac;function yt(e,t,i=null){to[e]=t}function Au(e){ac=e}var ea={on:"$on",el:"$el",id:"$id",js:"$js",get:"$get",set:"$set",call:"$call",hook:"$hook",commit:"$commit",watch:"$watch",entangle:"$entangle",dispatch:"$dispatch",dispatchTo:"$dispatchTo",dispatchSelf:"$dispatchSelf",upload:"$upload",uploadMultiple:"$uploadMultiple",removeUpload:"$removeUpload",cancelUpload:"$cancelUpload"};function ku(e,t){return new Proxy({},{get(i,n){if(n==="__instance")return e;if(n in ea)return ta(e,ea[n]);if(n in to)return ta(e,n);if(n in t)return t[n];if(!["then"].includes(n))return Pu(e)(n)},set(i,n,o){return n in t&&(t[n]=o),!0}})}function ta(e,t){return to[t](e)}function Pu(e){return ac(e)}oc.default.magic("wire",(e,{cleanup:t})=>{let i;return new Proxy({},{get(n,o){return i||(i=Ei(e)),["$entangle","entangle"].includes(o)?ec(i,t):i.$wire[o]},set(n,o,s){return i||(i=Ei(e)),i.$wire[o]=s,!0}})});yt("__instance",e=>e);yt("$get",e=>(t,i=!0)=>Ci(i?e.reactive:e.ephemeral,t));yt("$el",e=>e.el);yt("$id",e=>e.id);yt("$js",e=>{let t=e.addJsAction.bind(e),i=e.getJsActions();return Object.keys(i).forEach(n=>{t[n]=e.getJsAction(n)}),t});yt("$set",e=>async(t,i,n=!0)=>(Or(e.reactive,t,i),n?(e.queueUpdate(t,i),await sc(e)):Promise.resolve()));yt("$call",e=>async(t,...i)=>await e.$wire[t](...i));yt("$entangle",e=>(t,i=!1)=>ec(e)(t,i));yt("$toggle",e=>(t,i=!0)=>e.$wire.set(t,!e.$wire.get(t),i));yt("$watch",e=>(t,i)=>{let n=()=>Ci(e.reactive,t),o=oc.default.watch(n,i);e.addCleanup(o)});yt("$refresh",e=>e.$wire.$commit);yt("$commit",e=>async()=>await sc(e));yt("$on",e=>(...t)=>Uu(e,...t));yt("$hook",e=>(t,i)=>{let n=Je(t,({component:o,...s})=>{if(o===void 0)return i(s);if(o.id===e.id)return i({component:o,...s})});return e.addCleanup(n),n});yt("$dispatch",e=>(...t)=>lc(e,...t));yt("$dispatchSelf",e=>(...t)=>wn(e,...t));yt("$dispatchTo",()=>(...e)=>io(...e));yt("$upload",e=>(...t)=>pu(e,...t));yt("$uploadMultiple",e=>(...t)=>mu(e,...t));yt("$removeUpload",e=>(...t)=>gu(e,...t));yt("$cancelUpload",e=>(...t)=>_u(e,...t));var Ss=new WeakMap;yt("$parent",e=>{if(Ss.has(e))return Ss.get(e).$wire;let t=e.parent;return Ss.set(e,t),t.$wire});var bn=new WeakMap;function Iu(e,t,i){bn.has(e)||bn.set(e,{});let n=bn.get(e);n[t]=i,bn.set(e,n)}Au(e=>t=>async(...i)=>{if(i.length===1&&i[0]instanceof Event&&(i=[]),bn.has(e)){let n=bn.get(e);if(typeof n[t]=="function")return n[t](i)}return await Cu(e,t,i)});var Ru=class{constructor(e){if(e.__livewire)throw"Component already initialized";if(e.__livewire=this,this.el=e,this.id=e.getAttribute("wire:id"),this.__livewireId=this.id,this.snapshotEncoded=e.getAttribute("wire:snapshot"),this.snapshot=JSON.parse(this.snapshotEncoded),!this.snapshot)throw"Snapshot missing on Livewire component with id: "+this.id;this.name=this.snapshot.memo.name,this.effects=JSON.parse(e.getAttribute("wire:effects")),this.originalEffects=Ui(this.effects),this.canonical=vn(Ui(this.snapshot.data)),this.ephemeral=vn(Ui(this.snapshot.data)),this.reactive=Alpine.reactive(this.ephemeral),this.queuedUpdates={},this.jsActions={},this.$wire=ku(this,this.reactive),this.cleanups=[],this.processEffects(this.effects)}mergeNewSnapshot(e,t,i={}){let n=JSON.parse(e),o=Ui(this.canonical),s=this.applyUpdates(o,i),a=vn(Ui(n.data)),l=eo(s,a);this.snapshotEncoded=e,this.snapshot=n,this.effects=t,this.canonical=vn(Ui(n.data));let d=vn(Ui(n.data));return Object.entries(l).forEach(([f,g])=>{let v=f.split(".")[0];this.reactive[v]=d[v]}),l}queueUpdate(e,t){this.queuedUpdates[e]=t}mergeQueuedUpdates(e){return Object.entries(this.queuedUpdates).forEach(([t,i])=>{Object.entries(e).forEach(([n,o])=>{n.startsWith(i)&&delete e[n]}),e[t]=i}),this.queuedUpdates=[],e}applyUpdates(e,t){for(let i in t)Or(e,i,t[i]);return e}replayUpdate(e,t){let i={...this.effects,html:t};this.mergeNewSnapshot(JSON.stringify(e),i),this.processEffects({html:t})}processEffects(e){ht("effects",this,e),ht("effect",{component:this,effects:e,cleanup:t=>this.addCleanup(t)})}get children(){let e=this.snapshot.memo;return Object.values(e.children).map(i=>i[1]).map(i=>Lu(i))}get parent(){return Ei(this.el.parentElement)}inscribeSnapshotAndEffectsOnElement(){let e=this.el;e.setAttribute("wire:snapshot",this.snapshotEncoded);let t=this.originalEffects.listeners?{listeners:this.originalEffects.listeners}:{};this.originalEffects.url&&(t.url=this.originalEffects.url),this.originalEffects.scripts&&(t.scripts=this.originalEffects.scripts),e.setAttribute("wire:effects",JSON.stringify(t))}addJsAction(e,t){this.jsActions[e]=t}hasJsAction(e){return this.jsActions[e]!==void 0}getJsAction(e){return this.jsActions[e].bind(this.$wire)}getJsActions(){return this.jsActions}addCleanup(e){this.cleanups.push(e)}cleanup(){for(delete this.el.__livewire;this.cleanups.length>0;)this.cleanups.pop()()}},xi={};function Ou(e){let t=new Ru(e);if(xi[t.id])throw"Component already registered";return ht("component.init",{component:t,cleanup:n=>t.addCleanup(n)}),xi[t.id]=t,t}function Du(e){let t=xi[e];t&&(t.cleanup(),delete xi[e])}function Lu(e){let t=xi[e];if(!t)throw"Component not found: "+e;return t}function Ei(e,t=!0){let i=Alpine.findClosest(e,n=>n.__livewire);if(!i){if(t)throw"Could not find Livewire component in DOM tree";return}return i.__livewire}function cc(e){return Object.values(xi).filter(t=>e==t.name)}function Mu(e){return cc(e).map(t=>t.$wire)}function ju(e){let t=xi[e];return t&&t.$wire}function Nu(){return Object.values(xi)[0].$wire}function $u(){return Object.values(xi)}function lc(e,t,i){Dr(e.el,t,i)}function Fu(e,t){Dr(window,e,t)}function wn(e,t,i){Dr(e.el,t,i,!1)}function io(e,t,i){cc(e).forEach(o=>{Dr(o.el,t,i,!1)})}function Uu(e,t,i){e.el.addEventListener(t,n=>{i(n.detail)})}function Bu(e,t){let i=n=>{n.__livewire&&t(n.detail)};return window.addEventListener(e,i),()=>{window.removeEventListener(e,i)}}function Dr(e,t,i,n=!0){let o=new CustomEvent(t,{bubbles:n,detail:i});o.__livewire={name:t,params:i,receivedBy:[]},e.dispatchEvent(o)}var zn=new Set;function Hn(e){return e.match(new RegExp("wire:"))}function Rs(e,t){let[i,...n]=t.replace(new RegExp("wire:"),"").split(".");return new Vu(i,n,t,e)}function Zt(e,t){zn.has(e)||(zn.add(e),Je("directive.init",({el:i,component:n,directive:o,cleanup:s})=>{o.value===e&&t({el:i,directive:o,component:n,$wire:n.$wire,cleanup:s})}))}function Hu(e,t){zn.has(e)||(zn.add(e),Je("directive.global.init",({el:i,directive:n,cleanup:o})=>{n.value===e&&t({el:i,directive:n,cleanup:o})}))}function no(e){return new qu(e)}function Wu(e){return zn.has(e)}var qu=class{constructor(e){this.el=e,this.directives=this.extractTypeModifiersAndValue()}all(){return this.directives}has(e){return this.directives.map(t=>t.value).includes(e)}missing(e){return!this.has(e)}get(e){return this.directives.find(t=>t.value===e)}extractTypeModifiersAndValue(){return Array.from(this.el.getAttributeNames().filter(e=>Hn(e)).map(e=>Rs(this.el,e)))}},Vu=class{constructor(e,t,i,n){this.rawName=this.raw=i,this.el=n,this.eventContext,this.value=e,this.modifiers=t,this.expression=this.el.getAttribute(this.rawName)}get method(){const{method:e}=this.parseOutMethodAndParams(this.expression);return e}get params(){const{params:e}=this.parseOutMethodAndParams(this.expression);return e}parseOutMethodAndParams(e){let t=e,i=[];const n=t.match(/(.*?)\((.*)\)/s);return n&&(t=n[1],i=new Function("$event",`return (function () {
                for (var l=arguments.length, p=new Array(l), k=0; k<l; k++) {
                    p[k] = arguments[k];
                }
                return [].concat(p);
            })(${n[2]})`)(this.eventContext)),{method:t,params:i}}},zu=Ze(Zl()),Ju=Ze(eu()),Gu=Ze(tu()),Ku=Ze(iu()),Xu=Ze(nu()),Yu=Ze(ru()),Os=class{constructor(e,t){this.url=e,this.html=t}},fi={currentKey:null,currentUrl:null,keys:[],lookup:{},limit:10,has(e){return this.lookup[e]!==void 0},retrieve(e){let t=this.lookup[e];if(t===void 0)throw"No back button cache found for current location: "+e;return t},replace(e,t){this.has(e)?this.lookup[e]=t:this.push(e,t)},push(e,t){this.lookup[e]=t;let i=this.keys.indexOf(e);i>-1&&this.keys.splice(i,1),this.keys.unshift(e),this.trim()},trim(){for(let e of this.keys.splice(this.limit))delete this.lookup[e]}};function Qu(){let e=new URL(window.location.href,document.baseURI);uc(e,document.documentElement.outerHTML)}function Zu(e,t){let i=document.documentElement.outerHTML;fi.replace(e,new Os(t,i))}function ed(e,t){let i;e(n=>i=n),window.addEventListener("popstate",n=>{let o=n.state||{},s=o.alpine||{};if(Object.keys(o).length!==0&&s.snapshotIdx)if(fi.has(s.snapshotIdx)){let a=fi.retrieve(s.snapshotIdx);t(a.html,a.url,fi.currentUrl,fi.currentKey)}else i(s.url)})}function td(e,t){id(t,e)}function id(e,t){dc("pushState",e,t)}function uc(e,t){dc("replaceState",e,t)}function dc(e,t,i){let n=t.toString()+"-"+Math.random();e==="pushState"?fi.push(n,new Os(t,i)):fi.replace(n=fi.currentKey??n,new Os(t,i));let o=history.state||{};o.alpine||(o.alpine={}),o.alpine.snapshotIdx=n,o.alpine.url=t.toString();try{history[e](o,JSON.stringify(document.title),t),fi.currentKey=n,fi.currentUrl=t}catch(s){s instanceof DOMException&&s.name==="SecurityError"&&console.error("Livewire: You can't use wire:navigate with a link to a different root domain: "+t),console.error(s)}}function nd(e,t){let i=s=>!s.isTrusted,n=s=>s.which>1||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey,o=s=>s.which!==13||s.altKey||s.ctrlKey||s.metaKey||s.shiftKey;e.addEventListener("click",s=>{if(i(s)){s.preventDefault(),t(a=>a());return}n(s)||s.preventDefault()}),e.addEventListener("mousedown",s=>{n(s)||(s.preventDefault(),t(a=>{let l=d=>{d.preventDefault(),a(),e.removeEventListener("mouseup",l)};e.addEventListener("mouseup",l)}))}),e.addEventListener("keydown",s=>{o(s)||(s.preventDefault(),t(a=>a()))})}function rd(e,t=60,i){e.addEventListener("mouseenter",n=>{let o=setTimeout(()=>{i(n)},t),s=()=>{clearTimeout(o),e.removeEventListener("mouseleave",s)};e.addEventListener("mouseleave",s)})}function ia(e){return Cn(e.getAttribute("href"))}function Cn(e){return e!==null&&new URL(e,document.baseURI)}function Lr(e){return e.pathname+e.search+e.hash}function sd(e,t){let i=Lr(e);fc(i,(n,o)=>{t(n,o)})}function fc(e,t){let i={headers:{"X-Livewire-Navigate":""}};ht("navigate.request",{url:e,options:i});let n;fetch(e,i).then(o=>{let s=Cn(e);return n=Cn(o.url),s.pathname+s.search===n.pathname+n.search&&(n.hash=s.hash),o.text()}).then(o=>{t(o,n)})}var Xt={};function na(e,t){let i=Lr(e);Xt[i]||(Xt[i]={finished:!1,html:null,whenFinished:()=>{}},fc(i,(n,o)=>{t(n,o)}))}function ra(e,t,i){let n=Xt[Lr(t)];n.html=e,n.finished=!0,n.finalDestination=i,n.whenFinished()}function od(e,t,i){let n=Lr(e);if(!Xt[n])return i();if(Xt[n].finished){let o=Xt[n].html,s=Xt[n].finalDestination;return delete Xt[n],t(o,s)}else Xt[n].whenFinished=()=>{let o=Xt[n].html,s=Xt[n].finalDestination;delete Xt[n],t(o,s)}}var ro=Ze(wt());function sa(e){ro.default.mutateDom(()=>{e.querySelectorAll("[data-teleport-template]").forEach(t=>t._x_teleport.remove())})}function oa(e){ro.default.mutateDom(()=>{e.querySelectorAll("[data-teleport-target]").forEach(t=>t.remove())})}function aa(e){ro.default.walk(e,(t,i)=>{t._x_teleport&&(t._x_teleportPutBack(),i())})}function ad(e){return e.hasAttribute("data-teleport-target")}function ca(){document.body.setAttribute("data-scroll-x",document.body.scrollLeft),document.body.setAttribute("data-scroll-y",document.body.scrollTop),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(e=>{e.setAttribute("data-scroll-x",e.scrollLeft),e.setAttribute("data-scroll-y",e.scrollTop)})}function la(){let e=t=>{t.hasAttribute("data-scroll-x")?(t.scrollTo({top:Number(t.getAttribute("data-scroll-y")),left:Number(t.getAttribute("data-scroll-x")),behavior:"instant"}),t.removeAttribute("data-scroll-x"),t.removeAttribute("data-scroll-y")):window.scrollTo({top:0,left:0,behavior:"instant"})};queueMicrotask(()=>{queueMicrotask(()=>{e(document.body),document.querySelectorAll(["[x-navigate\\:scroll]","[wire\\:scroll]"]).forEach(e)})})}var Ds=Ze(wt()),Wn={};function ua(e){Wn={},document.querySelectorAll("[x-persist]").forEach(t=>{Wn[t.getAttribute("x-persist")]=t,e(t),Ds.default.mutateDom(()=>{t.remove()})})}function da(e){let t=[];document.querySelectorAll("[x-persist]").forEach(i=>{let n=Wn[i.getAttribute("x-persist")];n&&(t.push(i.getAttribute("x-persist")),n._x_wasPersisted=!0,e(n,i),Ds.default.mutateDom(()=>{i.replaceWith(n)}))}),Object.entries(Wn).forEach(([i,n])=>{t.includes(i)||Ds.default.destroyTree(n)}),Wn={}}function cd(e){return e.hasAttribute("x-persist")}var Mr=Ze(su());Mr.default.configure({minimum:.1,trickleSpeed:200,showSpinner:!1,parent:"body"});fd();var Ls=!1;function ld(){Ls=!0,setTimeout(()=>{Ls&&Mr.default.start()},150)}function ud(){Ls=!1,Mr.default.done()}function dd(){Mr.default.remove()}function fd(){let e=document.createElement("style");e.innerHTML=`/* Make clicks pass-through */

    #nprogress {
      pointer-events: none;
    }

    #nprogress .bar {
      background: var(--livewire-progress-bar-color, #29d);

      position: fixed;
      z-index: 1031;
      top: 0;
      left: 0;

      width: 100%;
      height: 2px;
    }

    /* Fancy blur effect */
    #nprogress .peg {
      display: block;
      position: absolute;
      right: 0px;
      width: 100px;
      height: 100%;
      box-shadow: 0 0 10px var(--livewire-progress-bar-color, #29d), 0 0 5px var(--livewire-progress-bar-color, #29d);
      opacity: 1.0;

      -webkit-transform: rotate(3deg) translate(0px, -4px);
          -ms-transform: rotate(3deg) translate(0px, -4px);
              transform: rotate(3deg) translate(0px, -4px);
    }

    /* Remove these to get rid of the spinner */
    #nprogress .spinner {
      display: block;
      position: fixed;
      z-index: 1031;
      top: 15px;
      right: 15px;
    }

    #nprogress .spinner-icon {
      width: 18px;
      height: 18px;
      box-sizing: border-box;

      border: solid 2px transparent;
      border-top-color: var(--livewire-progress-bar-color, #29d);
      border-left-color: var(--livewire-progress-bar-color, #29d);
      border-radius: 50%;

      -webkit-animation: nprogress-spinner 400ms linear infinite;
              animation: nprogress-spinner 400ms linear infinite;
    }

    .nprogress-custom-parent {
      overflow: hidden;
      position: relative;
    }

    .nprogress-custom-parent #nprogress .spinner,
    .nprogress-custom-parent #nprogress .bar {
      position: absolute;
    }

    @-webkit-keyframes nprogress-spinner {
      0%   { -webkit-transform: rotate(0deg); }
      100% { -webkit-transform: rotate(360deg); }
    }
    @keyframes nprogress-spinner {
      0%   { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    `;let t=lu();t&&(e.nonce=t),document.head.appendChild(e)}function fa(e){hc()&&e.querySelectorAll(":popover-open").forEach(t=>{t.setAttribute("data-navigate-popover-open","");let i=t.getAnimations();t._pausedAnimations=i.map(n=>({keyframes:n.effect.getKeyframes(),options:{duration:n.effect.getTiming().duration,easing:n.effect.getTiming().easing,fill:n.effect.getTiming().fill,iterations:n.effect.getTiming().iterations},currentTime:n.currentTime,playState:n.playState})),i.forEach(n=>n.pause())})}function ha(e){hc()&&e.querySelectorAll("[data-navigate-popover-open]").forEach(t=>{t.removeAttribute("data-navigate-popover-open"),queueMicrotask(()=>{t.isConnected&&(t.showPopover(),t.getAnimations().forEach(i=>i.finish()),t._pausedAnimations&&(t._pausedAnimations.forEach(({keyframes:i,options:n,currentTime:o,now:s,playState:a})=>{let l=t.animate(i,n);l.currentTime=o}),delete t._pausedAnimations))})})}function hc(){return typeof document.createElement("div").showPopover=="function"}var Cs=[],pc=["data-csrf","aria-hidden"];function pa(e,t){let i=new DOMParser().parseFromString(e,"text/html"),n=i.documentElement,o=document.adoptNode(i.body),s=document.adoptNode(i.head);Cs=Cs.concat(Array.from(document.body.querySelectorAll("script")).map(d=>vc(yc(d.outerHTML,pc))));let a=()=>{};pd(n),md(s).finally(()=>{a()}),hd(o,Cs);let l=document.body;document.body.replaceWith(o),Alpine.destroyTree(l),t(d=>a=d)}function hd(e,t){e.querySelectorAll("script").forEach(i=>{if(i.hasAttribute("data-navigate-once")){let n=vc(yc(i.outerHTML,pc));if(t.includes(n))return}i.replaceWith(mc(i))})}function pd(e){let t=document.documentElement;Array.from(e.attributes).forEach(i=>{const n=i.name,o=i.value;t.getAttribute(n)!==o&&t.setAttribute(n,o)}),Array.from(t.attributes).forEach(i=>{e.hasAttribute(i.name)||t.removeAttribute(i.name)})}function md(e){let t=Array.from(document.head.children),i=t.map(s=>s.outerHTML),n=document.createDocumentFragment(),o=[];for(let s of Array.from(e.children))if(ga(s))if(i.includes(s.outerHTML))n.appendChild(s);else if(gc(s)&&_d(s,t)&&setTimeout(()=>window.location.reload()),_c(s))try{o.push(gd(mc(s)))}catch{}else document.head.appendChild(s);for(let s of Array.from(document.head.children))ga(s)||s.remove();for(let s of Array.from(e.children))s.tagName.toLowerCase()!=="noscript"&&document.head.appendChild(s);return Promise.all(o)}async function gd(e){return new Promise((t,i)=>{e.src?(e.onload=()=>t(),e.onerror=()=>i()):t(),document.head.appendChild(e)})}function mc(e){let t=document.createElement("script");t.textContent=e.textContent,t.async=e.async;for(let i of e.attributes)t.setAttribute(i.name,i.value);return t}function gc(e){return e.hasAttribute("data-navigate-track")}function _d(e,t){let[i,n]=ma(e);return t.some(o=>{if(!gc(o))return!1;let[s,a]=ma(o);if(s===i&&n!==a)return!0})}function ma(e){return(_c(e)?e.src:e.href).split("?")}function ga(e){return e.tagName.toLowerCase()==="link"&&e.getAttribute("rel").toLowerCase()==="stylesheet"||e.tagName.toLowerCase()==="style"||e.tagName.toLowerCase()==="script"}function _c(e){return e.tagName.toLowerCase()==="script"}function vc(e){return e.split("").reduce((t,i)=>(t=(t<<5)-t+i.charCodeAt(0),t&t),0)}function yc(e,t){let i=e;return t.forEach(n=>{const o=new RegExp(`${n}="[^"]*"|${n}='[^']*'`,"g");i=i.replace(o,"")}),i=i.replaceAll(" ",""),i.trim()}var xs=!0;function vd(e){e.navigate=i=>{let n=Cn(i);bi("alpine:navigate",{url:n,history:!1,cached:!1})||t(n)},e.navigate.disableProgressBar=()=>{xs=!1},e.addInitSelector(()=>`[${e.prefixed("navigate")}]`),e.directive("navigate",(i,{modifiers:n})=>{n.includes("hover")&&rd(i,60,()=>{let s=ia(i);s&&na(s,(a,l)=>{ra(a,s,l)})}),nd(i,s=>{let a=ia(i);a&&(na(a,(l,d)=>{ra(l,a,d)}),s(()=>{bi("alpine:navigate",{url:a,history:!1,cached:!1})||t(a)}))})});function t(i,n=!0){xs&&ld(),yd(i,(o,s)=>{bi("alpine:navigating"),ca(),xs&&ud(),bd(),Qu(),_a(e,a=>{ua(l=>{sa(l),fa(l)}),n?td(o,s):uc(s,o),pa(o,l=>{oa(document.body),da((d,f)=>{aa(d),ha(d)}),la(),l(()=>{a(()=>{setTimeout(()=>{}),va(e),bi("alpine:navigated")})})})})})}ed(i=>{i(n=>{let o=Cn(n);if(bi("alpine:navigate",{url:o,history:!0,cached:!1}))return;t(o,!1)})},(i,n,o,s)=>{let a=Cn(n);bi("alpine:navigate",{url:a,history:!0,cached:!0})||(ca(),bi("alpine:navigating"),Zu(o,s),_a(e,d=>{ua(f=>{sa(f),fa(f)}),pa(i,()=>{dd(),oa(document.body),da((f,g)=>{aa(f),ha(f)}),la(),d(()=>{va(e),bi("alpine:navigated")})})}))}),setTimeout(()=>{bi("alpine:navigated")})}function yd(e,t){od(e,t,()=>{sd(e,t)})}function _a(e,t){e.stopObservingMutations(),t(i=>{e.startObservingMutations(),queueMicrotask(()=>{i()})})}function bi(e,t){let i=new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:t});return document.dispatchEvent(i),i.defaultPrevented}function va(e){e.initTree(document.body,void 0,(t,i)=>{t._x_wasPersisted&&i()})}function bd(){let e=function(t,i){Alpine.walk(t,(n,o)=>{cd(n)&&o(),ad(n)?o():i(n,o)})};Alpine.destroyTree(document.body,e)}function wd(e){e.magic("queryString",(t,{interceptor:i})=>{let n,o=!1,s=!1;return i((a,l,d,f,g)=>{let v=n||f,{initial:w,replace:N,push:k,pop:b}=Ms(v,a,o);return d(w),s?(e.effect(()=>k(l())),b(async P=>{d(P),await Promise.resolve()})):e.effect(()=>N(l())),w},a=>{a.alwaysShow=()=>(o=!0,a),a.usePush=()=>(s=!0,a),a.as=l=>(n=l,a)})}),e.history={track:Ms}}function Ms(e,t,i=!1,n=null){let{has:o,get:s,set:a,remove:l}=Cd(),d=new URL(window.location.href),f=o(d,e),g=f?s(d,e):t,v=JSON.stringify(g),w=[!1,null,void 0].includes(n)?t:JSON.stringify(n),N=C=>JSON.stringify(C)===v,k=C=>JSON.stringify(C)===w;i&&(d=a(d,e,g)),ya(d,e,{value:g});let b=!1,P=(C,I)=>{if(b)return;let j=new URL(window.location.href);!i&&!f&&N(I)||I===void 0||!i&&k(I)?j=l(j,e):j=a(j,e,I),C(j,e,{value:I})};return{initial:g,replace(C){P(ya,C)},push(C){P(Sd,C)},pop(C){let I=j=>{!j.state||!j.state.alpine||Object.entries(j.state.alpine).forEach(([T,{value:O}])=>{if(T!==e)return;b=!0;let $=C(O);$ instanceof Promise?$.finally(()=>b=!1):b=!1})};return window.addEventListener("popstate",I),()=>window.removeEventListener("popstate",I)}}}function ya(e,t,i){let n=window.history.state||{};n.alpine||(n.alpine={}),n.alpine[t]=so(i);try{window.history.replaceState(n,"",e.toString())}catch(o){console.error(o)}}function Sd(e,t,i){let n=window.history.state||{};n.alpine||(n.alpine={}),n={alpine:{...n.alpine,[t]:so(i)}};try{window.history.pushState(n,"",e.toString())}catch(o){console.error(o)}}function so(e){if(e!==void 0)return JSON.parse(JSON.stringify(e))}function Cd(){return{has(e,t){let i=e.search;if(!i)return!1;let n=xr(i,t);return Object.keys(n).includes(t)},get(e,t){let i=e.search;return i?xr(i,t)[t]:!1},set(e,t,i){let n=xr(e.search,t);return n[t]=bc(so(i)),e.search=ba(n),e},remove(e,t){let i=xr(e.search,t);return delete i[t],e.search=ba(i),e}}}function bc(e){if(!Zs(e))return e;for(let t in e)e[t]===null?delete e[t]:e[t]=bc(e[t]);return e}function ba(e){let t=o=>typeof o=="object"&&o!==null,i=(o,s={},a="")=>(Object.entries(o).forEach(([l,d])=>{let f=a===""?l:`${a}[${l}]`;d===null?s[f]="":t(d)?s={...s,...i(d,s,f)}:s[f]=encodeURIComponent(d).replaceAll("%20","+").replaceAll("%2C",",")}),s),n=i(e);return Object.entries(n).map(([o,s])=>`${o}=${s}`).join("&")}function xr(e,t){if(e=e.replace("?",""),e==="")return{};let i=(s,a,l)=>{let[d,f,...g]=s.split(".");if(!f)return l[s]=a;l[d]===void 0&&(l[d]=isNaN(f)?{}:[]),i([f,...g].join("."),a,l[d])},n=e.split("&").map(s=>s.split("=")),o=Object.create(null);return n.forEach(([s,a])=>{if(typeof a>"u")return;a=decodeURIComponent(a.replaceAll("+","%20"));let l=decodeURIComponent(s);if(!(l.includes("[")&&l.startsWith(t)))o[s]=a;else{let f=l.replaceAll("[",".").replaceAll("]","");i(f,a,o)}}),o}var xd=Ze(ou()),Ed=Ze(au()),Ct=Ze(wt());function Td(){setTimeout(()=>Ad()),vs(document,"livewire:init"),vs(document,"livewire:initializing"),Ct.default.plugin(xd.default),Ct.default.plugin(wd),Ct.default.plugin(Ku.default),Ct.default.plugin(Xu.default),Ct.default.plugin(zu.default),Ct.default.plugin(Yu.default),Ct.default.plugin(Ju.default),Ct.default.plugin(Gu.default),Ct.default.plugin(vd),Ct.default.plugin(Ed.default),Ct.default.addRootSelector(()=>"[wire\\:id]"),Ct.default.onAttributesAdded((e,t)=>{if(!Array.from(t).some(n=>Hn(n.name)))return;let i=Ei(e,!1);i&&t.forEach(n=>{if(!Hn(n.name))return;let o=Rs(e,n.name);ht("directive.init",{el:e,component:i,directive:o,cleanup:s=>{Ct.default.onAttributeRemoved(e,o.raw,s)}})})}),Ct.default.interceptInit(Ct.default.skipDuringClone(e=>{if(!Array.from(e.attributes).some(n=>Hn(n.name)))return;if(e.hasAttribute("wire:id")){let n=Ou(e);Ct.default.onAttributeRemoved(e,"wire:id",()=>{Du(n.id)})}let t=Array.from(e.getAttributeNames()).filter(n=>Hn(n)).map(n=>Rs(e,n));t.forEach(n=>{ht("directive.global.init",{el:e,directive:n,cleanup:o=>{Ct.default.onAttributeRemoved(e,n.raw,o)}})});let i=Ei(e,!1);i&&(ht("element.init",{el:e,component:i}),t.forEach(n=>{ht("directive.init",{el:e,component:i,directive:n,cleanup:o=>{Ct.default.onAttributeRemoved(e,n.raw,o)}})}))})),Ct.default.start(),setTimeout(()=>window.Livewire.initialRenderIsFinished=!0),vs(document,"livewire:initialized")}function Ad(){let e=document.querySelector("script[data-update-uri][data-csrf]");if(!e)return;let t=e.closest("[wire\\:id]");t&&console.warn("Livewire: missing closing tags found. Ensure your template elements contain matching closing tags.",t)}var oo=Ze(wt());Je("effect",({component:e,effects:t})=>{kd(e,t.listeners||[])});function kd(e,t){t.forEach(i=>{let n=o=>{o.__livewire&&o.__livewire.receivedBy.push(e),e.$wire.call("__dispatch",i,o.detail||{})};window.addEventListener(i,n),e.addCleanup(()=>window.removeEventListener(i,n)),e.el.addEventListener(i,o=>{o.__livewire&&(o.bubbles||(o.__livewire&&o.__livewire.receivedBy.push(e.id),e.$wire.call("__dispatch",i,o.detail||{})))})})}var wa=Ze(wt()),pn=new WeakMap,Ir=new Set;Je("payload.intercept",async({assets:e})=>{if(e)for(let[t,i]of Object.entries(e))await Rd(t,async()=>{await Od(i)})});Je("component.init",({component:e})=>{let t=e.snapshot.memo.assets;t&&t.forEach(i=>{Ir.has(i)||Ir.add(i)})});Je("effect",({component:e,effects:t})=>{let i=t.scripts;i&&Object.entries(i).forEach(([n,o])=>{Pd(e,n,()=>{let s=Id(o);wa.default.dontAutoEvaluateFunctions(()=>{wa.default.evaluate(e.el,s,{$wire:e.$wire,$js:e.$wire.$js})})})})});function Pd(e,t,i){if(pn.has(e)&&pn.get(e).includes(t))return;i(),pn.has(e)||pn.set(e,[]);let n=pn.get(e);n.push(t),pn.set(e,n)}function Id(e){let i=/<script\b[^>]*>([\s\S]*?)<\/script>/gm.exec(e);return i&&i[1]?i[1].trim():""}async function Rd(e,t){Ir.has(e)||(await t(),Ir.add(e))}async function Od(e){let t=new DOMParser().parseFromString(e,"text/html"),i=document.adoptNode(t.head);for(let n of i.children)try{await Dd(n)}catch{}}async function Dd(e){return new Promise((t,i)=>{if(Ld(e)){let n=Md(e);n.src?(n.onload=()=>t(),n.onerror=()=>i()):t(),document.head.appendChild(n)}else document.head.appendChild(e),t()})}function Ld(e){return e.tagName.toLowerCase()==="script"}function Md(e){let t=document.createElement("script");t.textContent=e.textContent,t.async=e.async;for(let i of e.attributes)t.setAttribute(i.name,i.value);return t}var js=Ze(wt());js.default.magic("js",e=>Ei(e).$wire.js);Je("effect",({component:e,effects:t})=>{let i=t.js,n=t.xjs;i&&Object.entries(i).forEach(([o,s])=>{Iu(e,o,()=>{js.default.evaluate(e.el,s)})}),n&&n.forEach(({expression:o,params:s})=>{s=Object.values(s),js.default.evaluate(e.el,o,{scope:e.jsActions,params:s})})});var jd=Ze(wt());function Nd(e,t,i){let n=t.parentElement?t.parentElement.tagName.toLowerCase():"div",o=document.createElement(n);o.innerHTML=i;let s;try{s=Ei(t.parentElement)}catch{}s&&(o.__livewire=s);let a=o.firstElementChild;a.__livewire=e,ht("morph",{el:t,toEl:a,component:e}),jd.default.morph(t,a,{updating:(l,d,f,g,v)=>{if(!mn(l)){if(ht("morph.updating",{el:l,toEl:d,component:e,skip:g,childrenOnly:f,skipChildren:v}),l.__livewire_replace===!0&&(l.innerHTML=d.innerHTML),l.__livewire_replace_self===!0)return l.outerHTML=d.outerHTML,g();if(l.__livewire_ignore===!0)return g();if(l.__livewire_ignore_self===!0&&f(),l.__livewire_ignore_children===!0)return v();if(Sa(l)&&l.getAttribute("wire:id")!==e.id)return g();Sa(l)&&(d.__livewire=e)}},updated:l=>{mn(l)||ht("morph.updated",{el:l,component:e})},removing:(l,d)=>{mn(l)||ht("morph.removing",{el:l,component:e,skip:d})},removed:l=>{mn(l)||ht("morph.removed",{el:l,component:e})},adding:l=>{ht("morph.adding",{el:l,component:e})},added:l=>{mn(l)||(Ei(l).id,ht("morph.added",{el:l}))},key:l=>{if(!mn(l))return l.hasAttribute("wire:key")?l.getAttribute("wire:key"):l.hasAttribute("wire:id")?l.getAttribute("wire:id"):l.id},lookahead:!1}),ht("morphed",{el:t,component:e})}function mn(e){return typeof e.hasAttribute!="function"}function Sa(e){return e.hasAttribute("wire:id")}Je("effect",({component:e,effects:t})=>{let i=t.html;i&&queueMicrotask(()=>{queueMicrotask(()=>{Nd(e,e.el,i)})})});Je("effect",({component:e,effects:t})=>{$d(e,t.dispatches||[])});function $d(e,t){t.forEach(({name:i,params:n={},self:o=!1,to:s})=>{o?wn(e,i,n):s?io(s,i,n):lc(e,i,n)})}var Fd=Ze(wt()),Ns=new cu;Je("directive.init",({el:e,directive:t,cleanup:i,component:n})=>setTimeout(()=>{t.value==="submit"&&e.addEventListener("submit",()=>{let o=t.expression.startsWith("$parent")?n.parent.id:n.id,s=Ud(e);Ns.add(o,s)})}));Je("commit",({component:e,respond:t})=>{t(()=>{Ns.each(e.id,i=>i()),Ns.remove(e.id)})});function Ud(e){let t=[];return Fd.default.walk(e,(i,n)=>{if(e.contains(i)){if(i.hasAttribute("wire:ignore"))return n();Bd(i)?t.push(Wd(i)):Hd(i)&&t.push(qd(i))}}),()=>{for(;t.length>0;)t.shift()()}}function Bd(e){let t=e.tagName.toLowerCase();return t==="select"||t==="button"&&e.type==="submit"||t==="input"&&(e.type==="checkbox"||e.type==="radio")}function Hd(e){return["input","textarea"].includes(e.tagName.toLowerCase())}function Wd(e){let t=e.disabled?()=>{}:()=>e.disabled=!1;return e.disabled=!0,t}function qd(e){let t=e.readOnly?()=>{}:()=>e.readOnly=!1;return e.readOnly=!0,t}Je("commit.pooling",({commits:e})=>{e.forEach(t=>{let i=t.component;wc(i,n=>{n.$wire.$commit()})})});Je("commit.pooled",({pools:e})=>{Vd(e).forEach(i=>{let n=i.component;wc(n,o=>{zd(e,n,o)})})});function Vd(e){let t=[];return e.forEach(i=>{i.commits.forEach(n=>{t.push(n)})}),t}function zd(e,t,i){let n=Ca(e,t),o=Ca(e,i),s=o.findCommitByComponent(i);o.delete(s),n.add(s),e.forEach(a=>{a.empty()&&e.delete(a)})}function Ca(e,t){for(let[i,n]of e.entries())if(n.hasCommitFor(t))return n}function wc(e,t){Sc(e,i=>{(Jd(i)||Gd(i))&&t(i)})}function Jd(e){return!!e.snapshot.memo.props}function Gd(e){return!!e.snapshot.memo.bindings}function Sc(e,t){e.children.forEach(i=>{t(i),Sc(i,t)})}Je("commit",({succeed:e})=>{e(({effects:t})=>{let i=t.download;if(!i)return;let n=window.webkitURL||window.URL,o=n.createObjectURL(Kd(i.content,i.contentType)),s=document.createElement("a");s.style.display="none",s.href=o,s.download=i.name,document.body.appendChild(s),s.click(),setTimeout(function(){n.revokeObjectURL(o)},0)})});function Kd(e,t="",i=512){const n=atob(e),o=[];t===null&&(t="");for(let s=0;s<n.length;s+=i){let a=n.slice(s,s+i),l=new Array(a.length);for(let f=0;f<a.length;f++)l[f]=a.charCodeAt(f);let d=new Uint8Array(l);o.push(d)}return new Blob(o,{type:t})}var $s=new WeakSet,Fs=new WeakSet;Je("component.init",({component:e})=>{let t=e.snapshot.memo;t.lazyLoaded!==void 0&&(Fs.add(e),t.lazyIsolated!==void 0&&t.lazyIsolated===!1&&$s.add(e))});Je("commit.pooling",({commits:e})=>{e.forEach(t=>{Fs.has(t.component)&&($s.has(t.component)?(t.isolate=!1,$s.delete(t.component)):t.isolate=!0,Fs.delete(t.component))})});var xa=Ze(wt());Je("effect",({component:e,effects:t,cleanup:i})=>{let n=t.url;n&&Object.entries(n).forEach(([o,s])=>{let{name:a,as:l,use:d,alwaysShow:f,except:g}=Xd(o,s);l||(l=a);let v=[!1,null,void 0].includes(g)?Ci(e.ephemeral,a):g,{replace:w,push:N,pop:k}=Ms(l,v,f,g);if(d==="replace"){let b=xa.default.effect(()=>{w(Ci(e.reactive,a))});i(()=>xa.default.release(b))}else if(d==="push"){let b=Je("commit",({component:C,succeed:I})=>{if(e!==C)return;let j=Ci(e.canonical,a);I(()=>{let T=Ci(e.canonical,a);JSON.stringify(j)!==JSON.stringify(T)&&N(T)})}),P=k(async C=>{await e.$wire.set(a,C),document.querySelectorAll("input").forEach(I=>{I._x_forceModelUpdate&&I._x_forceModelUpdate(I._x_model.get())})});i(()=>{b(),P()})}})});function Xd(e,t){let i={use:"replace",alwaysShow:!1};return typeof t=="string"?{...i,name:t,as:t}:{...{...i,name:e,as:e},...t}}Je("request",({options:e})=>{window.Echo&&(e.headers["X-Socket-ID"]=window.Echo.socketId())});Je("effect",({component:e,effects:t})=>{(t.listeners||[]).forEach(n=>{if(n.startsWith("echo")){if(typeof window.Echo>"u"){console.warn("Laravel Echo cannot be found");return}let o=n.split(/(echo:|echo-)|:|,/);o[1]=="echo:"&&o.splice(2,0,"channel",void 0),o[2]=="notification"&&o.push(void 0,void 0);let[s,a,l,d,f,g,v]=o;if(["channel","private","encryptedPrivate"].includes(l)){let w=N=>wn(e,n,[N]);window.Echo[l](f).listen(v,w),e.addCleanup(()=>{window.Echo[l](f).stopListening(v,w)})}else if(l=="presence")if(["here","joining","leaving"].includes(v))window.Echo.join(f)[v](w=>{wn(e,n,[w])});else{let w=N=>wn(e,n,[N]);window.Echo.join(f).listen(v,w),e.addCleanup(()=>{window.Echo.leaveChannel(f)})}else l=="notification"?window.Echo.private(f).notification(w=>{wn(e,n,[w])}):console.warn("Echo channel type not yet supported")}})});var Cc=new WeakSet;Je("component.init",({component:e})=>{e.snapshot.memo.isolate===!0&&Cc.add(e)});Je("commit.pooling",({commits:e})=>{e.forEach(t=>{Cc.has(t.component)&&(t.isolate=!0)})});Qd()&&Alpine.navigate.disableProgressBar();document.addEventListener("alpine:navigate",e=>ao("livewire:navigate",e));document.addEventListener("alpine:navigating",e=>ao("livewire:navigating",e));document.addEventListener("alpine:navigated",e=>ao("livewire:navigated",e));function ao(e,t){let i=new CustomEvent(e,{cancelable:!0,bubbles:!0,detail:t.detail});document.dispatchEvent(i),i.defaultPrevented&&t.preventDefault()}function Yd(e,t,i){e.redirectUsingNavigate?Alpine.navigate(t):i()}function Qd(){return!!(document.querySelector("[data-no-progress-bar]")||window.livewireScriptConfig&&window.livewireScriptConfig.progressBar===!1)}Je("effect",({effects:e})=>{if(!e.redirect)return;let t=e.redirect;Yd(e,t,()=>{window.location.href=t})});var Es=Ze(wt());Je("morph.added",({el:e})=>{e.__addedByMorph=!0});Zt("transition",({el:e,directive:t,component:i,cleanup:n})=>{for(let a=0;a<e.attributes.length;a++)if(e.attributes[a].name.startsWith("wire:show")){Es.default.bind(e,{[t.rawName.replace("wire:transition","x-transition")]:t.expression});return}let o=Es.default.reactive({state:!e.__addedByMorph});Es.default.bind(e,{[t.rawName.replace("wire:","x-")]:"","x-show"(){return o.state}}),e.__addedByMorph&&setTimeout(()=>o.state=!0);let s=[];s.push(Je("morph.removing",({el:a,skip:l})=>{l(),a.addEventListener("transitionend",()=>{a.remove()}),o.state=!1,s.push(Je("morph",({component:d})=>{d===i&&(a.remove(),s.forEach(f=>f()))}))})),n(()=>s.forEach(a=>a()))});var Zd=new Xa;function ef(e,t){Zd.each(e,i=>{i.callback(),i.callback=()=>{}}),t()}var Ea=Ze(wt());Je("directive.init",({el:e,directive:t,cleanup:i,component:n})=>{if(["snapshot","effects","model","init","loading","poll","ignore","id","data","key","target","dirty"].includes(t.value)||Wu(t.value))return;let o=t.rawName.replace("wire:","x-on:");t.value==="submit"&&!t.modifiers.includes("prevent")&&(o=o+".prevent");let s=Ea.default.bind(e,{[o](a){let l=()=>{ef(n,()=>{Ea.default.evaluate(e,"$wire."+t.expression,{scope:{$event:a}})})};e.__livewire_confirm?e.__livewire_confirm(()=>{l()},()=>{a.stopImmediatePropagation()}):l()}});i(s)});var Sn=Ze(wt());Sn.default.addInitSelector(()=>"[wire\\:navigate]");Sn.default.addInitSelector(()=>"[wire\\:navigate\\.hover]");Sn.default.interceptInit(Sn.default.skipDuringClone(e=>{e.hasAttribute("wire:navigate")?Sn.default.bind(e,{"x-navigate":!0}):e.hasAttribute("wire:navigate.hover")&&Sn.default.bind(e,{"x-navigate.hover":!0})}));document.addEventListener("alpine:navigating",()=>{Livewire.all().forEach(e=>{e.inscribeSnapshotAndEffectsOnElement()})});Zt("confirm",({el:e,directive:t})=>{let i=t.expression,n=t.modifiers.includes("prompt");i=i.replaceAll("\\n",`
`),i===""&&(i="Are you sure?"),e.__livewire_confirm=(o,s)=>{if(n){let[a,l]=i.split("|");l?prompt(a)===l?o():s():console.warn("Livewire: Must provide expectation with wire:confirm.prompt")}else confirm(i)?o():s()}});var tf=Ze(wt());tf.default.addInitSelector(()=>"[wire\\:current]");var Us=new Map;document.addEventListener("livewire:navigated",()=>{Us.forEach(e=>e(new URL(window.location.href)))});Hu("current",({el:e,directive:t,cleanup:i})=>{let n=t.expression,o={exact:t.modifiers.includes("exact"),strict:t.modifiers.includes("strict")};if(n.startsWith("#")||!e.hasAttribute("href"))return;let s=e.getAttribute("href"),a=new URL(s,window.location.href),l=n.split(" ").filter(String),d=f=>{nf(a,f,o)?(e.classList.add(...l),e.setAttribute("data-current","")):(e.classList.remove(...l),e.removeAttribute("data-current"))};d(new URL(window.location.href)),Us.set(e,d),i(()=>Us.delete(e))});function nf(e,t,i){if(e.hostname!==t.hostname)return!1;let n=i.strict?e.pathname:e.pathname.replace(/\/+$/,""),o=i.strict?t.pathname:t.pathname.replace(/\/+$/,"");if(i.exact)return n===o;let s=n.split("/"),a=o.split("/");for(let l=0;l<s.length;l++)if(s[l]!==a[l])return!1;return!0}function Wi(e,t,i,n=null){if(i=t.modifiers.includes("remove")?!i:i,t.modifiers.includes("class")){let o=t.expression.split(" ").filter(String);i?e.classList.add(...o):e.classList.remove(...o)}else if(t.modifiers.includes("attr"))i?e.setAttribute(t.expression,!0):e.removeAttribute(t.expression);else{let o=n??window.getComputedStyle(e,null).getPropertyValue("display"),s=["inline","block","table","flex","grid","inline-flex"].filter(a=>t.modifiers.includes(a))[0]||"inline-block";s=t.modifiers.includes("remove")&&!i?o:s,e.style.display=i?s:"none"}}var Bs=new Set,Hs=new Set;window.addEventListener("offline",()=>Bs.forEach(e=>e()));window.addEventListener("online",()=>Hs.forEach(e=>e()));Zt("offline",({el:e,directive:t,cleanup:i})=>{let n=()=>Wi(e,t,!0),o=()=>Wi(e,t,!1);Bs.add(n),Hs.add(o),i(()=>{Bs.delete(n),Hs.delete(o)})});Zt("loading",({el:e,directive:t,component:i,cleanup:n})=>{let{targets:o,inverted:s}=cf(e),[a,l]=rf(t),d=sf(i,o,s,[()=>a(()=>Wi(e,t,!0)),()=>l(()=>Wi(e,t,!1))]),f=of(i,o,[()=>a(()=>Wi(e,t,!0)),()=>l(()=>Wi(e,t,!1))]);n(()=>{d(),f()})});function rf(e){if(!e.modifiers.includes("delay")||e.modifiers.includes("none"))return[s=>s(),s=>s()];let t=200,i={shortest:50,shorter:100,short:150,default:200,long:300,longer:500,longest:1e3};Object.keys(i).some(s=>{if(e.modifiers.includes(s))return t=i[s],!0});let n,o=!1;return[s=>{n=setTimeout(()=>{s(),o=!0},t)},async s=>{o?(await s(),o=!1):clearTimeout(n)}]}function sf(e,t,i,[n,o]){return Je("commit",({component:s,commit:a,respond:l})=>{s===e&&(t.length>0&&af(a,t)===i||(n(),l(()=>{o()})))})}function of(e,t,[i,n]){let o=d=>{let{id:f,property:g}=d.detail;return f!==e.id||t.length>0&&!t.map(v=>v.target).includes(g)},s=ys(window,"livewire-upload-start",d=>{o(d)||i()}),a=ys(window,"livewire-upload-finish",d=>{o(d)||n()}),l=ys(window,"livewire-upload-error",d=>{o(d)||n()});return()=>{s(),a(),l()}}function af(e,t){let{updates:i,calls:n}=e;return t.some(({target:o,params:s})=>{if(s)return n.some(({method:l,params:d})=>o===l&&s===xc(JSON.stringify(d)));if(Object.keys(i).some(l=>l.includes(".")&&l.split(".")[0]===o?!0:l===o)||n.map(l=>l.method).includes(o))return!0})}function cf(e){let t=no(e),i=[],n=!1;if(t.has("target")){let o=t.get("target"),s=o.expression;o.modifiers.includes("except")&&(n=!0),s.includes("(")&&s.includes(")")?i.push({target:o.method,params:xc(JSON.stringify(o.params))}):s.includes(",")?s.split(",").map(a=>a.trim()).forEach(a=>{i.push({target:a})}):i.push({target:s})}else{let o=["init","dirty","offline","target","loading","poll","ignore","key","id"];t.all().filter(s=>!o.includes(s.value)).map(s=>s.expression.split("(")[0]).forEach(s=>i.push({target:s}))}return{targets:i,inverted:n}}function xc(e){return btoa(encodeURIComponent(e))}Zt("stream",({el:e,directive:t,cleanup:i})=>{let{expression:n,modifiers:o}=t,s=Je("stream",({name:a,content:l,replace:d})=>{a===n&&(o.includes("replace")||d?e.innerHTML=l:e.innerHTML=e.innerHTML+l)});i(s)});Je("request",({respond:e})=>{e(t=>{let i=t.response;i.headers.has("X-Livewire-Stream")&&(t.response={ok:!0,redirected:!1,status:200,async text(){let n=await lf(i,o=>{ht("stream",o)});return Za(n)&&(this.ok=!1),n}})})});async function lf(e,t){let i=e.body.getReader(),n="";for(;;){let{done:o,value:s}=await i.read(),l=new TextDecoder().decode(s),[d,f]=uf(n+l);if(d.forEach(g=>{t(g)}),n=f,o)return n}}function uf(e){let t=/({"stream":true.*?"endStream":true})/g,i=e.match(t),n=[];if(i)for(let s=0;s<i.length;s++)n.push(JSON.parse(i[s]).body);let o=e.replace(t,"");return[n,o]}Zt("replace",({el:e,directive:t})=>{t.modifiers.includes("self")?e.__livewire_replace_self=!0:e.__livewire_replace=!0});Zt("ignore",({el:e,directive:t})=>{t.modifiers.includes("self")?e.__livewire_ignore_self=!0:t.modifiers.includes("children")?e.__livewire_ignore_children=!0:e.__livewire_ignore=!0});var Ta=Ze(wt());Ta.default.interceptInit(e=>{e.hasAttribute("wire:cloak")&&Ta.default.mutateDom(()=>e.removeAttribute("wire:cloak"))});var Ec=new Xa;Je("commit",({component:e,respond:t})=>{t(()=>{setTimeout(()=>{Ec.each(e,i=>i(!1))})})});Zt("dirty",({el:e,directive:t,component:i})=>{let n=df(e),o=!1,s=e.style.display,a=l=>{Wi(e,t,l,s),o=l};Ec.add(i,a),Alpine.effect(()=>{let l=!1;if(n.length===0)l=JSON.stringify(i.canonical)!==JSON.stringify(i.reactive);else for(let d=0;d<n.length&&!l;d++){let f=n[d];l=JSON.stringify(Ci(i.canonical,f))!==JSON.stringify(Ci(i.reactive,f))}o!==l&&a(l),o=l})});function df(e){let t=no(e),i=[];return t.has("model")&&i.push(t.get("model").expression),t.has("target")&&(i=i.concat(t.get("target").expression.split(",").map(n=>n.trim()))),i}var ff=Ze(wt());Zt("model",({el:e,directive:t,component:i,cleanup:n})=>{let{expression:o,modifiers:s}=t;if(!o)return console.warn("Livewire: [wire:model] is missing a value.",e);if(Tc(i,o))return console.warn('Livewire: [wire:model="'+o+'"] property does not exist on component: ['+i.name+"]",e);if(e.type&&e.type.toLowerCase()==="file")return fu(e,o,i,n);let a=s.includes("live"),l=s.includes("lazy")||s.includes("change"),d=s.includes("blur"),f=s.includes("debounce"),g=o.startsWith("$parent")?()=>i.$wire.$parent.$commit():()=>i.$wire.$commit(),v=pf(e)&&!f&&a?mf(g,150):g;ff.default.bind(e,{"@change"(){l&&g()},"@blur"(){d&&g()},["x-model"+hf(s)](){return{get(){return Ci(i.$wire,o)},set(w){Or(i.$wire,o,w),a&&!l&&!d&&v()}}}})});function hf(e){return e=e.filter(t=>!["lazy","defer"].includes(t)),e.length===0?"":"."+e.join(".")}function pf(e){return["INPUT","TEXTAREA"].includes(e.tagName.toUpperCase())&&!["checkbox","radio"].includes(e.type)}function Tc(e,t){if(t.startsWith("$parent")){let n=Ei(e.el.parentElement,!1);return n?Tc(n,t.split("$parent.")[1]):!0}let i=t.split(".")[0];return!Object.keys(e.canonical).includes(i)}function mf(e,t){var i;return function(){var n=this,o=arguments,s=function(){i=null,e.apply(n,o)};clearTimeout(i),i=setTimeout(s,t)}}var gf=Ze(wt());Zt("init",({el:e,directive:t})=>{let i=t.expression??"$refresh";gf.default.evaluate(e,`$wire.${i}`)});var _f=Ze(wt());Zt("poll",({el:e,directive:t})=>{let i=kf(t.modifiers,2e3),{start:n,pauseWhile:o,throttleWhile:s,stopWhen:a}=yf(()=>{vf(e,t)},i);n(),s(()=>Sf()&&xf(t)),o(()=>Ef(t)&&Tf(e)),o(()=>Cf(e)),o(()=>wf()),a(()=>Af(e))});function vf(e,t){_f.default.evaluate(e,t.expression?"$wire."+t.expression:"$wire.$commit()")}function yf(e,t=2e3){let i=[],n=[],o=[];return{start(){let s=bf(t,()=>{if(o.some(a=>a()))return s();i.some(a=>a())||n.some(a=>a())&&Math.random()<.95||e()})},pauseWhile(s){i.push(s)},throttleWhile(s){n.push(s)},stopWhen(s){o.push(s)}}}var Bi=[];function bf(e,t){if(!Bi[e]){let i={timer:setInterval(()=>i.callbacks.forEach(n=>n()),e),callbacks:new Set};Bi[e]=i}return Bi[e].callbacks.add(t),()=>{Bi[e].callbacks.delete(t),Bi[e].callbacks.size===0&&(clearInterval(Bi[e].timer),delete Bi[e])}}var co=!1;window.addEventListener("offline",()=>co=!0);window.addEventListener("online",()=>co=!1);function wf(){return co}var Ac=!1;document.addEventListener("visibilitychange",()=>{Ac=document.hidden},!1);function Sf(){return Ac}function Cf(e){return!no(e).has("poll")}function xf(e){return!e.modifiers.includes("keep-alive")}function Ef(e){return e.modifiers.includes("visible")}function Tf(e){let t=e.getBoundingClientRect();return!(t.top<(window.innerHeight||document.documentElement.clientHeight)&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.bottom>0&&t.right>0)}function Af(e){return e.isConnected===!1}function kf(e,t){let i,n=e.find(s=>s.match(/([0-9]+)ms/)),o=e.find(s=>s.match(/([0-9]+)s/));return n?i=Number(n.replace("ms","")):o&&(i=Number(o.replace("s",""))*1e3),i||t}var Ts=Ze(wt());Ts.default.interceptInit(e=>{for(let t=0;t<e.attributes.length;t++)if(e.attributes[t].name.startsWith("wire:show")){let{name:i,value:n}=e.attributes[t],o=i.split("wire:show")[1],s=n.startsWith("!")?"!$wire."+n.slice(1).trim():"$wire."+n.trim();Ts.default.bind(e,{["x-show"+o](){return Ts.default.evaluate(e,s)}})}});var As=Ze(wt());As.default.interceptInit(e=>{for(let t=0;t<e.attributes.length;t++)if(e.attributes[t].name.startsWith("wire:text")){let{name:i,value:n}=e.attributes[t],o=i.split("wire:text")[1],s=n.startsWith("!")?"!$wire."+n.slice(1).trim():"$wire."+n.trim();As.default.bind(e,{["x-text"+o](){return As.default.evaluate(e,s)}})}});var jr={directive:Zt,dispatchTo:io,start:Td,first:Nu,find:ju,getByName:Mu,all:$u,hook:Je,trigger:ht,triggerAsync:tc,dispatch:Fu,on:Bu,get navigate(){return oo.default.navigate}},lo=e=>console.warn(`Detected multiple instances of ${e} running`);window.Livewire&&lo("Livewire");window.Alpine&&lo("Alpine");window.Livewire=jr;window.Alpine=oo.default;window.livewireScriptConfig===void 0&&(window.Alpine.__fromLivewire=!0,document.addEventListener("DOMContentLoaded",()=>{window.Alpine.__fromLivewire===void 0&&lo("Alpine"),jr.start()}));oo.default;/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT *//*! Bundled license information:

tabbable/dist/index.js:
  (*!
  * tabbable 5.3.3
  * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
  *)

focus-trap/dist/focus-trap.js:
  (*!
  * focus-trap 6.9.4
  * @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
  *)
*/var Er={exports:{}},Aa;function Pf(){if(Aa)return Er.exports;Aa=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(O,$,E){return Function.prototype.apply.call(O,$,E)},i;e&&typeof e.ownKeys=="function"?i=e.ownKeys:Object.getOwnPropertySymbols?i=function(O){return Object.getOwnPropertyNames(O).concat(Object.getOwnPropertySymbols(O))}:i=function(O){return Object.getOwnPropertyNames(O)};function n(T){console&&console.warn&&console.warn(T)}var o=Number.isNaN||function(O){return O!==O};function s(){s.init.call(this)}Er.exports=s,Er.exports.once=C,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function l(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(T){if(typeof T!="number"||T<0||o(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");a=T}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(O){if(typeof O!="number"||O<0||o(O))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+O+".");return this._maxListeners=O,this};function d(T){return T._maxListeners===void 0?s.defaultMaxListeners:T._maxListeners}s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(O){for(var $=[],E=1;E<arguments.length;E++)$.push(arguments[E]);var A=O==="error",W=this._events;if(W!==void 0)A=A&&W.error===void 0;else if(!A)return!1;if(A){var z;if($.length>0&&(z=$[0]),z instanceof Error)throw z;var X=new Error("Unhandled error."+(z?" ("+z.message+")":""));throw X.context=z,X}var J=W[O];if(J===void 0)return!1;if(typeof J=="function")t(J,this,$);else for(var Se=J.length,Xe=k(J,Se),E=0;E<Se;++E)t(Xe[E],this,$);return!0};function f(T,O,$,E){var A,W,z;if(l($),W=T._events,W===void 0?(W=T._events=Object.create(null),T._eventsCount=0):(W.newListener!==void 0&&(T.emit("newListener",O,$.listener?$.listener:$),W=T._events),z=W[O]),z===void 0)z=W[O]=$,++T._eventsCount;else if(typeof z=="function"?z=W[O]=E?[$,z]:[z,$]:E?z.unshift($):z.push($),A=d(T),A>0&&z.length>A&&!z.warned){z.warned=!0;var X=new Error("Possible EventEmitter memory leak detected. "+z.length+" "+String(O)+" listeners added. Use emitter.setMaxListeners() to increase limit");X.name="MaxListenersExceededWarning",X.emitter=T,X.type=O,X.count=z.length,n(X)}return T}s.prototype.addListener=function(O,$){return f(this,O,$,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(O,$){return f(this,O,$,!0)};function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function v(T,O,$){var E={fired:!1,wrapFn:void 0,target:T,type:O,listener:$},A=g.bind(E);return A.listener=$,E.wrapFn=A,A}s.prototype.once=function(O,$){return l($),this.on(O,v(this,O,$)),this},s.prototype.prependOnceListener=function(O,$){return l($),this.prependListener(O,v(this,O,$)),this},s.prototype.removeListener=function(O,$){var E,A,W,z,X;if(l($),A=this._events,A===void 0)return this;if(E=A[O],E===void 0)return this;if(E===$||E.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete A[O],A.removeListener&&this.emit("removeListener",O,E.listener||$));else if(typeof E!="function"){for(W=-1,z=E.length-1;z>=0;z--)if(E[z]===$||E[z].listener===$){X=E[z].listener,W=z;break}if(W<0)return this;W===0?E.shift():b(E,W),E.length===1&&(A[O]=E[0]),A.removeListener!==void 0&&this.emit("removeListener",O,X||$)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(O){var $,E,A;if(E=this._events,E===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[O]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[O]),this;if(arguments.length===0){var W=Object.keys(E),z;for(A=0;A<W.length;++A)z=W[A],z!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=E[O],typeof $=="function")this.removeListener(O,$);else if($!==void 0)for(A=$.length-1;A>=0;A--)this.removeListener(O,$[A]);return this};function w(T,O,$){var E=T._events;if(E===void 0)return[];var A=E[O];return A===void 0?[]:typeof A=="function"?$?[A.listener||A]:[A]:$?P(A):k(A,A.length)}s.prototype.listeners=function(O){return w(this,O,!0)},s.prototype.rawListeners=function(O){return w(this,O,!1)},s.listenerCount=function(T,O){return typeof T.listenerCount=="function"?T.listenerCount(O):N.call(T,O)},s.prototype.listenerCount=N;function N(T){var O=this._events;if(O!==void 0){var $=O[T];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function k(T,O){for(var $=new Array(O),E=0;E<O;++E)$[E]=T[E];return $}function b(T,O){for(;O+1<T.length;O++)T[O]=T[O+1];T.pop()}function P(T){for(var O=new Array(T.length),$=0;$<O.length;++$)O[$]=T[$].listener||T[$];return O}function C(T,O){return new Promise(function($,E){function A(z){T.removeListener(O,W),E(z)}function W(){typeof T.removeListener=="function"&&T.removeListener("error",A),$([].slice.call(arguments))}j(T,O,W,{once:!0}),O!=="error"&&I(T,A,{once:!0})})}function I(T,O,$){typeof T.on=="function"&&j(T,"error",O,$)}function j(T,O,$,E){if(typeof T.on=="function")E.once?T.once(O,$):T.on(O,$);else if(typeof T.addEventListener=="function")T.addEventListener(O,function A(W){E.once&&T.removeEventListener(O,A),$(W)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return Er.exports}var Qt=Pf();class Ws extends Qt.EventEmitter{constructor(t){super(),Object.defineProperties(this,{_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get(){let i=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){const n=Math.random(),o=Math.floor(n*this._jitter*i);i=(Math.floor(n*10)&1)===0?i-o:i+o}return Math.min(i,this._max)|0}},_factor:{value:t.factor||2},_jitter:{value:t.jitter>0&&t.jitter<=1?t.jitter:0},_max:{value:t.max||1e4},_min:{value:t.min||100},_timeoutID:{value:null,writable:!0}})}backoff(){const t=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this.emit("backoff",this._attempts,t),this._timeoutID=setTimeout(()=>{this.emit("ready",this._attempts,t),this._attempts++},t)}reset(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}function Ht(e,t,i,n){function o(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function l(g){try{f(n.next(g))}catch(v){a(v)}}function d(g){try{f(n.throw(g))}catch(v){a(v)}}function f(g){g.done?s(g.value):o(g.value).then(l,d)}f((n=n.apply(e,t||[])).next())})}var kr={exports:{}},If=kr.exports,ka;function Rf(){return ka||(ka=1,function(e){(function(t,i){e.exports?e.exports=i():t.log=i()})(If,function(){var t=function(){},i="undefined",n=typeof window!==i&&typeof window.navigator!==i&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],s={},a=null;function l(b,P){var C=b[P];if(typeof C.bind=="function")return C.bind(b);try{return Function.prototype.bind.call(C,b)}catch{return function(){return Function.prototype.apply.apply(C,[b,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(b){return b==="debug"&&(b="log"),typeof console===i?!1:b==="trace"&&n?d:console[b]!==void 0?l(console,b):console.log!==void 0?l(console,"log"):t}function g(){for(var b=this.getLevel(),P=0;P<o.length;P++){var C=o[P];this[C]=P<b?t:this.methodFactory(C,b,this.name)}if(this.log=this.debug,typeof console===i&&b<this.levels.SILENT)return"No console available for logging"}function v(b){return function(){typeof console!==i&&(g.call(this),this[b].apply(this,arguments))}}function w(b,P,C){return f(b)||v.apply(this,arguments)}function N(b,P){var C=this,I,j,T,O="loglevel";typeof b=="string"?O+=":"+b:typeof b=="symbol"&&(O=void 0);function $(X){var J=(o[X]||"silent").toUpperCase();if(!(typeof window===i||!O)){try{window.localStorage[O]=J;return}catch{}try{window.document.cookie=encodeURIComponent(O)+"="+J+";"}catch{}}}function E(){var X;if(!(typeof window===i||!O)){try{X=window.localStorage[O]}catch{}if(typeof X===i)try{var J=window.document.cookie,Se=encodeURIComponent(O),Xe=J.indexOf(Se+"=");Xe!==-1&&(X=/^([^;]+)/.exec(J.slice(Xe+Se.length+1))[1])}catch{}return C.levels[X]===void 0&&(X=void 0),X}}function A(){if(!(typeof window===i||!O)){try{window.localStorage.removeItem(O)}catch{}try{window.document.cookie=encodeURIComponent(O)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function W(X){var J=X;if(typeof J=="string"&&C.levels[J.toUpperCase()]!==void 0&&(J=C.levels[J.toUpperCase()]),typeof J=="number"&&J>=0&&J<=C.levels.SILENT)return J;throw new TypeError("log.setLevel() called with invalid level: "+X)}C.name=b,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=P||w,C.getLevel=function(){return T??j??I},C.setLevel=function(X,J){return T=W(X),J!==!1&&$(T),g.call(C)},C.setDefaultLevel=function(X){j=W(X),E()||C.setLevel(X,!1)},C.resetLevel=function(){T=null,A(),g.call(C)},C.enableAll=function(X){C.setLevel(C.levels.TRACE,X)},C.disableAll=function(X){C.setLevel(C.levels.SILENT,X)},C.rebuild=function(){if(a!==C&&(I=W(a.getLevel())),g.call(C),a===C)for(var X in s)s[X].rebuild()},I=W(a?a.getLevel():"WARN");var z=E();z!=null&&(T=W(z)),g.call(C)}a=new N,a.getLogger=function(P){if(typeof P!="symbol"&&typeof P!="string"||P==="")throw new TypeError("You must supply a name when creating a logger.");var C=s[P];return C||(C=s[P]=new N(P,a.methodFactory)),C};var k=typeof window!==i?window.log:void 0;return a.noConflict=function(){return typeof window!==i&&window.log===a&&(window.log=k),a},a.getLoggers=function(){return s},a.default=a,a})}(kr)),kr.exports}var Jn=Rf();const Of=zl(Jn),Df=Jl({__proto__:null,default:Of},[Jn]);class je extends Error{constructor(t,i){super(),Object.setPrototypeOf(this,je.prototype);const n=typeof t=="string"?t:this.explanation,o=typeof t=="object"?t:i;this.message=`${this.name} (${this.code}): ${n}`,this.originalError=o}}var Et;(function(e){class t extends je{constructor(s,a){super(s,a),this.causes=[],this.code=20101,this.description="Invalid access token",this.explanation="Twilio was unable to validate your Access Token",this.name="AccessTokenInvalid",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenInvalid.prototype);const l=typeof s=="string"?s:this.explanation,d=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=d}}e.AccessTokenInvalid=t;class i extends je{constructor(s,a){super(s,a),this.causes=[],this.code=20104,this.description="Access token expired or expiration date invalid",this.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",this.name="AccessTokenExpired",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenExpired.prototype);const l=typeof s=="string"?s:this.explanation,d=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=d}}e.AccessTokenExpired=i;class n extends je{constructor(s,a){super(s,a),this.causes=[],this.code=20151,this.description="Authentication Failed",this.explanation="The Authentication with the provided JWT failed",this.name="AuthenticationFailed",this.solutions=[],Object.setPrototypeOf(this,e.AuthenticationFailed.prototype);const l=typeof s=="string"?s:this.explanation,d=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=d}}e.AuthenticationFailed=n})(Et||(Et={}));var qs;(function(e){class t extends je{constructor(n,o){super(n,o),this.causes=["The access token has an invalid Account SID, API Key, or API Key Secret."],this.code=31202,this.description="Signature validation failed.",this.explanation="The provided access token failed signature validation.",this.name="AccessTokenSignatureValidationFailed",this.solutions=["Ensure the Account SID, API Key, and API Key Secret are valid when generating your access token."],Object.setPrototypeOf(this,e.AccessTokenSignatureValidationFailed.prototype);const s=typeof n=="string"?n:this.explanation,a=typeof n=="object"?n:o;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}e.AccessTokenSignatureValidationFailed=t})(qs||(qs={}));var qi;(function(e){class t extends je{constructor(a,l){super(a,l),this.causes=[],this.code=31400,this.description="Bad Request (HTTP/SIP)",this.explanation="The request could not be understood due to malformed syntax.",this.name="BadRequest",this.solutions=[],Object.setPrototypeOf(this,e.BadRequest.prototype);const d=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}e.BadRequest=t;class i extends je{constructor(a,l){super(a,l),this.causes=["The outbound call was made to an invalid phone number.","The TwiML application sid is missing a Voice URL."],this.code=31404,this.description="Not Found (HTTP/SIP)",this.explanation="The server has not found anything matching the request.",this.name="NotFound",this.solutions=["Ensure the phone number dialed is valid.","Ensure the TwiML application is configured correctly with a Voice URL link."],Object.setPrototypeOf(this,e.NotFound.prototype);const d=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}e.NotFound=i;class n extends je{constructor(a,l){super(a,l),this.causes=[],this.code=31480,this.description="Temporarily Unavailable (SIP)",this.explanation="The callee is currently unavailable.",this.name="TemporarilyUnavailable",this.solutions=[],Object.setPrototypeOf(this,e.TemporarilyUnavailable.prototype);const d=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}e.TemporarilyUnavailable=n;class o extends je{constructor(a,l){super(a,l),this.causes=[],this.code=31486,this.description="Busy Here (SIP)",this.explanation="The callee is busy.",this.name="BusyHere",this.solutions=[],Object.setPrototypeOf(this,e.BusyHere.prototype);const d=typeof a=="string"?a:this.explanation,f=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=f}}e.BusyHere=o})(qi||(qi={}));var Vs;(function(e){class t extends je{constructor(n,o){super(n,o),this.causes=[],this.code=31603,this.description="Decline (SIP)",this.explanation="The callee does not wish to participate in the call.",this.name="Decline",this.solutions=[],Object.setPrototypeOf(this,e.Decline.prototype);const s=typeof n=="string"?n:this.explanation,a=typeof n=="object"?n:o;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}e.Decline=t})(Vs||(Vs={}));var $t;(function(e){class t extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31e3,this.description="Unknown Error",this.explanation="An unknown error has occurred. See error details for more information.",this.name="UnknownError",this.solutions=[],Object.setPrototypeOf(this,e.UnknownError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.UnknownError=t;class i extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31001,this.description="Application Not Found",this.explanation="",this.name="ApplicationNotFoundError",this.solutions=[],Object.setPrototypeOf(this,e.ApplicationNotFoundError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.ApplicationNotFoundError=i;class n extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31002,this.description="Connection Declined",this.explanation="",this.name="ConnectionDeclinedError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionDeclinedError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.ConnectionDeclinedError=n;class o extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31003,this.description="Connection Timeout",this.explanation="The server could not produce a response within a suitable amount of time.",this.name="ConnectionTimeoutError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionTimeoutError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.ConnectionTimeoutError=o;class s extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31005,this.description="Connection error",this.explanation="A connection error occurred during the call",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.ConnectionError=s;class a extends je{constructor(f,g){super(f,g),this.causes=["The incoming call was cancelled because it was not answered in time or it was accepted/rejected by another application instance registered with the same identity."],this.code=31008,this.description="Call cancelled",this.explanation="Unable to answer because the call has ended",this.name="CallCancelledError",this.solutions=[],Object.setPrototypeOf(this,e.CallCancelledError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.CallCancelledError=a;class l extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31009,this.description="Transport error",this.explanation="No transport available to send or receive messages",this.name="TransportError",this.solutions=[],Object.setPrototypeOf(this,e.TransportError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.TransportError=l})($t||($t={}));var wi;(function(e){class t extends je{constructor(f,g){super(f,g),this.causes=["Invalid content or MessageType passed to sendMessage method."],this.code=31100,this.description="The request had malformed syntax.",this.explanation="The request could not be understood due to malformed syntax.",this.name="MalformedRequestError",this.solutions=["Ensure content and MessageType passed to sendMessage method are valid."],Object.setPrototypeOf(this,e.MalformedRequestError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.MalformedRequestError=t;class i extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31101,this.description="Missing parameter array in request",this.explanation="",this.name="MissingParameterArrayError",this.solutions=[],Object.setPrototypeOf(this,e.MissingParameterArrayError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.MissingParameterArrayError=i;class n extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31102,this.description="Authorization token missing in request.",this.explanation="",this.name="AuthorizationTokenMissingError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationTokenMissingError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.AuthorizationTokenMissingError=n;class o extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31103,this.description="Maximum parameter length has been exceeded.",this.explanation="Length of parameters cannot exceed MAX_PARAM_LENGTH.",this.name="MaxParameterLengthExceededError",this.solutions=[],Object.setPrototypeOf(this,e.MaxParameterLengthExceededError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.MaxParameterLengthExceededError=o;class s extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31104,this.description="Invalid bridge token",this.explanation="",this.name="InvalidBridgeTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidBridgeTokenError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.InvalidBridgeTokenError=s;class a extends je{constructor(f,g){super(f,g),this.causes=["Client name contains invalid characters."],this.code=31105,this.description="Invalid client name",this.explanation="Client name should not contain control, space, delims, or unwise characters.",this.name="InvalidClientNameError",this.solutions=["Make sure that client name does not contain any of the invalid characters."],Object.setPrototypeOf(this,e.InvalidClientNameError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.InvalidClientNameError=a;class l extends je{constructor(f,g){super(f,g),this.causes=[],this.code=31107,this.description="The reconnect parameter is invalid",this.explanation="",this.name="ReconnectParameterInvalidError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectParameterInvalidError.prototype);const v=typeof f=="string"?f:this.explanation,w=typeof f=="object"?f:g;this.message=`${this.name} (${this.code}): ${v}`,this.originalError=w}}e.ReconnectParameterInvalidError=l})(wi||(wi={}));(function(e){class t extends je{constructor(v,w){super(v,w),this.causes=[],this.code=31201,this.description="Authorization error",this.explanation="The request requires user authentication. The server understood the request, but is refusing to fulfill it.",this.name="AuthorizationError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationError.prototype);const N=typeof v=="string"?v:this.explanation,k=typeof v=="object"?v:w;this.message=`${this.name} (${this.code}): ${N}`,this.originalError=k}}e.AuthorizationError=t;class i extends je{constructor(v,w){super(v,w),this.causes=[],this.code=31203,this.description="No valid account",this.explanation="",this.name="NoValidAccountError",this.solutions=[],Object.setPrototypeOf(this,e.NoValidAccountError.prototype);const N=typeof v=="string"?v:this.explanation,k=typeof v=="object"?v:w;this.message=`${this.name} (${this.code}): ${N}`,this.originalError=k}}e.NoValidAccountError=i;class n extends je{constructor(v,w){super(v,w),this.causes=[],this.code=31204,this.description="Invalid JWT token",this.explanation="",this.name="InvalidJWTTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidJWTTokenError.prototype);const N=typeof v=="string"?v:this.explanation,k=typeof v=="object"?v:w;this.message=`${this.name} (${this.code}): ${N}`,this.originalError=k}}e.InvalidJWTTokenError=n;class o extends je{constructor(v,w){super(v,w),this.causes=[],this.code=31205,this.description="JWT token expired",this.explanation="",this.name="JWTTokenExpiredError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpiredError.prototype);const N=typeof v=="string"?v:this.explanation,k=typeof v=="object"?v:w;this.message=`${this.name} (${this.code}): ${N}`,this.originalError=k}}e.JWTTokenExpiredError=o;class s extends je{constructor(v,w){super(v,w),this.causes=["Rate limit exceeded."],this.code=31206,this.description="Rate exceeded authorized limit.",this.explanation="The request performed exceeds the authorized limit.",this.name="RateExceededError",this.solutions=["Ensure message send rate does not exceed authorized limits."],Object.setPrototypeOf(this,e.RateExceededError.prototype);const N=typeof v=="string"?v:this.explanation,k=typeof v=="object"?v:w;this.message=`${this.name} (${this.code}): ${N}`,this.originalError=k}}e.RateExceededError=s;class a extends je{constructor(v,w){super(v,w),this.causes=[],this.code=31207,this.description="JWT token expiration too long",this.explanation="",this.name="JWTTokenExpirationTooLongError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpirationTooLongError.prototype);const N=typeof v=="string"?v:this.explanation,k=typeof v=="object"?v:w;this.message=`${this.name} (${this.code}): ${N}`,this.originalError=k}}e.JWTTokenExpirationTooLongError=a;class l extends je{constructor(v,w){super(v,w),this.causes=[],this.code=31209,this.description="Reconnect attempt is not authorized.",this.explanation="",this.name="ReconnectAttemptError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectAttemptError.prototype);const N=typeof v=="string"?v:this.explanation,k=typeof v=="object"?v:w;this.message=`${this.name} (${this.code}): ${N}`,this.originalError=k}}e.ReconnectAttemptError=l;class d extends je{constructor(v,w){super(v,w),this.causes=["The Call Message Event Type is invalid and is not understood by Twilio Voice."],this.code=31210,this.description="Call Message Event Type is invalid.",this.explanation="The Call Message Event Type is invalid and is not understood by Twilio Voice.",this.name="CallMessageEventTypeInvalidError",this.solutions=["Ensure the Call Message Event Type is Valid and understood by Twilio Voice and try again."],Object.setPrototypeOf(this,e.CallMessageEventTypeInvalidError.prototype);const N=typeof v=="string"?v:this.explanation,k=typeof v=="object"?v:w;this.message=`${this.name} (${this.code}): ${N}`,this.originalError=k}}e.CallMessageEventTypeInvalidError=d;class f extends je{constructor(v,w){super(v,w),this.causes=["The payload size of Call Message Event exceeds the authorized limit."],this.code=31212,this.description="Call Message Event Payload size exceeded authorized limit.",this.explanation="The request performed to send a Call Message Event exceeds the payload size authorized limit",this.name="PayloadSizeExceededError",this.solutions=["Reduce payload size of Call Message Event to be within the authorized limit and try again."],Object.setPrototypeOf(this,e.PayloadSizeExceededError.prototype);const N=typeof v=="string"?v:this.explanation,k=typeof v=="object"?v:w;this.message=`${this.name} (${this.code}): ${N}`,this.originalError=k}}e.PayloadSizeExceededError=f})(Et||(Et={}));var En;(function(e){class t extends je{constructor(o,s){super(o,s),this.causes=["The user denied the getUserMedia request.","The browser denied the getUserMedia request."],this.code=31401,this.description="UserMedia Permission Denied Error",this.explanation="The browser or end-user denied permissions to user media. Therefore we were unable to acquire input audio.",this.name="PermissionDeniedError",this.solutions=["The user should accept the request next time prompted. If the browser saved the deny, the user should change that permission in their browser.","The user should to verify that the browser has permission to access the microphone at this address."],Object.setPrototypeOf(this,e.PermissionDeniedError.prototype);const a=typeof o=="string"?o:this.explanation,l=typeof o=="object"?o:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.PermissionDeniedError=t;class i extends je{constructor(o,s){super(o,s),this.causes=["NotFoundError - The deviceID specified was not found.","The getUserMedia constraints were overconstrained and no devices matched."],this.code=31402,this.description="UserMedia Acquisition Failed Error",this.explanation="The browser and end-user allowed permissions, however getting the media failed. Usually this is due to bad constraints, but can sometimes fail due to browser, OS or hardware issues.",this.name="AcquisitionFailedError",this.solutions=["Ensure the deviceID being specified exists.","Try acquiring media with fewer constraints."],Object.setPrototypeOf(this,e.AcquisitionFailedError.prototype);const a=typeof o=="string"?o:this.explanation,l=typeof o=="object"?o:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.AcquisitionFailedError=i})(En||(En={}));var Yt;(function(e){class t extends je{constructor(o,s){super(o,s),this.causes=[],this.code=53e3,this.description="Signaling connection error",this.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const a=typeof o=="string"?o:this.explanation,l=typeof o=="object"?o:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.ConnectionError=t;class i extends je{constructor(o,s){super(o,s),this.causes=["The device running your application lost its Internet connection."],this.code=53001,this.description="Signaling connection disconnected",this.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",this.name="ConnectionDisconnected",this.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(this,e.ConnectionDisconnected.prototype);const a=typeof o=="string"?o:this.explanation,l=typeof o=="object"?o:s;this.message=`${this.name} (${this.code}): ${a}`,this.originalError=l}}e.ConnectionDisconnected=i})(Yt||(Yt={}));var hi;(function(e){class t extends je{constructor(s,a){super(s,a),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],this.code=53400,this.description="Client is unable to create or apply a local media description",this.explanation="Raised whenever a Client is unable to create or apply a local media description.",this.name="ClientLocalDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientLocalDescFailed.prototype);const l=typeof s=="string"?s:this.explanation,d=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=d}}e.ClientLocalDescFailed=t;class i extends je{constructor(s,a){super(s,a),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],this.code=53402,this.description="Client is unable to apply a remote media description",this.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",this.name="ClientRemoteDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientRemoteDescFailed.prototype);const l=typeof s=="string"?s:this.explanation,d=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=d}}e.ClientRemoteDescFailed=i;class n extends je{constructor(s,a){super(s,a),this.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],this.code=53405,this.description="Media connection failed",this.explanation="Raised by the Client or Server whenever a media connection fails.",this.name="ConnectionError",this.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(this,e.ConnectionError.prototype);const l=typeof s=="string"?s:this.explanation,d=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=d}}e.ConnectionError=n})(hi||(hi={}));const uo=new Map([[20101,Et.AccessTokenInvalid],[20104,Et.AccessTokenExpired],[20151,Et.AuthenticationFailed],[31202,qs.AccessTokenSignatureValidationFailed],[31400,qi.BadRequest],[31404,qi.NotFound],[31480,qi.TemporarilyUnavailable],[31486,qi.BusyHere],[31603,Vs.Decline],[31e3,$t.UnknownError],[31001,$t.ApplicationNotFoundError],[31002,$t.ConnectionDeclinedError],[31003,$t.ConnectionTimeoutError],[31005,$t.ConnectionError],[31008,$t.CallCancelledError],[31009,$t.TransportError],[31100,wi.MalformedRequestError],[31101,wi.MissingParameterArrayError],[31102,wi.AuthorizationTokenMissingError],[31103,wi.MaxParameterLengthExceededError],[31104,wi.InvalidBridgeTokenError],[31105,wi.InvalidClientNameError],[31107,wi.ReconnectParameterInvalidError],[31201,Et.AuthorizationError],[31203,Et.NoValidAccountError],[31204,Et.InvalidJWTTokenError],[31205,Et.JWTTokenExpiredError],[31206,Et.RateExceededError],[31207,Et.JWTTokenExpirationTooLongError],[31209,Et.ReconnectAttemptError],[31210,Et.CallMessageEventTypeInvalidError],[31212,Et.PayloadSizeExceededError],[31401,En.PermissionDeniedError],[31402,En.AcquisitionFailedError],[53e3,Yt.ConnectionError],[53001,Yt.ConnectionDisconnected],[53400,hi.ClientLocalDescFailed],[53402,hi.ClientRemoteDescFailed],[53405,hi.ConnectionError]]);Object.freeze(uo);const Lf=new Set([31001,31002,31003,31101,31102,31103,31104,31105,31107,31201,31202,31203,31204,31205,31207,31404,31480,31486,31603]);function zs(e,t){if(!(typeof t!="number"||!jf(t)||!(e||!Lf.has(t))))return Mf(t)}class it extends Error{constructor(t){super(t),this.name="InvalidArgumentError"}}class oi extends Error{constructor(t){super(t),this.name="InvalidStateError"}}class Nt extends Error{constructor(t){super(t),this.name="NotSupportedError"}}function Mf(e){const t=uo.get(e);if(!t)throw new it(`Error code ${e} not found`);return t}function jf(e){return uo.has(e)}const kc="@twilio/voice-sdk",xn="2.16.0",fo="https://sdk.twilio.com/js/client/sounds/releases/1.0.0",Nf=`${fo}/cowbell.mp3?cache=${xn}`,$f=2e4;class Tt{static getLogLevelInstance(t){if(!Tt.loglevelInstance)try{Tt.loglevelInstance=(t&&t.LogLevelModule?t.LogLevelModule:Df).getLogger(kc)}catch{console.warn("Cannot create custom logger"),Tt.loglevelInstance=console}return Tt.loglevelInstance}constructor(t,i){this._log=Tt.getLogLevelInstance(i),this._prefix=`[TwilioVoice][${t}]`}debug(...t){this._log.debug(this._prefix,...t)}error(...t){this._log.error(this._prefix,...t)}info(...t){this._log.info(this._prefix,...t)}setDefaultLevel(t){this._log.setDefaultLevel?this._log.setDefaultLevel(t):console.warn("Logger cannot setDefaultLevel")}warn(...t){this._log.warn(this._prefix,...t)}}Tt.levels=Jn.levels;Tt.getLogLevelInstance();const Ff=`${fo}/outgoing.mp3`;class Pa{constructor(t,i,n,o){this._name=t,this._availableDevices=i,this._beforeChange=n,this._isSupported=o,this._activeDevices=new Set,this._log=new Tt("OutputDeviceCollection")}delete(t){this._log.debug(".delete",t);const i=!!this._activeDevices.delete(t),n=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&n&&this._activeDevices.add(n);const o=Array.from(this._activeDevices.values()).map(s=>s.deviceId);return this._beforeChange(this._name,o),!!i}get(){return this._activeDevices}set(t){if(this._log.debug(".set",t),!this._isSupported)return Promise.reject(new Nt("This browser does not support audio output selection"));const i=Array.isArray(t)?t:[t];if(!i.length)return Promise.reject(new it("Must specify at least one device to set"));const n=[],o=i.map(s=>{const a=this._availableDevices.get(s);return a||n.push(s),a});return n.length?Promise.reject(new it(`Devices not found: ${n.join(", ")}`)):new Promise(s=>{s(this._beforeChange(this._name,i))}).then(()=>{this._activeDevices.clear(),o.forEach(this._activeDevices.add,this._activeDevices)})}test(t=Ff){return this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(i=>{let n;return new Promise(o=>{n=new Audio(t),n.oncanplay=o}).then(()=>n.setSinkId(i.deviceId).then(()=>n.play()))})):Promise.reject(new oi("No active output devices to test")):Promise.reject(new Nt("This browser does not support audio output selection"))}}class Uf{constructor(t){Object.defineProperties(this,{deviceId:{get(){return t.deviceId}},groupId:{get(){return t.groupId}},kind:{get(){return t.kind}},label:{get(){return t.label}}})}}function Rr(e){if(!(this instanceof Rr))return new Rr(e);this.message=e}Rr.prototype.toString=function(){return`Twilio.Exception: ${this.message}`};function qn(e){return e&&e.length?e.reduce((t,i)=>t+i)/e.length:0}function ho(e,t,i){i=i||(o=>o);const n=new Set(t.map(i));return e.filter(o=>!n.has(i(o)))}function Pc(e){return!!e.userAgent.match("Electron")}function po(e,t){const i=!!t.userAgent.match("CriOS"),n=!!t.userAgent.match("HeadlessChrome"),o=typeof e.chrome<"u"&&t.vendor==="Google Inc."&&t.userAgent.indexOf("OPR")===-1&&t.userAgent.indexOf("Edge")===-1;return i||Pc(t)||o||n}function Bf(e){return e=e||(typeof window>"u"?global.navigator:window.navigator),!!e&&typeof e.userAgent=="string"&&/firefox|fxios/i.test(e.userAgent)}function Nr(e){return e=e||(typeof window>"u"?global.navigator:window.navigator),!!e&&typeof e.userAgent=="string"&&/edge\/\d+/i.test(e.userAgent)}function Hf(e){return!!e.vendor&&e.vendor.indexOf("Apple")!==-1&&e.userAgent&&e.userAgent.indexOf("CriOS")===-1&&e.userAgent.indexOf("FxiOS")===-1}function Ic(e){return e?e.split("&").reduce((t,i)=>{const n=i.split("="),o=n[0],s=decodeURIComponent((n[1]||"").replace(/\+/g,"%20"));return o&&(t[o]=s),t},{}):""}function Js(e,t){const i=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t=t||(n=>n),i.reduce((n,o)=>{const s=t(o);return n.concat(s)},[])}function Gs(e,t,i){return new Promise((n,o)=>{function s(){e.removeListener(i,a),n()}function a(){e.removeListener(t,s),o()}e.once(t,s),e.once(i,a)})}function Rc(e,t){const i=t.map(n=>"audio/"+n.toLowerCase());return e.sort((n,o)=>{const s=i.indexOf(n.mimeType.toLowerCase()),a=i.indexOf(o.mimeType.toLowerCase()),l=s>=0?s:Number.MAX_VALUE,d=a>=0?a:Number.MAX_VALUE;return l-d})}const Wf=Rr,Oc=Object.freeze(Object.defineProperty({__proto__:null,Exception:Wf,average:qn,difference:ho,flatMap:Js,isChrome:po,isElectron:Pc,isFirefox:Bf,isLegacyEdge:Nr,isSafari:Hf,promisifyEvents:Gs,queryToJson:Ic,sortByMimeTypes:Rc},Symbol.toStringTag,{value:"Module"})),qf={audioinput:"Audio Input",audiooutput:"Audio Output"};class Ks extends Qt.EventEmitter{get audioConstraints(){return this._audioConstraints}get inputDevice(){return this._inputDevice}get inputStream(){return this._processedStream||this._selectedInputDeviceStream}get processedStream(){return this._processedStream}constructor(t,i,n){super(),this.availableInputDevices=new Map,this.availableOutputDevices=new Map,this._audioConstraints=null,this._defaultInputDeviceStream=null,this._enabledSounds={[oe.SoundName.Disconnect]:!0,[oe.SoundName.Incoming]:!0,[oe.SoundName.Outgoing]:!0},this._inputDevice=null,this._inputDevicePromise=null,this._isPollingInputVolume=!1,this._log=new Tt("AudioHelper"),this._processedStream=null,this._selectedInputDeviceStream=null,this._unknownDeviceIndexes={audioinput:{},audiooutput:{}},this._updateAvailableDevices=()=>!this._mediaDevices||!this._enumerateDevices?Promise.reject("Enumeration not supported"):this._enumerateDevices().then(l=>{this._updateDevices(l.filter(f=>f.kind==="audiooutput"),this.availableOutputDevices,this._removeLostOutput),this._updateDevices(l.filter(f=>f.kind==="audioinput"),this.availableInputDevices,this._removeLostInput);const d=this.availableOutputDevices.get("default")||Array.from(this.availableOutputDevices.values())[0];[this.speakerDevices,this.ringtoneDevices].forEach(f=>{!f.get().size&&this.availableOutputDevices.size&&this.isOutputSelectionSupported&&f.set(d.deviceId).catch(g=>{this._log.warn(`Unable to set audio output devices. ${g}`)})})}),this._removeLostInput=l=>{if(!this.inputDevice||this.inputDevice.deviceId!==l.deviceId)return!1;this._destroyProcessedStream(),this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume();const d=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return d&&this.setInputDevice(d.deviceId),!0},this._removeLostOutput=l=>{const d=this.speakerDevices.delete(l),f=this.ringtoneDevices.delete(l);return d||f},n=Object.assign({AudioContext:typeof AudioContext<"u"&&AudioContext,setSinkId:typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId},n),this._beforeSetInputDevice=n.beforeSetInputDevice||(()=>Promise.resolve()),this._updateUserOptions(n),this._audioProcessorEventObserver=n.audioProcessorEventObserver,this._mediaDevices=n.mediaDevices||navigator.mediaDevices,this._onActiveInputChanged=i,this._enumerateDevices=typeof n.enumerateDevices=="function"?n.enumerateDevices:this._mediaDevices&&this._mediaDevices.enumerateDevices.bind(this._mediaDevices);const o=!!(n.AudioContext||n.audioContext),s=!!this._enumerateDevices;n.enabledSounds&&(this._enabledSounds=n.enabledSounds);const a=typeof n.setSinkId=="function";this.isOutputSelectionSupported=s&&a,this.isVolumeSupported=o,this.isVolumeSupported&&(this._audioContext=n.audioContext||n.AudioContext&&new n.AudioContext,this._audioContext&&(this._inputVolumeAnalyser=this._audioContext.createAnalyser(),this._inputVolumeAnalyser.fftSize=32,this._inputVolumeAnalyser.smoothingTimeConstant=.3)),this.ringtoneDevices=new Pa("ringtone",this.availableOutputDevices,t,this.isOutputSelectionSupported),this.speakerDevices=new Pa("speaker",this.availableOutputDevices,t,this.isOutputSelectionSupported),this.addListener("newListener",l=>{l==="inputVolume"&&this._maybeStartPollingVolume()}),this.addListener("removeListener",l=>{l==="inputVolume"&&this._maybeStopPollingVolume()}),this.once("newListener",()=>{this.isOutputSelectionSupported||this._log.warn("Warning: This browser does not support audio output selection."),this.isVolumeSupported||this._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),s&&this._initializeEnumeration(),navigator&&navigator.permissions&&typeof navigator.permissions.query=="function"?navigator.permissions.query({name:"microphone"}).then(l=>{if(l.state!=="granted"){const d=()=>{this._updateAvailableDevices(),this._stopMicrophonePermissionListener()};l.addEventListener("change",d),this._microphonePermissionStatus=l,this._onMicrophonePermissionStatusChanged=d}}).catch(l=>this._log.warn(`Warning: unable to listen for microphone permission changes. ${l}`)):this._log.warn("Warning: current browser does not support permissions API.")}_destroy(){this._stopDefaultInputDeviceStream(),this._stopSelectedInputDeviceStream(),this._destroyProcessedStream(),this._maybeStopPollingVolume(),this.removeAllListeners(),this._stopMicrophonePermissionListener(),this._unbind()}_getInputDevicePromise(){return this._inputDevicePromise}_maybeStartPollingVolume(){if(!this.isVolumeSupported||!this.inputStream||(this._updateVolumeSource(),this._isPollingInputVolume||!this._inputVolumeAnalyser))return;const t=this._inputVolumeAnalyser.frequencyBinCount,i=new Uint8Array(t);this._isPollingInputVolume=!0;const n=()=>{if(this._isPollingInputVolume){if(this._inputVolumeAnalyser){this._inputVolumeAnalyser.getByteFrequencyData(i);const o=qn(i);this.emit("inputVolume",o/255)}requestAnimationFrame(n)}};requestAnimationFrame(n)}_maybeStopPollingVolume(){this.isVolumeSupported&&(!this._isPollingInputVolume||this.inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))}_openDefaultDeviceWithConstraints(t){return this._log.info("Opening default device with constraints",t),this._getUserMedia(t).then(i=>(this._log.info("Opened default device. Updating available devices."),this._updateAvailableDevices().catch(n=>{this._log.warn("Unable to updateAvailableDevices after gUM call",n)}),this._defaultInputDeviceStream=i,this._maybeCreateProcessedStream(i)))}_stopDefaultInputDeviceStream(){this._defaultInputDeviceStream&&(this._log.info("stopping default device stream"),this._defaultInputDeviceStream.getTracks().forEach(t=>t.stop()),this._defaultInputDeviceStream=null,this._destroyProcessedStream())}_unbind(){var t;!((t=this._mediaDevices)===null||t===void 0)&&t.removeEventListener&&this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices)}_updateUserOptions(t){typeof t.enumerateDevices=="function"&&(this._enumerateDevices=t.enumerateDevices),typeof t.getUserMedia=="function"&&(this._getUserMedia=t.getUserMedia)}addProcessor(t){if(this._log.debug(".addProcessor"),this._processor)throw new Nt("Adding multiple AudioProcessors is not supported at this time.");if(typeof t!="object"||t===null)throw new it("Missing AudioProcessor argument.");if(typeof t.createProcessedStream!="function")throw new it("Missing createProcessedStream() method.");if(typeof t.destroyProcessedStream!="function")throw new it("Missing destroyProcessedStream() method.");return this._processor=t,this._audioProcessorEventObserver.emit("add"),this._restartStreams()}disconnect(t){return this._log.debug(".disconnect",t),this._maybeEnableSound(oe.SoundName.Disconnect,t)}incoming(t){return this._log.debug(".incoming",t),this._maybeEnableSound(oe.SoundName.Incoming,t)}outgoing(t){return this._log.debug(".outgoing",t),this._maybeEnableSound(oe.SoundName.Outgoing,t)}removeProcessor(t){if(this._log.debug(".removeProcessor"),typeof t!="object"||t===null)throw new it("Missing AudioProcessor argument.");if(this._processor!==t)throw new it("Cannot remove an AudioProcessor that has not been previously added.");return this._destroyProcessedStream(),this._processor=null,this._audioProcessorEventObserver.emit("remove"),this._restartStreams()}setAudioConstraints(t){return this._log.debug(".setAudioConstraints",t),this._audioConstraints=Object.assign({},t),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}setInputDevice(t){return this._log.debug(".setInputDevice",t),this._setInputDevice(t,!1)}unsetAudioConstraints(){return this._log.debug(".unsetAudioConstraints"),this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}unsetInputDevice(){return this._log.debug(".unsetInputDevice",this.inputDevice),this.inputDevice?(this._destroyProcessedStream(),this._onActiveInputChanged(null).then(()=>{this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume()})):Promise.resolve()}_destroyProcessedStream(){if(this._processor&&this._processedStream){this._log.info("destroying processed stream");const t=this._processedStream;this._processedStream.getTracks().forEach(i=>i.stop()),this._processedStream=null,this._processor.destroyProcessedStream(t),this._audioProcessorEventObserver.emit("destroy")}}_getUnknownDeviceIndex(t){const i=t.deviceId,n=t.kind;let o=this._unknownDeviceIndexes[n][i];return o||(o=Object.keys(this._unknownDeviceIndexes[n]).length+1,this._unknownDeviceIndexes[n][i]=o),o}_initializeEnumeration(){if(!this._mediaDevices||!this._enumerateDevices)throw new Nt("Enumeration is not supported");this._mediaDevices.addEventListener&&this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._updateAvailableDevices().then(()=>{this.isOutputSelectionSupported&&Promise.all([this.speakerDevices.set("default"),this.ringtoneDevices.set("default")]).catch(t=>{this._log.warn(`Warning: Unable to set audio output devices. ${t}`)})})}_maybeCreateProcessedStream(t){return this._processor?(this._log.info("Creating processed stream"),this._processor.createProcessedStream(t).then(i=>(this._processedStream=i,this._audioProcessorEventObserver.emit("create"),this._processedStream))):Promise.resolve(t)}_maybeEnableSound(t,i){return typeof i<"u"&&(this._enabledSounds[t]=i),this._enabledSounds[t]}_replaceStream(t){this._log.info("Replacing with new stream."),this._selectedInputDeviceStream&&(this._log.info("Old stream detected. Stopping tracks."),this._stopSelectedInputDeviceStream()),this._selectedInputDeviceStream=t}_restartStreams(){if(this.inputDevice&&this._selectedInputDeviceStream)return this._log.info("Restarting selected input device"),this._setInputDevice(this.inputDevice.deviceId,!0);if(this._defaultInputDeviceStream){const t=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return this._log.info("Restarting default input device, now becoming selected."),this._setInputDevice(t.deviceId,!0)}return Promise.resolve()}_setInputDevice(t,i){return Ht(this,void 0,void 0,function*(){const n=()=>Ht(this,void 0,void 0,function*(){if(yield this._beforeSetInputDevice(),typeof t!="string")return Promise.reject(new it("Must specify the device to set"));const o=this.availableInputDevices.get(t);if(!o)return Promise.reject(new it(`Device not found: ${t}`));if(this._log.info("Setting input device. ID: "+t),this._inputDevice&&this._inputDevice.deviceId===t&&this._selectedInputDeviceStream){if(!i)return Promise.resolve();this._log.info("Same track detected on setInputDevice, stopping old tracks."),this._stopSelectedInputDeviceStream()}this._stopDefaultInputDeviceStream();const s={audio:Object.assign({deviceId:{exact:t}},this.audioConstraints)};return this._log.info("setInputDevice: getting new tracks."),this._getUserMedia(s).then(a=>(this._destroyProcessedStream(),this._maybeCreateProcessedStream(a).then(l=>(this._log.info("setInputDevice: invoking _onActiveInputChanged."),this._onActiveInputChanged(l).then(()=>{this._replaceStream(a),this._inputDevice=o,this._maybeStartPollingVolume()})))))});return this._inputDevicePromise=n().finally(()=>{this._inputDevicePromise=null})})}_stopMicrophonePermissionListener(){var t;!((t=this._microphonePermissionStatus)===null||t===void 0)&&t.removeEventListener&&this._microphonePermissionStatus.removeEventListener("change",this._onMicrophonePermissionStatusChanged)}_stopSelectedInputDeviceStream(){this._selectedInputDeviceStream&&(this._log.info("Stopping selected device stream"),this._selectedInputDeviceStream.getTracks().forEach(t=>t.stop()))}_updateDevices(t,i,n){const o=t.map(f=>f.deviceId),s=Array.from(i.values()).map(f=>f.deviceId),a=[],l=ho(s,o);l.forEach(f=>{const g=i.get(f);g&&(i.delete(f),n(g)&&a.push(g))});let d=!1;if(t.forEach(f=>{const g=i.get(f.deviceId),v=this._wrapMediaDeviceInfo(f);(!g||g.label!==v.label)&&(i.set(f.deviceId,v),d=!0)}),d||l.length){const f="default",g=this.inputDevice&&this.inputDevice.deviceId===f,v=this._defaultInputDeviceStream&&this.availableInputDevices.get(f);(g||v)&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),setTimeout(()=>{this._setInputDevice(f,!0)},0)),this._log.debug("#deviceChange",a),this.emit("deviceChange",a)}}_updateVolumeSource(){if(!(!this.inputStream||!this._audioContext||!this._inputVolumeAnalyser)){this._inputVolumeSource&&this._inputVolumeSource.disconnect();try{this._inputVolumeSource=this._audioContext.createMediaStreamSource(this.inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser)}catch(t){this._log.warn("Unable to update volume source",t),delete this._inputVolumeSource}}}_wrapMediaDeviceInfo(t){const i={deviceId:t.deviceId,groupId:t.groupId,kind:t.kind,label:t.label};if(!i.label)if(i.deviceId==="default")i.label="Default";else{const n=this._getUnknownDeviceIndex(t);i.label=`Unknown ${qf[i.kind]} Device ${n}`}return new Uf(i)}}Ks||(Ks={});var Vf=Ks;class zf extends Qt.EventEmitter{constructor(){super(),this._log=new Tt("AudioProcessorEventObserver"),this._log.info("Creating AudioProcessorEventObserver instance"),this.on("enabled",()=>this._reEmitEvent("enabled")),this.on("add",()=>this._reEmitEvent("add")),this.on("remove",()=>this._reEmitEvent("remove")),this.on("create",()=>this._reEmitEvent("create-processed-stream")),this.on("destroy",()=>this._reEmitEvent("destroy-processed-stream"))}destroy(){this.removeAllListeners()}_reEmitEvent(t){this._log.info(`AudioProcessor:${t}`),this.emit("event",{name:t,group:"audio-processor"})}}const Jf={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]};class Gf{constructor(t){this._context=t,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(i=>{i.connect(this._context.destination),i.gain.value=.1,this._gainNodes.push(i)})}cleanup(){this._gainNodes.forEach(t=>{t.disconnect()})}play(t){const i=Jf[t];if(!i)throw new it("Invalid DTMF sound name");[this._context.createOscillator(),this._context.createOscillator()].forEach((o,s)=>{o.type="sine",o.frequency.value=i[s],o.connect(this._gainNodes[s]),o.start(),o.stop(this._context.currentTime+.1),o.addEventListener("ended",()=>o.disconnect())})}}function Kf(e,t,i){const n=JSON.stringify(t.body||{}),o=new Headers;t.headers=t.headers||[],Object.entries(t.headers).forEach(([s,a])=>o.append(s,a)),fetch(t.url,{body:n,headers:o,method:e}).then(s=>s.text(),i).then(s=>i(null,s),i)}const mo=Kf;mo.get=function(t,i){return new this("GET",t,i)};mo.post=function(t,i){return new this("POST",t,i)};class Wt extends Qt.EventEmitter{constructor(t,i,n){if(super(),!(this instanceof Wt))return new Wt(t,i,n);n=Object.assign({defaultPayload(){return{}}},n);let o=n.defaultPayload;typeof o!="function"&&(o=()=>Object.assign({},n.defaultPayload));let s=!0;const a=Object.assign({app_name:void 0,app_version:void 0},n.metadata);Object.defineProperties(this,{_defaultPayload:{value:o},_host:{value:n.host,writable:!0},_isEnabled:{get(){return s},set(l){s=l}},_log:{value:new Tt("EventPublisher")},_request:{value:n.request||mo,writable:!0},_token:{value:i,writable:!0},isEnabled:{enumerable:!0,get(){return s}},metadata:{enumerable:!0,get(){return a}},productName:{enumerable:!0,value:t},token:{enumerable:!0,get(){return this._token}}})}}Wt.prototype._post=function(t,i,n,o,s,a,l){if(!this.isEnabled&&!l||!this._host)return this._log.debug("Publishing cancelled",JSON.stringify({isEnabled:this.isEnabled,force:l,host:this._host})),Promise.resolve();if(!a||(!a.parameters||!a.parameters.CallSid)&&!a.outboundConnectionId)return a?this._log.debug("Publishing cancelled. Missing connection info",JSON.stringify({outboundConnectionId:a.outboundConnectionId,parameters:a.parameters})):this._log.debug("Publishing cancelled. Missing connection object"),Promise.resolve();const d={group:n,level:i.toUpperCase(),name:o,payload:s&&s.forEach?s.slice(0):Object.assign(this._defaultPayload(a),s),payload_type:"application/json",private:!1,publisher:this.productName,timestamp:new Date().toISOString()};this.metadata&&(d.publisher_metadata=this.metadata),t==="EndpointEvents"&&this._log.debug("Publishing insights",JSON.stringify({endpointName:t,event:d,force:l,host:this._host}));const f={body:d,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token},url:`https://${this._host}/v4/${t}`};return new Promise((g,v)=>{this._request.post(f,w=>{w?(this.emit("error",w),v(w)):g()})}).catch(g=>{this._log.error(`Unable to post ${n} ${o} event to Insights. Received error: ${g}`)})};Wt.prototype.post=function(t,i,n,o,s,a){return this._post("EndpointEvents",t,i,n,o,s,a)};Wt.prototype.debug=function(t,i,n,o){return this.post("debug",t,i,n,o)};Wt.prototype.info=function(t,i,n,o){return this.post("info",t,i,n,o)};Wt.prototype.warn=function(t,i,n,o){return this.post("warning",t,i,n,o)};Wt.prototype.error=function(t,i,n,o){return this.post("error",t,i,n,o)};Wt.prototype.postMetrics=function(t,i,n,o,s){return new Promise(a=>{const l=n.map(Xf).map(d=>Object.assign(d,o));a(this._post("EndpointMetrics","info",t,i,l,s))})};Wt.prototype.setHost=function(t){this._host=t};Wt.prototype.setToken=function(t){this._token=t};Wt.prototype.enable=function(){this._isEnabled=!0};Wt.prototype.disable=function(){this._isEnabled=!1};function Xf(e){return{audio_codec:e.codecName,audio_level_in:e.audioInputLevel,audio_level_out:e.audioOutputLevel,bytes_received:e.bytesReceived,bytes_sent:e.bytesSent,call_volume_input:e.inputVolume,call_volume_output:e.outputVolume,jitter:e.jitter,mos:e.mos&&Math.round(e.mos*100)/100,packets_lost:e.packetsLost,packets_lost_fraction:e.packetsLostFraction&&Math.round(e.packetsLostFraction*100)/100,packets_received:e.packetsReceived,rtt:e.rtt,timestamp:new Date(e.timestamp).toISOString(),total_bytes_received:e.totals.bytesReceived,total_bytes_sent:e.totals.bytesSent,total_packets_lost:e.totals.packetsLost,total_packets_received:e.totals.packetsReceived,total_packets_sent:e.totals.packetsSent}}const Ia=32767,Ra=typeof window<"u"?window.RTCStatsReport:void 0;function ai(e){if(!(this instanceof ai))return new ai(e);const t=this;Object.defineProperties(this,{_map:{value:e},size:{enumerable:!0,get(){return t._map.size}}}),this[Symbol.iterator]=e[Symbol.iterator]}Ra&&(ai.prototype=Object.create(Ra.prototype),ai.prototype.constructor=ai);["entries","forEach","get","has","keys","values"].forEach(e=>{ai.prototype[e]=function(...t){return this._map[e](...t)}});ai.fromArray=function(t){return new ai(t.reduce((i,n)=>(i.set(n.id,n),i),new Map))};ai.fromRTCStatsResponse=function(t){let i;const n=new Map,o=t.result().reduce((s,a)=>{const l=a.id;switch(a.type){case"googCertificate":s.set(l,ih(a));break;case"datachannel":s.set(l,nh(a));break;case"googCandidatePair":Lc(a,"googActiveConnection")&&(i=l),s.set(l,th(a));break;case"localcandidate":s.set(l,Da(a,!1));break;case"remotecandidate":s.set(l,Da(a,!0));break;case"ssrc":Vi(a,"packetsReceived")?s.set(`rtp-${l}`,Zf(a)):s.set(`rtp-${l}`,eh(a)),s.set(`track-${l}`,Qf(a)),s.set(`codec-${l}`,Yf(a));break;case"googComponent":const d=Oa(a);n.set(d.selectedCandidatePairId,l),s.set(l,Oa(a));break}return s},new Map);if(i){const s=n.get(i);s&&(o.get(s).dtlsState="connected")}return new ai(o)};function Oa(e){return{bytesReceived:void 0,bytesSent:void 0,dtlsState:void 0,id:e.id,localCertificateId:e.stat("localCertificateId"),remoteCertificateId:e.stat("remoteCertificateId"),rtcpTransportStatsId:void 0,selectedCandidatePairId:e.stat("selectedCandidatePairId"),timestamp:Date.parse(e.timestamp),type:"transport"}}function Yf(e){return{channels:void 0,clockRate:void 0,id:e.id,implementation:void 0,mimeType:`${e.stat("mediaType")}/${e.stat("googCodecName")}`,payloadType:void 0,sdpFmtpLine:void 0,timestamp:Date.parse(e.timestamp),type:"codec"}}function Qf(e){return{audioLevel:Vi(e,"audioOutputLevel")?tt(e,"audioOutputLevel")/Ia:(tt(e,"audioInputLevel")||0)/Ia,detached:void 0,echoReturnLoss:Ys(e,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:Ys(e,"googEchoCancellationReturnLossEnhancement"),ended:void 0,frameHeight:Vi(e,"googFrameHeightReceived")?tt(e,"googFrameHeightReceived"):tt(e,"googFrameHeightSent"),frameWidth:Vi(e,"googFrameWidthReceived")?tt(e,"googFrameWidthReceived"):tt(e,"googFrameWidthSent"),framesCorrupted:void 0,framesDecoded:tt(e,"framesDecoded"),framesDropped:void 0,framesPerSecond:void 0,framesReceived:void 0,framesSent:tt(e,"framesEncoded"),fullFramesLost:void 0,id:e.id,kind:e.stat("mediaType"),partialFramesLost:void 0,remoteSource:void 0,ssrcIds:void 0,timestamp:Date.parse(e.timestamp),trackIdentifier:e.stat("googTrackId"),type:"track"}}function Dc(e,t){return{associateStatsId:void 0,codecId:`codec-${e.id}`,firCount:t?tt(e,"googFirsSent"):void 0,id:e.id,isRemote:void 0,mediaType:e.stat("mediaType"),nackCount:t?tt(e,"googNacksSent"):tt(e,"googNacksReceived"),pliCount:t?tt(e,"googPlisSent"):tt(e,"googPlisReceived"),qpSum:tt(e,"qpSum"),sliCount:void 0,ssrc:e.stat("ssrc"),timestamp:Date.parse(e.timestamp),trackId:`track-${e.id}`,transportId:e.stat("transportId")}}function Zf(e){const t=Dc(e,!0);return Object.assign(t,{burstDiscardCount:void 0,burstDiscardRate:void 0,burstLossCount:void 0,burstLossRate:void 0,burstPacketsDiscarded:void 0,burstPacketsLost:void 0,bytesReceived:tt(e,"bytesReceived"),fractionLost:void 0,framesDecoded:tt(e,"framesDecoded"),gapDiscardRate:void 0,gapLossRate:void 0,jitter:Xs(e.stat("googJitterReceived")),packetsDiscarded:void 0,packetsLost:tt(e,"packetsLost"),packetsReceived:tt(e,"packetsReceived"),packetsRepaired:void 0,roundTripTime:Xs(e.stat("googRtt")),type:"inbound-rtp"}),t}function eh(e){const t=Dc(e,!1);return Object.assign(t,{bytesSent:tt(e,"bytesSent"),framesEncoded:tt(e,"framesEncoded"),packetsSent:tt(e,"packetsSent"),remoteTimestamp:void 0,targetBitrate:void 0,type:"outbound-rtp"}),t}function Da(e,t){return{candidateType:rh(e.stat("candidateType")),deleted:void 0,id:e.id,ip:e.stat("ipAddress"),isRemote:t,port:tt(e,"portNumber"),priority:Ys(e,"priority"),protocol:e.stat("transport"),relayProtocol:void 0,timestamp:Date.parse(e.timestamp),transportId:void 0,type:t?"remote-candidate":"local-candidate",url:void 0}}function th(e){return{availableIncomingBitrate:void 0,availableOutgoingBitrate:void 0,bytesReceived:tt(e,"bytesReceived"),bytesSent:tt(e,"bytesSent"),consentRequestsSent:tt(e,"consentRequestsSent"),currentRoundTripTime:Xs(e.stat("googRtt")),id:e.id,lastPacketReceivedTimestamp:void 0,lastPacketSentTimestamp:void 0,localCandidateId:e.stat("localCandidateId"),nominated:void 0,priority:void 0,readable:void 0,remoteCandidateId:e.stat("remoteCandidateId"),requestsReceived:tt(e,"requestsReceived"),requestsSent:tt(e,"requestsSent"),responsesReceived:tt(e,"responsesReceived"),responsesSent:tt(e,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,state:void 0,timestamp:Date.parse(e.timestamp),totalRoundTripTime:void 0,transportId:e.stat("googChannelId"),type:"candidate-pair",writable:Lc(e,"googWritable")}}function ih(e){return{base64Certificate:e.stat("googDerBase64"),fingerprint:e.stat("googFingerprint"),fingerprintAlgorithm:e.stat("googFingerprintAlgorithm"),id:e.id,issuerCertificateId:e.stat("googIssuerId"),timestamp:Date.parse(e.timestamp),type:"certificate"}}function nh(e){return{bytesReceived:void 0,bytesSent:void 0,datachannelid:e.stat("datachannelid"),id:e.id,label:e.stat("label"),messagesReceived:void 0,messagesSent:void 0,protocol:e.stat("protocol"),state:e.stat("state"),timestamp:Date.parse(e.timestamp),transportId:e.stat("transportId"),type:"data-channel"}}function Xs(e){return isNaN(e)||e===""?void 0:parseInt(e,10)/1e3}function rh(e){switch(e){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";case"host":case"relay":default:return e}}function tt(e,t){const i=e.stat(t);return Vi(e,t)?parseInt(i,10):void 0}function Ys(e,t){const i=e.stat(t);return Vi(e,t)?parseFloat(i):void 0}function Lc(e,t){const i=e.stat(t);return Vi(e,t)?i==="true"||i===!0:void 0}function Vi(e,t){const i=e.stat(t);return typeof i<"u"&&i!==""}const sh="PeerConnection is null",oh="WebRTC statistics are unsupported";function gn(e,t){return typeof e.get=="function"?e.get(t):e.find(i=>i.id===t)}function Mc(e){if(!e)return Promise.reject(new it(sh));if(typeof e.getStats!="function")return Promise.reject(new Nt(oh));let t;try{t=e.getStats()}catch{t=new Promise(n=>e.getStats(n)).then(ai.fromRTCStatsResponse)}return t}function ah(e,t){return t=Object.assign({createRTCSample:uh},t),Mc(e).then(t.createRTCSample)}function ch(e){return Mc(e).then(t=>{const{candidatePairs:i,localCandidates:n,remoteCandidates:o,transport:s}=Array.from(t.values()).reduce((d,f)=>{switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(g=>{d[g]||(d[g]=[])}),f.type){case"candidate-pair":d.candidatePairs.push(f);break;case"local-candidate":d.localCandidates.push(f);break;case"remote-candidate":d.remoteCandidates.push(f);break;case"transport":f.selectedCandidatePairId&&(d.transport=f);break}return d},{}),a=i.find(d=>d.selected||s&&d.id===s.selectedCandidatePairId);let l;return a&&(l={localCandidate:n.find(d=>d.id===a.localCandidateId),remoteCandidate:o.find(d=>d.id===a.remoteCandidateId)}),{iceCandidateStats:[...n,...o],selectedIceCandidatePairStats:l}})}function lh(){}function uh(e){let t=null;const i=new lh;let n;Array.from(e.values()).forEach(d=>{if(d.isRemote)return;const f=d.type.replace("-","");if(n=n||d.timestamp,d.remoteId){const g=gn(e,d.remoteId);g&&g.roundTripTime&&(i.rtt=g.roundTripTime*1e3)}switch(f){case"inboundrtp":i.timestamp=i.timestamp||d.timestamp,i.jitter=d.jitter*1e3,i.packetsLost=d.packetsLost,i.packetsReceived=d.packetsReceived,i.bytesReceived=d.bytesReceived;break;case"outboundrtp":if(i.timestamp=d.timestamp,i.packetsSent=d.packetsSent,i.bytesSent=d.bytesSent,d.codecId){const g=gn(e,d.codecId);i.codecName=g?g.mimeType&&g.mimeType.match(/(.*\/)?(.*)/)[2]:d.codecId}break;case"transport":t=d.id;break}}),i.timestamp||(i.timestamp=n);const o=gn(e,t);if(!o)return i;const s=gn(e,o.selectedCandidatePairId);if(!s)return i;const a=gn(e,s.localCandidateId),l=gn(e,s.remoteCandidateId);return i.rtt||(i.rtt=s&&s.currentRoundTripTime*1e3),Object.assign(i,{localAddress:a&&(a.address||a.ip),remoteAddress:l&&(l.address||l.ip)}),i}class ft extends Qt.EventEmitter{constructor(t,i){super(),this._hasInsightsErrored=!1,this._log=new Tt("PreflightTest"),this._networkTiming={},this._options={codecPreferences:[se.Codec.PCMU,se.Codec.Opus],edge:"roaming",fakeMicInput:!1,logLevel:"error",signalingTimeoutMs:1e4},this._status=ft.Status.Connecting,Object.assign(this._options,i),this._samples=[],this._warnings=[],this._startTime=Date.now(),this._initDevice(t,Object.assign(Object.assign({},this._options),{fileInputStream:this._options.fakeMicInput?this._getStreamFromFile():void 0}));const n=["codecPreferences","edge","fakeMicInput","logLevel","signalingTimeoutMs"],o=["audioContext","deviceFactory","fileInputStream","getRTCIceCandidateStatsReport","iceServers","rtcConfiguration"];if(typeof i=="object"){const s=Object.assign({},i);Object.keys(s).forEach(a=>{!n.includes(a)&&!o.includes(a)&&delete s[a],o.includes(a)&&(s[a]=!0)}),this._log.debug(".constructor",JSON.stringify(s))}}stop(){this._log.debug(".stop");const t=new $t.CallCancelledError;this._device?(this._device.once(oe.EventName.Unregistered,()=>this._onFailed(t)),this._device.destroy()):this._onFailed(t)}_emitWarning(t,i,n){const o={name:t,description:i};n&&(o.rtcWarning=n),this._warnings.push(o),this._log.debug(`#${ft.Events.Warning}`,JSON.stringify(o)),this.emit(ft.Events.Warning,o)}_getCallQuality(t){return t>4.2?ft.CallQuality.Excellent:t>=4.1&&t<=4.2?ft.CallQuality.Great:t>=3.7&&t<=4?ft.CallQuality.Good:t>=3.1&&t<=3.6?ft.CallQuality.Fair:ft.CallQuality.Degraded}_getReport(){var t,i,n;const o=this._getRTCStats(),s={start:this._startTime};this._endTime&&(s.end=this._endTime,s.duration=this._endTime-this._startTime);const a={callSid:this._callSid,edge:this._edge,iceCandidateStats:(i=(t=this._rtcIceCandidateStatsReport)===null||t===void 0?void 0:t.iceCandidateStats)!==null&&i!==void 0?i:[],networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:o,testTiming:s,totals:this._getRTCSampleTotals(),warnings:this._warnings},l=(n=this._rtcIceCandidateStatsReport)===null||n===void 0?void 0:n.selectedIceCandidatePairStats;return l&&(a.selectedIceCandidatePairStats=l,a.isTurnRequired=l.localCandidate.candidateType==="relay"||l.remoteCandidate.candidateType==="relay"),o&&(a.callQuality=this._getCallQuality(o.mos.average)),a}_getRTCSampleTotals(){if(this._latestSample)return Object.assign({},this._latestSample.totals)}_getRTCStats(){const t=this._samples.findIndex(n=>typeof n.mos=="number"&&n.mos>0),i=t>=0?this._samples.slice(t):[];if(!(!i||!i.length))return["jitter","mos","rtt"].reduce((n,o)=>{const s=i.map(a=>a[o]);return Object.assign(Object.assign({},n),{[o]:{average:Number((s.reduce((a,l)=>a+l)/s.length).toPrecision(5)),max:Math.max(...s),min:Math.min(...s)}})},{})}_getStreamFromFile(){const t=this._options.audioContext;if(!t)throw new Nt("Cannot fake input audio stream: AudioContext is not supported by this browser.");const i=new Audio(Nf);i.addEventListener("canplaythrough",()=>i.play()),typeof i.setAttribute=="function"&&i.setAttribute("crossorigin","anonymous");const n=t.createMediaElementSource(i),o=t.createMediaStreamDestination();return n.connect(o),o.stream}_initDevice(t,i){try{this._device=new(i.deviceFactory||oe)(t,{chunderw:i.chunderw,codecPreferences:i.codecPreferences,edge:i.edge,eventgw:i.eventgw,fileInputStream:i.fileInputStream,logLevel:i.logLevel,preflight:!0}),this._device.once(oe.EventName.Registered,()=>{this._onDeviceRegistered()}),this._device.once(oe.EventName.Error,n=>{this._onDeviceError(n)}),this._device.register()}catch(n){setTimeout(()=>{this._onFailed(n)});return}this._signalingTimeoutTimer=setTimeout(()=>{this._onDeviceError(new Yt.ConnectionError("WebSocket Connection Timeout"))},i.signalingTimeoutMs)}_onDeviceError(t){this._device.destroy(),this._onFailed(t)}_onDeviceRegistered(){return Ht(this,void 0,void 0,function*(){if(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._call=yield this._device.connect({rtcConfiguration:this._options.rtcConfiguration}),this._networkTiming.signaling={start:Date.now()},this._setupCallHandlers(this._call),this._edge=this._device.edge||void 0,this._options.fakeMicInput){this._echoTimer=setTimeout(()=>this._device.disconnectAll(),$f);const i=this._device.audio;i&&(i.disconnect(!1),i.outgoing(!1))}this._call.once("disconnect",()=>{this._device.once(oe.EventName.Unregistered,()=>this._onUnregistered()),this._device.destroy()}),this._call._publisher.on("error",()=>{this._hasInsightsErrored||this._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),this._hasInsightsErrored=!0})})}_onFailed(t){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=ft.Status.Failed,this._log.debug(`#${ft.Events.Failed}`,t),this.emit(ft.Events.Failed,t)}_onUnregistered(){setTimeout(()=>{this._status!==ft.Status.Failed&&(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=ft.Status.Completed,this._report=this._getReport(),this._log.debug(`#${ft.Events.Completed}`,JSON.stringify(this._report)),this.emit(ft.Events.Completed,this._report))},10)}_releaseHandlers(){[this._device,this._call].forEach(t=>{t&&t.eventNames().forEach(i=>t.removeAllListeners(i))})}_setupCallHandlers(t){this._options.fakeMicInput&&t.once("volume",()=>{t._mediaHandler.outputs.forEach(i=>i.audio.muted=!0)}),t.on("warning",(i,n)=>{this._emitWarning(i,"Received an RTCWarning. See .rtcWarning for the RTCWarning",n)}),t.once("accept",()=>{this._callSid=t._mediaHandler.callSid,this._status=ft.Status.Connected,this._log.debug(`#${ft.Events.Connected}`),this.emit(ft.Events.Connected)}),t.on("sample",i=>Ht(this,void 0,void 0,function*(){this._latestSample||(this._rtcIceCandidateStatsReport=yield(this._options.getRTCIceCandidateStatsReport||ch)(t._mediaHandler.version.pc)),this._latestSample=i,this._samples.push(i),this._log.debug(`#${ft.Events.Sample}`,JSON.stringify(i)),this.emit(ft.Events.Sample,i)})),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(({type:i,reportLabel:n})=>{const o=`on${i}statechange`,s=t._mediaHandler[o];t._mediaHandler[o]=a=>{const l=this._networkTiming[n]=this._networkTiming[n]||{start:0};a==="connecting"||a==="checking"?l.start=Date.now():(a==="connected"||a==="stable")&&!l.duration&&(l.end=Date.now(),l.duration=l.end-l.start),s(a)}})}get callSid(){return this._callSid}get endTime(){return this._endTime}get latestSample(){return this._latestSample}get report(){return this._report}get startTime(){return this._startTime}get status(){return this._status}}(function(e){(function(t){t.Excellent="excellent",t.Great="great",t.Good="good",t.Fair="fair",t.Degraded="degraded"})(e.CallQuality||(e.CallQuality={})),function(t){t.Completed="completed",t.Connected="connected",t.Failed="failed",t.Sample="sample",t.Warning="warning"}(e.Events||(e.Events={})),function(t){t.Connecting="connecting",t.Connected="connected",t.Completed="completed",t.Failed="failed"}(e.Status||(e.Status={}))})(ft||(ft={}));const yn=globalThis.WebSocket,dh=1e4,fh=5e3,La=15e3,hh=15e3,ph=1/0,mh=1e3,gh=2e4;var zt;(function(e){e.Connecting="connecting",e.Closed="closed",e.Open="open"})(zt||(zt={}));class $r extends Qt.EventEmitter{constructor(t,i={}){super(),this.state=zt.Closed,this._backoffStartTime={preferred:null,primary:null},this._connectedUri=null,this._log=new Tt("WSTransport"),this._shouldFallback=!1,this._uriIndex=0,this._moveUriIndex=()=>{this._uriIndex++,this._uriIndex>=this._uris.length&&(this._uriIndex=0)},this._onSocketClose=n=>{if(this._log.error(`Received websocket close event code: ${n.code}. Reason: ${n.reason}`),n.code===1006||n.code===1015){this.emit("error",{code:31005,message:n.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new Yt.ConnectionError});const o=this.state===zt.Open||this._previousState===zt.Open;(this._shouldFallback||!o)&&this._moveUriIndex(),this._shouldFallback=!0}this._closeSocket()},this._onSocketError=n=>{this._log.error(`WebSocket received error: ${n.message}`),this.emit("error",{code:31e3,message:n.message||"WSTransport socket error",twilioError:new Yt.ConnectionDisconnected})},this._onSocketMessage=n=>{if(this._setHeartbeatTimeout(),this._socket&&n.data===`
`){this._socket.send(`
`),this._log.debug("heartbeat");return}n&&typeof n.data=="string"&&this._log.debug(`Received: ${n.data}`),this.emit("message",n)},this._onSocketOpen=()=>{this._log.info("WebSocket opened successfully."),this._timeOpened=Date.now(),this._shouldFallback=!1,this._setState(zt.Open),clearTimeout(this._connectTimeout),this._resetBackoffs(),this._setHeartbeatTimeout(),this.emit("open")},this._options=Object.assign(Object.assign({},$r.defaultConstructorOptions),i),this._uris=t,this._backoff=this._setupBackoffs()}close(){this._log.info("WSTransport.close() called..."),this._close()}open(){if(this._log.info("WSTransport.open() called..."),this._socket&&(this._socket.readyState===yn.CONNECTING||this._socket.readyState===yn.OPEN)){this._log.info("WebSocket already open.");return}this._preferredUri?this._connect(this._preferredUri):this._connect(this._uris[this._uriIndex])}send(t){if(this._log.debug(`Sending: ${t}`),!this._socket||this._socket.readyState!==yn.OPEN)return this._log.debug("Cannot send message. WebSocket is not open."),!1;try{this._socket.send(t)}catch(i){return this._log.error("Error while sending message:",i.message),this._closeSocket(),!1}return!0}updatePreferredURI(t){this._preferredUri=t}updateURIs(t){typeof t=="string"&&(t=[t]),this._uris=t,this._uriIndex=0}_close(){this._setState(zt.Closed),this._closeSocket()}_closeSocket(){if(clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),!this._socket){this._log.info("No WebSocket to clean up.");return}this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),(this._socket.readyState===yn.CONNECTING||this._socket.readyState===yn.OPEN)&&this._socket.close(),this._timeOpened&&Date.now()-this._timeOpened>dh&&this._resetBackoffs(),this.state!==zt.Closed&&this._performBackoff(),delete this._socket,this.emit("close")}_connect(t,i){this._log.info(typeof i=="number"?`Attempting to reconnect (retry #${i})...`:"Attempting to connect..."),this._closeSocket(),this._setState(zt.Connecting),this._connectedUri=t;try{this._socket=new this._options.WebSocket(this._connectedUri)}catch(n){this._log.error("Could not connect to endpoint:",n.message),this._close(),this.emit("error",{code:31e3,message:n.message||`Could not connect to ${this._connectedUri}`,twilioError:new Yt.ConnectionDisconnected});return}this._socket.addEventListener("close",this._onSocketClose),this._socket.addEventListener("error",this._onSocketError),this._socket.addEventListener("message",this._onSocketMessage),this._socket.addEventListener("open",this._onSocketOpen),delete this._timeOpened,this._connectTimeout=setTimeout(()=>{this._log.info("WebSocket connection attempt timed out."),this._moveUriIndex(),this._closeSocket()},this._options.connectTimeoutMs)}_performBackoff(){this._preferredUri?(this._log.info("Preferred URI set; backing off."),this._backoff.preferred.backoff()):(this._log.info("Preferred URI not set; backing off."),this._backoff.primary.backoff())}_resetBackoffs(){this._backoff.preferred.reset(),this._backoff.primary.reset(),this._backoffStartTime.preferred=null,this._backoffStartTime.primary=null}_setHeartbeatTimeout(){clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(()=>{this._log.info(`No messages received in ${La/1e3} seconds. Reconnecting...`),this._shouldFallback=!0,this._closeSocket()},La)}_setState(t){this._previousState=this.state,this.state=t}_setupBackoffs(){const t={factor:2,jitter:.4,max:this._options.maxPreferredDelayMs,min:100};this._log.info("Initializing preferred transport backoff using config: ",t);const i=new Ws(t);i.on("backoff",(s,a)=>{if(this.state===zt.Closed){this._log.info("Preferred backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect Websocket to preferred URI in ${a}ms`),s===0&&(this._backoffStartTime.preferred=Date.now(),this._log.info(`Preferred backoff start; ${this._backoffStartTime.preferred}`))}),i.on("ready",(s,a)=>{if(this.state===zt.Closed){this._log.info("Preferred backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.preferred===null){this._log.info("Preferred backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.preferred>this._options.maxPreferredDurationMs){this._log.info("Max preferred backoff attempt time exceeded; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}if(typeof this._preferredUri!="string"){this._log.info("Preferred URI cleared; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}this._connect(this._preferredUri,s+1)});const n={factor:2,jitter:.4,max:this._options.maxPrimaryDelayMs,min:this._uris&&this._uris.length>1?Math.floor(Math.random()*4001)+1e3:100};this._log.info("Initializing primary transport backoff using config: ",n);const o=new Ws(n);return o.on("backoff",(s,a)=>{if(this.state===zt.Closed){this._log.info("Primary backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect WebSocket in ${a}ms`),s===0&&(this._backoffStartTime.primary=Date.now(),this._log.info(`Primary backoff start; ${this._backoffStartTime.primary}`))}),o.on("ready",(s,a)=>{if(this.state===zt.Closed){this._log.info("Primary backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.primary===null){this._log.info("Primary backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.primary>this._options.maxPrimaryDurationMs){this._log.info("Max primary backoff attempt time exceeded; not attempting a connection.");return}this._connect(this._uris[this._uriIndex],s+1)}),{preferred:i,primary:o}}get uri(){return this._connectedUri}}$r.defaultConstructorOptions={WebSocket:yn,connectTimeoutMs:fh,maxPreferredDelayMs:mh,maxPreferredDurationMs:hh,maxPrimaryDelayMs:gh,maxPrimaryDurationMs:ph};const _h="1.6",vh=30;class at extends Qt.EventEmitter{constructor(t,i,n){if(super(),!(this instanceof at))return new at(t,i,n);const o={TransportFactory:$r};n=n||{};for(const a in o)a in n||(n[a]=o[a]);this.options=n,this.token=t||"",this.status="disconnected",this.gateway=null,this.region=null,this._messageQueue=[],this._preferredUri=null,this._uris=i,this._handleTransportClose=this._handleTransportClose.bind(this),this._handleTransportError=this._handleTransportError.bind(this),this._handleTransportMessage=this._handleTransportMessage.bind(this),this._handleTransportOpen=this._handleTransportOpen.bind(this),this._log=new Tt("PStream"),this.on("error",()=>{this._log.warn("Unexpected error handled in pstream")});const s=this;return this.addListener("ready",()=>{s.status="ready"}),this.addListener("offline",()=>{s.status="offline"}),this.addListener("close",()=>{s._log.info('Received "close" from server. Destroying PStream...'),s._destroy()}),this.transport=new this.options.TransportFactory(this._uris,{backoffMaxMs:this.options.backoffMaxMs,maxPreferredDurationMs:this.options.maxPreferredDurationMs}),Object.defineProperties(this,{uri:{enumerable:!0,get(){return this.transport.uri}}}),this.transport.on("close",this._handleTransportClose),this.transport.on("error",this._handleTransportError),this.transport.on("message",this._handleTransportMessage),this.transport.on("open",this._handleTransportOpen),this.transport.open(),this}}at.prototype._handleTransportClose=function(){this.emit("transportClose"),this.status!=="disconnected"&&(this.status!=="offline"&&this.emit("offline",this),this.status="disconnected")};at.prototype._handleTransportError=function(e){if(!e){this.emit("error",{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new Yt.ConnectionDisconnected}});return}this.emit("error",typeof e.code<"u"?{error:e}:e)};at.prototype._handleTransportMessage=function(e){if(!e||!e.data||typeof e.data!="string")return;const{type:t,payload:i={}}=JSON.parse(e.data);this.gateway=i.gateway||this.gateway,this.region=i.region||this.region,t==="error"&&i.error&&(i.error.twilioError=new Yt.ConnectionError),this.emit(t,i)};at.prototype._handleTransportOpen=function(){this.status="connected",this.setToken(this.token),this.emit("transportOpen"),this._messageQueue.splice(0,this._messageQueue.length).forEach(t=>this._publish(...t))};at.toString=()=>"[Twilio.PStream class]";at.prototype.toString=()=>"[Twilio.PStream instance]";at.prototype.setToken=function(e){this._log.info("Setting token and publishing listen"),this.token=e;let t=0;const i=this.options.maxPreferredDurationMs;this._log.info(`maxPreferredDurationMs:${i}`),typeof i=="number"&&i>=0&&(t=Math.min(Math.ceil(i/1e3),vh)),this._log.info(`reconnectTimeout:${t}`);const n={browserinfo:yh(),reconnectTimeout:t,token:e};this._publish("listen",n)};at.prototype.sendMessage=function(e,t,i="application/json",n,o){const s={callsid:e,content:t,contenttype:i,messagetype:n,voiceeventsid:o};this._publish("message",s,!0)};at.prototype.register=function(e){const t={media:e};this._publish("register",t,!0)};at.prototype.invite=function(e,t,i){const n={callsid:t,sdp:e,twilio:i?{params:i}:{}};this._publish("invite",n,!0)};at.prototype.reconnect=function(e,t,i){const n={callsid:t,reconnect:i,sdp:e,twilio:{}};this._publish("invite",n,!0)};at.prototype.answer=function(e,t){this._publish("answer",{sdp:e,callsid:t},!0)};at.prototype.dtmf=function(e,t){this._publish("dtmf",{callsid:e,dtmf:t},!0)};at.prototype.hangup=function(e,t){const i=t?{callsid:e,message:t}:{callsid:e};this._publish("hangup",i,!0)};at.prototype.reject=function(e){this._publish("reject",{callsid:e},!0)};at.prototype.reinvite=function(e,t){this._publish("reinvite",{sdp:e,callsid:t},!1)};at.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)};at.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this};at.prototype.updatePreferredURI=function(e){this._preferredUri=e,this.transport.updatePreferredURI(e)};at.prototype.updateURIs=function(e){this._uris=e,this.transport.updateURIs(this._uris)};at.prototype.publish=function(e,t){return this._publish(e,t,!0)};at.prototype._publish=function(e,t,i){const n=JSON.stringify({payload:t,type:e,version:_h});!!this.transport.send(n)||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new $t.TransportError}}),i&&this._messageQueue.push([e,t,!0]))};function yh(){const e=typeof navigator<"u"?navigator:{};return{browser:{platform:e.platform||"unknown",userAgent:e.userAgent||"unknown"},p:"browser",plugin:"rtc",v:xn}}var gt;(function(e){e.Sydney="sydney",e.SaoPaulo="sao-paulo",e.Dublin="dublin",e.Frankfurt="frankfurt",e.Tokyo="tokyo",e.Singapore="singapore",e.Ashburn="ashburn",e.Umatilla="umatilla",e.Roaming="roaming",e.AshburnIx="ashburn-ix",e.SanJoseIx="san-jose-ix",e.LondonIx="london-ix",e.FrankfurtIx="frankfurt-ix",e.SingaporeIx="singapore-ix",e.SydneyIx="sydney-ix",e.TokyoIx="tokyo-ix"})(gt||(gt={}));var Qe;(function(e){e.Au1="au1",e.Au1Ix="au1-ix",e.Br1="br1",e.De1="de1",e.De1Ix="de1-ix",e.Gll="gll",e.Ie1="ie1",e.Ie1Ix="ie1-ix",e.Ie1Tnx="ie1-tnx",e.Jp1="jp1",e.Jp1Ix="jp1-ix",e.Sg1="sg1",e.Sg1Ix="sg1-ix",e.Sg1Tnx="sg1-tnx",e.Us1="us1",e.Us1Ix="us1-ix",e.Us1Tnx="us1-tnx",e.Us2="us2",e.Us2Ix="us2-ix",e.Us2Tnx="us2-tnx"})(Qe||(Qe={}));const bh={ASIAPAC_SINGAPORE:Qe.Sg1,ASIAPAC_SYDNEY:Qe.Au1,ASIAPAC_TOKYO:Qe.Jp1,EU_FRANKFURT:Qe.De1,EU_IRELAND:Qe.Ie1,SOUTH_AMERICA_SAO_PAULO:Qe.Br1,US_EAST_VIRGINIA:Qe.Us1,US_WEST_OREGON:Qe.Us2},wh={[Qe.Au1]:gt.Sydney,[Qe.Br1]:gt.SaoPaulo,[Qe.Ie1]:gt.Dublin,[Qe.De1]:gt.Frankfurt,[Qe.Jp1]:gt.Tokyo,[Qe.Sg1]:gt.Singapore,[Qe.Us1]:gt.Ashburn,[Qe.Us2]:gt.Umatilla,[Qe.Gll]:gt.Roaming,[Qe.Us1Ix]:gt.AshburnIx,[Qe.Us2Ix]:gt.SanJoseIx,[Qe.Ie1Ix]:gt.LondonIx,[Qe.De1Ix]:gt.FrankfurtIx,[Qe.Sg1Ix]:gt.SingaporeIx,[Qe.Au1Ix]:gt.SydneyIx,[Qe.Jp1Ix]:gt.TokyoIx,[Qe.Us1Tnx]:gt.AshburnIx,[Qe.Us2Tnx]:gt.AshburnIx,[Qe.Ie1Tnx]:gt.LondonIx,[Qe.Sg1Tnx]:gt.SingaporeIx},Sh=gt.Roaming,Ch="eventgw.twilio.com";function Ma(e){return`voice-js.${e}.twilio.com`}function ja(e){return e?`eventgw.${e}.twilio.com`:Ch}function Na(e){return`wss://${e}/signal`}function $a(e){if(e&&typeof e!="string"&&!Array.isArray(e))throw new it("If `edge` is provided, it must be of type `string` or an array of strings.");let t;return e?t=(Array.isArray(e)?e:[e]).map(n=>Ma(n)):t=[Ma(Sh)],t}function xh(e){return bh[e]||null}const Fa={0:"PCMU",8:"PCMA"},Eh=111,Th=51e4,Ah=6e3;function kh(e){const[,t,i]=/a=rtpmap:(\d+) (\S+)/m.exec(e)||[null,"",""],n=new RegExp(`a=fmtp:${t} (\\S+)`,"m"),[,o]=n.exec(e)||[null,""];return{codecName:i,codecParams:o}}function Ph(e){return po(window,window.navigator)?e.split(`
`).filter(t=>t.indexOf("a=ice-lite")===-1).join(`
`):e}function jc(e,t){if(typeof t!="number"||t<Ah||t>Th)return e;const i=/a=rtpmap:(\d+) opus/m.exec(e),n=i&&i.length?i[1]:Eh,o=new RegExp(`a=fmtp:${n}`);return e.split(`
`).map(a=>o.test(a)?a+`;maxaveragebitrate=${t}`:a).join(`
`)}function Nc(e,t){const i=Ih(e);return[e.split(`\r
m=`)[0]].concat(i.map(o=>{if(!/^m=(audio|video)/.test(o))return o;const s=o.match(/^m=(audio|video)/)[1],a=Rh(o),l=Oh(a,t),d=Dh(l,o),f=a.get("pcma")||[],g=a.get("pcmu")||[];return(s==="audio"?new Set(f.concat(g)):new Set).has(l[0])?d.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):d})).join(`\r
`)}function Ih(e,t,i){return e.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(n=>`m=${n}`).filter(n=>{const o=new RegExp("m=.*","gm"),s=new RegExp("a=.*","gm");return o.test(n)&&s.test(n)})}function Rh(e){return Array.from(Lh(e)).reduce((t,i)=>{const n=i[0],o=i[1],s=t.get(o)||[];return t.set(o,s.concat(n))},new Map)}function Oh(e,t){t=t.map(s=>s.toLowerCase());const i=Js(t,s=>e.get(s)||[]),n=ho(Array.from(e.keys()),t),o=Js(n,s=>e.get(s));return i.concat(o)}function Dh(e,t){const i=t.split(`\r
`);let n=i[0];const o=i.slice(1);return n=n.replace(/([0-9]+\s?)+$/,e.join(" ")),[n].concat(o).join(`\r
`)}function Lh(e){return Mh(e).reduce((t,i)=>{const n=new RegExp(`a=rtpmap:${i} ([^/]+)`),o=e.match(n),s=o?o[1].toLowerCase():Fa[i]?Fa[i].toLowerCase():"";return t.set(i,s)},new Map)}function Mh(e){const i=e.split(`\r
`)[0].match(/([0-9]+)/g);return i?i.slice(1).map(n=>parseInt(n,10)):[]}function Jt(e){if(this.log=new Tt("RTCPC"),typeof window>"u"){this.log.info("No RTCPeerConnection implementation available. The window object was not found.");return}e&&e.RTCPeerConnection?this.RTCPeerConnection=e.RTCPeerConnection:typeof window.RTCPeerConnection=="function"?this.RTCPeerConnection=window.RTCPeerConnection:typeof window.webkitRTCPeerConnection=="function"?this.RTCPeerConnection=webkitRTCPeerConnection:typeof window.mozRTCPeerConnection=="function"?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available")}Jt.prototype.create=function(e){this.pc=new this.RTCPeerConnection(e)};Jt.prototype.createModernConstraints=e=>{if(typeof e>"u")return null;const t=Object.assign({},e);return typeof webkitRTCPeerConnection<"u"&&!Nr()?(t.mandatory={},typeof e.audio<"u"&&(t.mandatory.OfferToReceiveAudio=e.audio),typeof e.video<"u"&&(t.mandatory.OfferToReceiveVideo=e.video)):(typeof e.audio<"u"&&(t.offerToReceiveAudio=e.audio),typeof e.video<"u"&&(t.offerToReceiveVideo=e.video)),delete t.audio,delete t.video,t};Jt.prototype.createOffer=function(e,t,i,n){return t=this.createModernConstraints(t),Fc(this.pc.createOffer,this.pc)(t).then(o=>{if(!this.pc)return Promise.resolve();const s=jc(o.sdp,e);return Fr(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:s,type:"offer"}))}).then(i,n)};Jt.prototype.createAnswer=function(e,t,i,n){return t=this.createModernConstraints(t),Fc(this.pc.createAnswer,this.pc)(t).then(o=>{if(!this.pc)return Promise.resolve();const s=jc(o.sdp,e);return Fr(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:s,type:"answer"}))}).then(i,n)};Jt.prototype.processSDP=function(e,t,i,n,o,s){i=Nc(i,t);const a=new RTCSessionDescription({sdp:i,type:"offer"});return Fr(this.pc.setRemoteDescription,this.pc)(a).then(()=>{this.createAnswer(e,n,o,s)})};Jt.prototype.getSDP=function(){return this.pc.localDescription.sdp};Jt.prototype.processAnswer=function(e,t,i,n){return this.pc?(t=Nc(t,e),Fr(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:t,type:"answer"})).then(i,n)):Promise.resolve()};Jt.test=()=>{if(typeof navigator=="object"){const e=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if(Nr(navigator))return!1;if(e&&typeof window.RTCPeerConnection=="function")return!0;if(e&&typeof window.webkitRTCPeerConnection=="function")return!0;if(e&&typeof window.mozRTCPeerConnection=="function"){try{if(typeof new window.mozRTCPeerConnection().getLocalStreams!="function")return!1}catch{return!1}return!0}else if(typeof RTCIceGatherer<"u")return!0}return!1};function $c(e,t,i,n){return function(){const o=Array.prototype.slice.call(arguments);return new Promise(s=>{const a=e.apply(t,o);if(!n){s(a);return}if(typeof a=="object"&&typeof a.then=="function")s(a);else throw new Error}).catch(()=>new Promise((s,a)=>{e.apply(t,i?[s,a].concat(o):o.concat([s,a]))}))}}function Fc(e,t){return $c(e,t,!0,!0)}function Fr(e,t){return $c(e,t,!1,!1)}const jh=15e3,Nh="none",$h="timeout",Fh="new",Ua=50;function Ee(e,t,i){if(!e||!t)throw new it("Audiohelper, and pstream are required arguments");if(!(this instanceof Ee))return new Ee(e,t,i);this._log=new Tt("PeerConnection");function n(){this._log.warn("Unexpected noop call in peerconnection")}this.onaudio=n,this.onopen=n,this.onerror=n,this.onclose=n,this.ondisconnected=n,this.onfailed=n,this.onconnected=n,this.onreconnected=n,this.onsignalingstatechange=n,this.ondtlstransportstatechange=n,this.onicegatheringfailure=n,this.onicegatheringstatechange=n,this.oniceconnectionstatechange=n,this.onpcconnectionstatechange=n,this.onicecandidate=n,this.onselectedcandidatepairchange=n,this.onvolume=n,this.version=null,this.pstream=t,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1;const o=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!o&&typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId,this._audioContext=o&&e._audioContext,this._audioHelper=e,this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=n,this._onHangup=n,this._remoteStream=null,this._shouldManageStream=!0,this._iceState=Fh,this.options=i=i||{},this.navigator=i.navigator||(typeof navigator<"u"?navigator:null),this.util=i.util||Oc,this.codecPreferences=i.codecPreferences,this}Ee.prototype.uri=function(){return this._uri};Ee.prototype.openDefaultDeviceWithConstraints=function(e){return this._audioHelper._openDefaultDeviceWithConstraints(e).then(this._setInputTracksFromStream.bind(this,!1))};Ee.prototype.setInputTracksFromStream=function(e){const t=this;return this._setInputTracksFromStream(!0,e).then(()=>{t._shouldManageStream=!1})};Ee.prototype._createAnalyser=(e,t)=>{t=Object.assign({fftSize:32,smoothingTimeConstant:.3},t);const i=e.createAnalyser();for(const n in t)i[n]=t[n];return i};Ee.prototype._setVolumeHandler=function(e){this.onvolume=e};Ee.prototype._startPollingVolume=function(){if(!this._audioContext||!this.stream||!this._remoteStream)return;const e=this._audioContext,i=(this._inputAnalyser=this._createAnalyser(e)).frequencyBinCount,n=new Uint8Array(i);this._inputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0});const s=(this._outputAnalyser=this._createAnalyser(e)).frequencyBinCount,a=new Uint8Array(s);this._outputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);const l=this;setTimeout(function d(){if(l._audioContext){if(l.status==="closed"){l._inputAnalyser.disconnect(),l._outputAnalyser.disconnect(),l._inputAnalyser2.disconnect(),l._outputAnalyser2.disconnect();return}}else return;l._inputAnalyser.getByteFrequencyData(n);const f=l.util.average(n);l._inputAnalyser2.getByteFrequencyData(n);const g=l.util.average(n);l._outputAnalyser.getByteFrequencyData(a);const v=l.util.average(a);l._outputAnalyser2.getByteFrequencyData(a);const w=l.util.average(a);l.onvolume(f/255,v/255,g,w),setTimeout(d,Ua)},Ua)};Ee.prototype._stopStream=function(){this._shouldManageStream&&this._audioHelper._stopDefaultInputDeviceStream()};Ee.prototype._updateInputStreamSource=function(e){this._inputStreamSource&&this._inputStreamSource.disconnect();try{this._inputStreamSource=this._audioContext.createMediaStreamSource(e),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)}catch(t){this._log.warn("Unable to update input MediaStreamSource",t),this._inputStreamSource=null}};Ee.prototype._updateOutputStreamSource=function(e){this._outputStreamSource&&this._outputStreamSource.disconnect();try{this._outputStreamSource=this._audioContext.createMediaStreamSource(e),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)}catch(t){this._log.warn("Unable to update output MediaStreamSource",t),this._outputStreamSource=null}};Ee.prototype._setInputTracksFromStream=function(e,t){if(!t)return Promise.reject(new it("Can not set input stream to null while in a call"));if(!t.getAudioTracks().length)return Promise.reject(new it("Supplied input stream has no audio tracks"));const i=this.stream,n=()=>(this.mute(this.isMuted),Promise.resolve(this.stream));if(!i)this.stream=e?Ba(t,this.options.MediaStream):t;else return this._shouldManageStream&&this._stopStream(),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(t.getAudioTracks()[0]).then(()=>(this._updateInputStreamSource(t),this.stream=e?Ba(t,this.options.MediaStream):t,n()));return n()};Ee.prototype._onInputDevicesChanged=function(){if(!this.stream)return;this.stream.getAudioTracks().every(t=>t.readyState==="ended")&&this._shouldManageStream&&this.openDefaultDeviceWithConstraints({audio:!0})};Ee.prototype._onIceGatheringFailure=function(e){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(e)};Ee.prototype._onMediaConnectionStateChange=function(e){const t=this._iceState;if(t===e||e!=="connected"&&e!=="disconnected"&&e!=="failed")return;this._iceState=e;let i;switch(e){case"connected":t==="disconnected"||t==="failed"?(i="ICE liveliness check succeeded. Connection with Twilio restored",this._log.info(i),this.onreconnected(i)):(i="Media connection established.",this._log.info(i),this.onconnected(i)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":i="ICE liveliness check failed. May be having trouble connecting to Twilio",this._log.warn(i),this.ondisconnected(i);break;case"failed":i="Connection with Twilio was interrupted.",this._log.warn(i),this.onfailed(i);break}};Ee.prototype._setSinkIds=function(e){return this._isSinkSupported?(this.sinkIds=new Set(e.forEach?e:[e]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new Nt("Audio output selection is not supported by this browser"))};Ee.prototype._startIceGatheringTimeout=function(){this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(()=>{this._onIceGatheringFailure($h)},jh)};Ee.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)};Ee.prototype._updateAudioOutputs=function(){const t=Array.from(this.sinkIds).filter(function(s){return!this.outputs.has(s)},this),i=Array.from(this.outputs.keys()).filter(function(s){return!this.sinkIds.has(s)},this),n=this,o=t.map(this._createAudioOutput,this);return Promise.all(o).then(()=>Promise.all(i.map(n._removeAudioOutput,n)))};Ee.prototype._createAudio=function(t){const i=new Audio(t);return this.onaudio(i),i};Ee.prototype._createAudioOutput=function(t){let i=null;this._mediaStreamSource&&(i=this._audioContext.createMediaStreamDestination(),this._mediaStreamSource.connect(i));const n=this._createAudio();go(n,i&&i.stream?i.stream:this.pcStream);const o=this;return n.setSinkId(t).then(()=>n.play()).then(()=>{o.outputs.set(t,{audio:n,dest:i})})};Ee.prototype._removeAudioOutputs=function(){return this._masterAudio&&typeof this._masterAudioDeviceId<"u"&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),typeof this._masterAudio.srcObject<"u"?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)};Ee.prototype._disableOutput=function(t,i){const n=t.outputs.get(i);n&&(n.audio&&(n.audio.pause(),n.audio.src=""),n.dest&&n.dest.disconnect())};Ee.prototype._reassignMasterOutput=function(t,i){const n=t.outputs.get(i);t.outputs.delete(i);const o=this,s=Array.from(t.outputs.keys())[0],a=typeof s=="string"?s:"default";return n.audio.setSinkId(a).then(()=>{o._disableOutput(t,a),t.outputs.set(a,n),t._masterAudioDeviceId=a}).catch(function(){t.outputs.set(i,n),o._log.info("Could not reassign master output. Attempted to roll back.")})};Ee.prototype._removeAudioOutput=function(t){return this._masterAudioDeviceId===t?this._reassignMasterOutput(this,t):(this._disableOutput(this,t),this.outputs.delete(t),Promise.resolve())};Ee.prototype._onAddTrack=function(t,i){const n=t._masterAudio=this._createAudio();go(n,i),n.play();const o=Array.from(t.outputs.keys())[0],s=typeof o=="string"?o:"default";t._masterAudioDeviceId=s,t.outputs.set(s,{audio:n});try{t._mediaStreamSource=t._audioContext.createMediaStreamSource(i)}catch(a){this._log.warn("Unable to create a MediaStreamSource from onAddTrack",a),this._mediaStreamSource=null}t.pcStream=i,t._updateAudioOutputs()};Ee.prototype._fallbackOnAddTrack=function(t,i){const n=document&&document.createElement("audio");n.autoplay=!0,go(n,i)||t._log.info("Error attaching stream to element."),t.outputs.set("default",{audio:n})};Ee.prototype._setEncodingParameters=function(e){if(!e||!this._sender||typeof this._sender.getParameters!="function"||typeof this._sender.setParameters!="function")return;const t=this._sender.getParameters();!t.priority&&!(t.encodings&&t.encodings.length)||(t.priority="high",t.encodings&&t.encodings.length&&t.encodings.forEach(i=>{i.priority="high",i.networkPriority="high"}),this._sender.setParameters(t))};Ee.prototype._setupPeerConnection=function(e){const t=this,i=new(this.options.rtcpcFactory||Jt)({RTCPeerConnection:this.options.RTCPeerConnection});i.create(e),Uh(i.pc,this.stream);const n=RTCRtpReceiver.getCapabilities("audio").codecs;this._log.debug("sorting codecs",n,this.codecPreferences);const o=Rc(n,this.codecPreferences),[s]=i.pc.getTransceivers();this._log.debug("setting sorted codecs",o),s.setCodecPreferences(o);const a="ontrack"in i.pc?"ontrack":"onaddstream";return i.pc[a]=l=>{const d=t._remoteStream=l.stream||l.streams[0];typeof i.pc.getSenders=="function"&&(this._sender=i.pc.getSenders()[0]),t._isSinkSupported?t._onAddTrack(t,d):t._fallbackOnAddTrack(t,d),t._startPollingVolume()},i};Ee.prototype._maybeSetIceAggressiveNomination=function(e){return this.options.forceAggressiveIceNomination?Ph(e):e};Ee.prototype._setupChannel=function(){const e=this.version.pc;this.version.pc.onopen=()=>{this.status="open",this.onopen()},this.version.pc.onstatechange=()=>{this.version.pc&&this.version.pc.readyState==="stable"&&(this.status="open",this.onopen())},this.version.pc.onsignalingstatechange=()=>{const t=e.signalingState;this._log.info(`signalingState is "${t}"`),this.version.pc&&this.version.pc.signalingState==="stable"&&(this.status="open",this.onopen()),this.onsignalingstatechange(e.signalingState)},e.onconnectionstatechange=t=>{let i=e.connectionState;if(!i&&t&&t.target){const n=t.target;i=n.connectionState||n.connectionState_,this._log.info(`pc.connectionState not detected. Using target PC. State=${i}`)}i?this._log.info(`pc.connectionState is "${i}"`):this._log.warn(`onconnectionstatechange detected but state is "${i}"`),this.onpcconnectionstatechange(i),this._onMediaConnectionStateChange(i)},e.onicecandidate=t=>{const{candidate:i}=t;i&&(this._hasIceCandidates=!0,this.onicecandidate(i),this._setupRTCIceTransportListener()),this._log.info(`ICE Candidate: ${JSON.stringify(i)}`)},e.onicegatheringstatechange=()=>{const t=e.iceGatheringState;t==="gathering"?this._startIceGatheringTimeout():t==="complete"&&(this._stopIceGatheringTimeout(),this._hasIceCandidates||this._onIceGatheringFailure(Nh),this._hasIceCandidates&&this._hasIceGatheringFailures&&this._startIceGatheringTimeout()),this._log.info(`pc.iceGatheringState is "${e.iceGatheringState}"`),this.onicegatheringstatechange(t)},e.oniceconnectionstatechange=()=>{this._log.info(`pc.iceConnectionState is "${e.iceConnectionState}"`),this.oniceconnectionstatechange(e.iceConnectionState),this._onMediaConnectionStateChange(e.iceConnectionState)}};Ee.prototype._initializeMediaStream=function(e){return this.status==="open"?!1:this.pstream.status==="disconnected"?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new Yt.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(e),this._setupChannel(),!0)};Ee.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))};Ee.prototype._setupRTCDtlsTransportListener=function(){const e=this.getRTCDtlsTransport();if(!e||e.onstatechange)return;const t=()=>{this._log.info(`dtlsTransportState is "${e.state}"`),this.ondtlstransportstatechange(e.state)};t(),e.onstatechange=t};Ee.prototype._setupRTCIceTransportListener=function(){const e=this._getRTCIceTransport();!e||e.onselectedcandidatepairchange||(e.onselectedcandidatepairchange=()=>this.onselectedcandidatepairchange(e.getSelectedCandidatePair()))};Ee.prototype.iceRestart=function(){this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,{iceRestart:!0}).then(()=>{this._removeReconnectionListeners(),this._onAnswerOrRinging=e=>{if(this._removeReconnectionListeners(),!e.sdp||this.version.pc.signalingState!=="have-local-offer"){const i=`Invalid state or param during ICE Restart:hasSdp:${!!e.sdp}, signalingState:${this.version.pc.signalingState}`;this._log.warn(i);return}const t=this._maybeSetIceAggressiveNomination(e.sdp);this._answerSdp=t,this.status!=="closed"&&this.version.processAnswer(this.codecPreferences,t,null,i=>{const n=i&&i.message?i.message:i;this._log.error(`Failed to process answer during ICE Restart. Error: ${n}`)})},this._onHangup=()=>{this._log.info("Received hangup during ICE Restart"),this._removeReconnectionListeners()},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("hangup",this._onHangup),this.pstream.reinvite(this.version.getSDP(),this.callSid)}).catch(e=>{const t=e&&e.message?e.message:e;this._log.error(`Failed to createOffer during ICE Restart. Error: ${t}`),this.onfailed(t)})};Ee.prototype.makeOutgoingCall=function(e,t,i,n,o){if(!this._initializeMediaStream(n))return;const s=this;this.callSid=i;function a(){s.options&&s._setEncodingParameters(s.options.dscp),o(s.version.pc)}function l(g){const v=g.message||g;s.onerror({info:{code:31e3,message:`Error processing answer: ${v}`,twilioError:new hi.ClientRemoteDescFailed}})}this._onAnswerOrRinging=g=>{if(!g.sdp)return;const v=this._maybeSetIceAggressiveNomination(g.sdp);s._answerSdp=v,s.status!=="closed"&&s.version.processAnswer(this.codecPreferences,v,a,l),s.pstream.removeListener("answer",s._onAnswerOrRinging),s.pstream.removeListener("ringing",s._onAnswerOrRinging)},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging);function d(){s.status!=="closed"&&(t?s.pstream.reconnect(s.version.getSDP(),s.callSid,t):s.pstream.invite(s.version.getSDP(),s.callSid,e),s._setupRTCDtlsTransportListener())}function f(g){const v=g.message||g;s.onerror({info:{code:31e3,message:`Error creating the offer: ${v}`,twilioError:new hi.ClientLocalDescFailed}})}this.version.createOffer(this.options.maxAverageBitrate,{audio:!0},d,f)};Ee.prototype.answerIncomingCall=function(e,t,i,n){if(!this._initializeMediaStream(i))return;t=this._maybeSetIceAggressiveNomination(t),this._answerSdp=t.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=e;const o=this;function s(){o.status!=="closed"&&(o.pstream.answer(o.version.getSDP(),e),o.options&&o._setEncodingParameters(o.options.dscp),n(o.version.pc),o._setupRTCDtlsTransportListener())}function a(l){const d=l.message||l;o.onerror({info:{code:31e3,message:`Error creating the answer: ${d}`,twilioError:new hi.ClientRemoteDescFailed}})}this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,t,{audio:!0},s,a)};Ee.prototype.close=function(){this.version&&this.version.pc&&(this.version.pc.signalingState!=="closed"&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream()),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),Promise.all(this._removeAudioOutputs()).catch(()=>{}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()};Ee.prototype.reject=function(e){this.callSid=e};Ee.prototype.ignore=function(e){this.callSid=e};Ee.prototype.mute=function(e){this.isMuted=e,this.stream&&(this._sender&&this._sender.track?this._sender.track.enabled=!e:(typeof this.stream.getAudioTracks=="function"?this.stream.getAudioTracks():this.stream.audioTracks).forEach(i=>{i.enabled=!e}))};Ee.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;const t=this,i=this.version.pc;if(!i)return this._log.warn("No RTCPeerConnection available to call createDTMFSender on"),null;if(typeof i.getSenders=="function"&&(typeof RTCDTMFSender=="function"||typeof RTCDtmfSender=="function")){const n=i.getSenders().find(o=>o.dtmf);if(n)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=n.dtmf,this._dtmfSender}if(typeof i.createDTMFSender=="function"&&typeof i.getLocalStreams=="function"){const n=i.getLocalStreams().map(o=>{const s=t._getAudioTracks(o);return s&&s[0]})[0];return n?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=i.createDTMFSender(n),this._dtmfSender):(this._log.warn("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null};Ee.prototype.getRTCDtlsTransport=function(){const t=this.version&&this.version.pc&&typeof this.version.pc.getSenders=="function"&&this.version.pc.getSenders()[0];return t&&t.transport||null};Ee.prototype._canStopMediaStreamTrack=()=>typeof MediaStreamTrack.prototype.stop=="function";Ee.prototype._getAudioTracks=e=>typeof e.getAudioTracks=="function"?e.getAudioTracks():e.audioTracks;Ee.prototype._getRTCIceTransport=function(){const t=this.getRTCDtlsTransport();return t&&t.iceTransport||null};Ee.protocol=Jt.test()?new Jt:null;function Uh(e,t){typeof e.addTrack=="function"?t.getAudioTracks().forEach(i=>{e.addTrack(i,t)}):e.addStream(t)}function Ba(e,t){let i;return t?i=new t:typeof MediaStream<"u"?i=new MediaStream:i=new webkitMediaStream,e.getAudioTracks().forEach(i.addTrack,i),i}function go(e,t){if(typeof e.srcObject<"u")e.srcObject=t;else if(typeof e.mozSrcObject<"u")e.mozSrcObject=t;else if(typeof e.src<"u"){const i=e.options.window||window;e.src=(i.URL||i.webkitURL).createObjectURL(t)}else return!1;return!0}Ee.enabled=Jt.test();function Bh(){return Jt.test()}function Hh(){return typeof RTCIceGatherer<"u"?"ORTC":"WebRTC"}function Wh(e,t){return t=t||{},t.util=t.util||Oc,t.navigator=t.navigator||(typeof navigator<"u"?navigator:null),new Promise((i,n)=>{if(!t.navigator)throw new Nt("getUserMedia is not supported");switch("function"){case typeof(t.navigator.mediaDevices&&t.navigator.mediaDevices.getUserMedia):return i(t.navigator.mediaDevices.getUserMedia(e));case typeof t.navigator.webkitGetUserMedia:return t.navigator.webkitGetUserMedia(e,i,n);case typeof t.navigator.mozGetUserMedia:return t.navigator.mozGetUserMedia(e,i,n);case typeof t.navigator.getUserMedia:return t.navigator.getUserMedia(e,i,n);default:throw new Nt("getUserMedia is not supported")}}).catch(i=>{throw t.util.isFirefox()&&i.name==="NotReadableError"?new Nt(`Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.
Related Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324`):i})}function qh(){if(typeof window!="object")throw new Nt("This platform is not supported.");const{crypto:e}=window;if(typeof e!="object")throw new Nt("The `crypto` module is not available on this platform.");if(typeof e.getRandomValues!="function")throw new Nt("The function `crypto.getRandomValues` is not available on this platform.");if(typeof window.Uint8Array!="function")throw new Nt("The `Uint8Array` module is not available on this platform.");return e.getRandomValues(new window.Uint8Array(16)).reduce((t,i)=>`${t}${i.toString(16).padStart(2,"0")}`,"")}function Qs(){return`KX${qh()}`}let Vh=class{constructor(){this._promise=new Promise((t,i)=>{this._resolve=t,this._reject=i})}get promise(){return this._promise}reject(t){this._reject(t)}resolve(t){this._resolve(t)}};class zh{constructor(){this._operations=[]}enqueue(t){const i=!!this._operations.length,n=new Vh;return this._operations.push({deferred:n,callback:t}),i||this._processQueue(),n.promise}_processQueue(){return Ht(this,void 0,void 0,function*(){for(;this._operations.length;){const{deferred:t,callback:i}=this._operations[0];let n,o,s;try{n=yield i(),s=!0}catch(a){o=a}this._operations.shift(),s?t.resolve(n):t.reject(o)}})}}class Jh{get reject(){return this._reject}get resolve(){return this._resolve}constructor(){this.promise=new Promise((t,i)=>{this._resolve=t,this._reject=i})}}class Gh{constructor(){this._eventEmitter=new Qt.EventEmitter}addEventListener(t,i){return this._eventEmitter.addListener(t,i)}dispatchEvent(t,...i){return this._eventEmitter.emit(t,...i)}removeEventListener(t,i){return this._eventEmitter.removeListener(t,i)}}class Ha extends Gh{get destination(){return this._destination}get loop(){return this._loop}set loop(t){const i=this;function n(){i._audioNode.removeEventListener("ended",n),i.pause()}!t&&this.loop&&!this.paused&&this._audioNode.addEventListener("ended",n),this._loop=t}get muted(){return this._gainNode.gain.value===0}set muted(t){this._gainNode.gain.value=t?0:1}get paused(){return this._audioNode===null}get src(){return this._src}set src(t){this._load(t)}get srcObject(){return this._audioElement.srcObject}set srcObject(t){this._audioElement.srcObject=t}get sinkId(){return this._sinkId}constructor(t,i={},n={}){super(),this._audioNode=null,this._loop=!1,this._pendingPlayDeferreds=[],this._sinkId="default",this._src="",typeof i!="string"&&(n=i),this._audioContext=t,this._audioElement=new(n.AudioFactory||Audio),this._bufferPromise=this._createPlayDeferred().promise,this._destination=this._audioContext.destination,this._gainNode=this._audioContext.createGain(),this._gainNode.connect(this._destination),this._XMLHttpRequest=n.XMLHttpRequestFactory||XMLHttpRequest,this.addEventListener("canplaythrough",()=>{this._resolvePlayDeferreds()}),typeof i=="string"&&(this.src=i)}load(){this._load(this._src)}pause(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))}play(){return Ht(this,void 0,void 0,function*(){if(!this.paused){if(yield this._bufferPromise,!this.paused)return;throw new Error("The play() request was interrupted by a call to pause().")}this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",()=>{this._audioNode&&this._audioNode.loop||this.dispatchEvent("ended")});const t=yield this._bufferPromise;if(this.paused)throw new Error("The play() request was interrupted by a call to pause().");if(this._audioNode.buffer=t,this._audioNode.connect(this._gainNode),this._audioNode.start(),this._audioElement.srcObject)return this._audioElement.play()})}setSinkId(t){return Ht(this,void 0,void 0,function*(){if(typeof this._audioElement.setSinkId!="function")throw new Error("This browser does not support setSinkId.");if(t!==this.sinkId){if(t==="default"){this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),this._sinkId=t;return}yield this._audioElement.setSinkId(t),!this._audioElement.srcObject&&(this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=t,this._gainNode.connect(this._destination))}})}_createPlayDeferred(){const t=new Jh;return this._pendingPlayDeferreds.push(t),t}_load(t){this._src&&this._src!==t&&this.pause(),this._src=t,this._bufferPromise=new Promise((i,n)=>Ht(this,void 0,void 0,function*(){if(!t)return this._createPlayDeferred().promise;const o=yield Kh(this._audioContext,this._XMLHttpRequest,t);this.dispatchEvent("canplaythrough"),i(o)}))}_rejectPlayDeferreds(t){const i=this._pendingPlayDeferreds;i.splice(0,i.length).forEach(({reject:n})=>n(t))}_resolvePlayDeferreds(t){const i=this._pendingPlayDeferreds;i.splice(0,i.length).forEach(({resolve:n})=>n(t))}}function Kh(e,t,i){return Ht(this,void 0,void 0,function*(){const n=new t;n.open("GET",i,!0),n.responseType="arraybuffer";const o=yield new Promise(s=>{n.addEventListener("load",s),n.send()});try{return e.decodeAudioData(o.target.response)}catch{return new Promise(a=>{e.decodeAudioData(o.target.response,a)})}})}function Ti(e,t,i){if(!(this instanceof Ti))return new Ti(e,t,i);if(!e||!t)throw new it("name and url are required arguments");i=Object.assign({AudioFactory:typeof Audio<"u"?Audio:null,maxDuration:0,shouldLoop:!1},i),i.AudioPlayer=i.audioContext?Ha.bind(Ha,i.audioContext):i.AudioFactory,Object.defineProperties(this,{_Audio:{value:i.AudioPlayer},_activeEls:{value:new Map},_isSinkSupported:{value:i.AudioFactory!==null&&typeof i.AudioFactory.prototype.setSinkId=="function"},_maxDuration:{value:i.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new zh},_playPromise:{value:null,writable:!0},_shouldLoop:{value:i.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get(){return!!this._playPromise}},name:{enumerable:!0,value:e},url:{enumerable:!0,value:t}}),this._Audio&&this._play(!0,!1)}function Uc(e){e&&(e.pause(),e.src="",e.srcObject=null,e.load())}Ti.prototype._playAudioElement=function(t,i,n){const o=this._activeEls.get(t);if(!o)throw new it(`sinkId: "${t}" doesn't have an audio element`);return o.muted=!!i,o.loop=!!n,o.play().then(()=>o).catch(s=>{throw Uc(o),this._activeEls.delete(t),s})};Ti.prototype._play=function(t,i){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),i=typeof i=="boolean"?i:this._shouldLoop;const n=this;return this._playPromise=Promise.all(this._sinkIds.map(function(a){if(!n._Audio)return Promise.resolve();let l=n._activeEls.get(a);return l?n._playAudioElement(a,t,i):(l=new n._Audio(n.url),typeof l.setAttribute=="function"&&l.setAttribute("crossorigin","anonymous"),new Promise(d=>{l.addEventListener("canplaythrough",d)}).then(()=>(n._isSinkSupported?l.setSinkId(a):Promise.resolve()).then(function(){return n._activeEls.set(a,l),n._playPromise?n._playAudioElement(a,t,i):Promise.resolve()})))}))};Ti.prototype._stop=function(){this._activeEls.forEach((t,i)=>{this._sinkIds.includes(i)?(t.pause(),t.currentTime=0):(Uc(t),this._activeEls.delete(i))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null};Ti.prototype.setSinkIds=function(t){this._isSinkSupported&&(t=t.forEach?t:[t],[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(t)))};Ti.prototype.stop=function(){this._operations.enqueue(()=>(this._stop(),Promise.resolve()))};Ti.prototype.play=function(){return this._operations.enqueue(()=>this._play())};const Xh=3e4,Yh=2e3,Qh="twilio-js-sdk",Zh='Parameter "token" must be of type "string".';class oe extends Qt.EventEmitter{static get audioContext(){return oe._audioContext}static get extension(){const t=typeof document<"u"?document.createElement("audio"):{canPlayType:!1};let i;try{i=t.canPlayType&&!!t.canPlayType("audio/mpeg").replace(/no/,"")}catch{i=!1}let n;try{n=t.canPlayType&&!!t.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch{n=!1}return n&&!i?"ogg":"mp3"}static get isSupported(){return Bh()}static get packageName(){return kc}static runPreflight(t,i){return new ft(t,Object.assign({audioContext:oe._getOrCreateAudioContext()},i))}static toString(){return"[Twilio.Device class]"}static get version(){return xn}static _getOrCreateAudioContext(){return oe._audioContext||(typeof AudioContext<"u"?oe._audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(oe._audioContext=new webkitAudioContext)),oe._audioContext}constructor(t,i={}){if(super(),this._activeCall=null,this._audio=null,this._audioProcessorEventObserver=null,this._callInputStream=null,this._calls=[],this._callSinkIds=["default"],this._chunderURIs=[],this._defaultOptions={allowIncomingWhileBusy:!1,closeProtection:!1,codecPreferences:[se.Codec.PCMU,se.Codec.Opus],dscp:!0,enableImprovedSignalingErrorPrecision:!1,forceAggressiveIceNomination:!1,logLevel:Jn.levels.ERROR,maxCallSignalingTimeoutMs:0,preflight:!1,sounds:{},tokenRefreshMs:1e4,voiceEventSidGenerator:Qs},this._edge=null,this._home=null,this._identity=null,this._log=new Tt("Device"),this._makeCallPromise=null,this._options={},this._preferredURI=null,this._publisher=null,this._region=null,this._regTimer=null,this._shouldReRegister=!1,this._soundcache=new Map,this._state=oe.State.Unregistered,this._stateEventMapping={[oe.State.Destroyed]:oe.EventName.Destroyed,[oe.State.Unregistered]:oe.EventName.Unregistered,[oe.State.Registering]:oe.EventName.Registering,[oe.State.Registered]:oe.EventName.Registered},this._stream=null,this._streamConnectedPromise=null,this._tokenWillExpireTimeout=null,this._createDefaultPayload=s=>{const a={aggressive_nomination:this._options.forceAggressiveIceNomination,browser_extension:this._isBrowserExtension,dscp:!!this._options.dscp,ice_restart_enabled:!0,platform:Hh(),sdk_version:xn};function l(d,f){f&&(a[d]=f)}if(s){const d=s.parameters.CallSid;l("call_sid",/^TJ/.test(d)?void 0:d),l("temp_call_sid",s.outboundConnectionId),l("audio_codec",s.codec),a.direction=s.direction}return l("gateway",this._stream&&this._stream.gateway),l("region",this._stream&&this._stream.region),a},this._onSignalingClose=()=>{this._stream=null,this._streamConnectedPromise=null},this._onSignalingConnected=s=>{var a;const l=xh(s.region);if(this._edge=s.edge||wh[l]||s.region,this._region=l||s.region,this._home=s.home,(a=this._publisher)===null||a===void 0||a.setHost(ja(s.home)),s.token&&(this._identity=s.token.identity,typeof s.token.ttl=="number"&&typeof this._options.tokenRefreshMs=="number")){const f=s.token.ttl*1e3,g=Math.max(0,f-this._options.tokenRefreshMs);this._tokenWillExpireTimeout=setTimeout(()=>{this._log.debug("#tokenWillExpire"),this.emit("tokenWillExpire",this),this._tokenWillExpireTimeout&&(clearTimeout(this._tokenWillExpireTimeout),this._tokenWillExpireTimeout=null)},g)}const d=this._getChunderws()||$a(this._edge);if(d.length>0){const[f]=d;this._preferredURI=Na(f)}else this._log.warn("Could not parse a preferred URI from the stream#connected event.");this._shouldReRegister&&this.register()},this._onSignalingError=s=>{if(typeof s!="object"){this._log.warn("Invalid signaling error payload",s);return}const{error:a,callsid:l,voiceeventsid:d}=s;if(typeof a!="object"||d){this._log.warn("Ignoring signaling error payload",{originalError:a,voiceeventsid:d});return}const f=typeof l=="string"&&this._findCall(l)||void 0,{code:g,message:v}=a;let{twilioError:w}=a;if(typeof g=="number")if(g===31201)w=new Et.AuthenticationFailed(a);else if(g===31204)w=new Et.AccessTokenInvalid(a);else if(g===31205)this._stopRegistrationTimer(),w=new Et.AccessTokenExpired(a);else{const N=zs(!!this._options.enableImprovedSignalingErrorPrecision,g);typeof N<"u"&&(w=new N(a))}w||(this._log.error("Unknown signaling error: ",a),w=new $t.UnknownError(v,a)),this._log.error("Received error: ",w),this._log.debug("#error",a),this.emit(oe.EventName.Error,w,f)},this._onSignalingInvite=s=>Ht(this,void 0,void 0,function*(){var a;const l=!!this._activeCall;if(l&&!this._options.allowIncomingWhileBusy){this._log.info("Device busy; ignoring incoming invite");return}if(!s.callsid||!s.sdp){this._log.debug("#error",s),this.emit(oe.EventName.Error,new qi.BadRequest("Malformed invite from gateway"));return}const d=s.parameters||{};d.CallSid=d.CallSid||s.callsid;const f=Object.assign({},Ic(d.Params));this._makeCallPromise=this._makeCall(f,{callParameters:d,enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,offerSdp:s.sdp,reconnectToken:s.reconnect,voiceEventSidGenerator:this._options.voiceEventSidGenerator});let g;try{g=yield this._makeCallPromise}finally{this._makeCallPromise=null}this._calls.push(g),g.once("accept",()=>{this._soundcache.get(oe.SoundName.Incoming).stop(),this._publishNetworkChange()});const v=!((a=this._audio)===null||a===void 0)&&a.incoming()&&!l?()=>this._soundcache.get(oe.SoundName.Incoming).play():()=>Promise.resolve();this._showIncomingCall(g,v)}),this._onSignalingOffline=()=>{this._log.info("Stream is offline"),this._edge=null,this._region=null,this._shouldReRegister=this.state!==oe.State.Unregistered,this._setState(oe.State.Unregistered)},this._onSignalingReady=()=>{this._log.info("Stream is ready"),this._setState(oe.State.Registered)},this._publishNetworkChange=()=>{this._activeCall&&this._networkInformation&&this._publisher.info("network-information","network-change",{connection_type:this._networkInformation.type,downlink:this._networkInformation.downlink,downlinkMax:this._networkInformation.downlinkMax,effective_type:this._networkInformation.effectiveType,rtt:this._networkInformation.rtt},this._activeCall)},this._updateInputStream=s=>{const a=this._activeCall;return a&&!s?Promise.reject(new oi("Cannot unset input device while a call is in progress.")):(this._callInputStream=s,a?a._setInputTracksFromStream(s):Promise.resolve())},this._updateSinkIds=(s,a)=>(s==="ringtone"?this._updateRingtoneSinkIds(a):this._updateSpeakerSinkIds(a)).then(()=>{this._publisher.info("audio",`${s}-devices-set`,{audio_device_ids:a},this._activeCall)},d=>{throw this._publisher.error("audio",`${s}-devices-set-failed`,{audio_device_ids:a,message:d.message},this._activeCall),d}),this._setupLoglevel(i.logLevel),this._logOptions("constructor",i),this.updateToken(t),Nr())throw new Nt("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!oe.isSupported&&i.ignoreBrowserSupport)throw window&&window.location&&window.location.protocol==="http:"?new Nt("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again."):new Nt("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.");const n=globalThis,o=n.msBrowser||n.browser||n.chrome;if(this._isBrowserExtension=!!o&&!!o.runtime&&!!o.runtime.id||!!n.safari&&!!n.safari.extension,this._isBrowserExtension&&this._log.info("Running as browser extension."),navigator){const s=navigator;this._networkInformation=s.connection||s.mozConnection||s.webkitConnection}this._networkInformation&&typeof this._networkInformation.addEventListener=="function"&&this._networkInformation.addEventListener("change",this._publishNetworkChange),oe._getOrCreateAudioContext(),oe._audioContext&&(oe._dialtonePlayer||(oe._dialtonePlayer=new Gf(oe._audioContext))),this._boundDestroy=this.destroy.bind(this),this._boundConfirmClose=this._confirmClose.bind(this),typeof window<"u"&&window.addEventListener&&(window.addEventListener("unload",this._boundDestroy),window.addEventListener("pagehide",this._boundDestroy)),this.updateOptions(i)}get audio(){return this._audio}connect(){return Ht(this,arguments,void 0,function*(t={}){if(this._log.debug(".connect",JSON.stringify(t)),this._throwIfDestroyed(),this._activeCall)throw new oi("A Call is already active");let i,n,o;if(t.connectToken){try{const f=JSON.parse(decodeURIComponent(atob(t.connectToken)));i=f.customParameters,n=f.parameters,o=f.signalingReconnectToken}catch{throw new it("Cannot parse connectToken")}if(!n||!n.CallSid||!o)throw new it("Invalid connectToken")}let s=!1,a={};const l={enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,rtcConfiguration:t.rtcConfiguration,voiceEventSidGenerator:this._options.voiceEventSidGenerator};o&&n?(s=!0,l.callParameters=n,l.reconnectCallSid=n.CallSid,l.reconnectToken=o,a=i||a):a=t.params||a;let d;this._makeCallPromise=this._makeCall(a,l,s);try{d=this._activeCall=yield this._makeCallPromise}finally{this._makeCallPromise=null}return this._calls.splice(0).forEach(f=>f.ignore()),this._soundcache.get(oe.SoundName.Incoming).stop(),d.accept({rtcConstraints:t.rtcConstraints}),this._publishNetworkChange(),d})}get calls(){return this._calls}destroy(){var t;this._log.debug(".destroy"),this._log.debug("Rejecting any incoming calls"),this._calls.slice(0).forEach(n=>n.reject()),this.disconnectAll(),this._stopRegistrationTimer(),this._destroyStream(),this._destroyAudioHelper(),(t=this._audioProcessorEventObserver)===null||t===void 0||t.destroy(),this._destroyPublisher(),this._networkInformation&&typeof this._networkInformation.removeEventListener=="function"&&this._networkInformation.removeEventListener("change",this._publishNetworkChange),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.removeEventListener("unload",this._boundDestroy),window.removeEventListener("pagehide",this._boundDestroy)),this._setState(oe.State.Destroyed),Qt.EventEmitter.prototype.removeAllListeners.call(this)}disconnectAll(){this._log.debug(".disconnectAll"),this._calls.splice(0).forEach(i=>i.disconnect()),this._activeCall&&this._activeCall.disconnect()}get edge(){return this._edge}get home(){return this._home}get identity(){return this._identity}get isBusy(){return!!this._activeCall}register(){return Ht(this,void 0,void 0,function*(){if(this._log.debug(".register"),this.state!==oe.State.Unregistered)throw new oi(`Attempt to register when device is in state "${this.state}". Must be "${oe.State.Unregistered}".`);this._shouldReRegister=!1,this._setState(oe.State.Registering),yield this._streamConnectedPromise||this._setupStream(),yield this._sendPresence(!0),yield Gs(this,oe.State.Registered,oe.State.Unregistered)})}get state(){return this._state}get token(){return this._token}toString(){return"[Twilio.Device instance]"}unregister(){return Ht(this,void 0,void 0,function*(){if(this._log.debug(".unregister"),this.state!==oe.State.Registered)throw new oi(`Attempt to unregister when device is in state "${this.state}". Must be "${oe.State.Registered}".`);this._shouldReRegister=!1;const t=yield this._streamConnectedPromise,i=new Promise(n=>{t.on("offline",n)});yield this._sendPresence(!1),yield i})}updateOptions(t={}){if(this._logOptions("updateOptions",t),this.state===oe.State.Destroyed)throw new oi(`Attempt to "updateOptions" when device is in state "${this.state}".`);this._options=Object.assign(Object.assign(Object.assign({},this._defaultOptions),this._options),t);const i=new Set(this._chunderURIs),n=this._chunderURIs=(this._getChunderws()||$a(this._options.edge)).map(Na);let o=i.size!==n.length;if(!o){for(const s of n)if(!i.has(s)){o=!0;break}}if(this.isBusy&&o)throw new oi("Cannot change Edge while on an active Call");this._setupLoglevel(this._options.logLevel);for(const s of Object.keys(oe._defaultSounds)){const a=oe._defaultSounds[s],l=`${fo}/${a.filename}.${oe.extension}?cache=${xn}`,d=this._options.sounds&&this._options.sounds[s]||l,f=new(this._options.Sound||Ti)(s,d,{audioContext:this._options.disableAudioContextSounds?null:oe.audioContext,maxDuration:a.maxDuration,shouldLoop:a.shouldLoop});this._soundcache.set(s,f)}this._setupAudioHelper(),this._setupPublisher(),o&&this._streamConnectedPromise&&this._setupStream(),typeof window<"u"&&typeof window.addEventListener=="function"&&this._options.closeProtection&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.addEventListener("beforeunload",this._boundConfirmClose))}updateToken(t){if(this._log.debug(".updateToken"),this.state===oe.State.Destroyed)throw new oi(`Attempt to "updateToken" when device is in state "${this.state}".`);if(typeof t!="string")throw new it(Zh);this._token=t,this._stream&&this._stream.setToken(this._token),this._publisher&&this._publisher.setToken(this._token)}_confirmClose(t){if(!this._activeCall)return"";const i=this._options.closeProtection||!1,n=typeof i!="string"?"A call is currently in-progress. Leaving or reloading this page will end the call.":i;return(t||window.event).returnValue=n,n}_destroyAudioHelper(){this._audio&&(this._audio._destroy(),this._audio=null)}_destroyPublisher(){this._publisher&&(this._publisher=null)}_destroyStream(){this._stream&&(this._stream.removeListener("close",this._onSignalingClose),this._stream.removeListener("connected",this._onSignalingConnected),this._stream.removeListener("error",this._onSignalingError),this._stream.removeListener("invite",this._onSignalingInvite),this._stream.removeListener("offline",this._onSignalingOffline),this._stream.removeListener("ready",this._onSignalingReady),this._stream.destroy(),this._stream=null),this._onSignalingOffline(),this._streamConnectedPromise=null}_findCall(t){return this._calls.find(i=>i.parameters.CallSid===t||i.outboundConnectionId===t)||null}_getChunderws(){return typeof this._options.chunderw=="string"?[this._options.chunderw]:Array.isArray(this._options.chunderw)?this._options.chunderw:null}_logOptions(t,i={}){const n=["allowIncomingWhileBusy","appName","appVersion","closeProtection","codecPreferences","disableAudioContextSounds","dscp","edge","enableImprovedSignalingErrorPrecision","forceAggressiveIceNomination","logLevel","maxAverageBitrate","maxCallSignalingTimeoutMs","sounds","tokenRefreshMs"],o=["RTCPeerConnection","enumerateDevices","getUserMedia","MediaStream"];if(typeof i=="object"){const s=Object.assign({},i);Object.keys(s).forEach(a=>{!n.includes(a)&&!o.includes(a)&&delete s[a],o.includes(a)&&(s[a]=!0)}),this._log.debug(`.${t}`,JSON.stringify(s))}}_makeCall(t,i){return Ht(this,arguments,void 0,function*(n,o,s=!1){var a;const l=(a=this._audio)===null||a===void 0?void 0:a._getInputDevicePromise();l&&(this._log.debug("inputDevicePromise detected, waiting..."),yield l,this._log.debug("inputDevicePromise resolved"));const d={audioHelper:this._audio,onIgnore:()=>{this._soundcache.get(oe.SoundName.Incoming).stop()},pstream:yield this._streamConnectedPromise||this._setupStream(),publisher:this._publisher,soundcache:this._soundcache};o=Object.assign({MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,beforeAccept:v=>{!this._activeCall||this._activeCall===v||(this._activeCall.disconnect(),this._removeCall(this._activeCall))},codecPreferences:this._options.codecPreferences,customSounds:this._options.sounds,dialtonePlayer:oe._dialtonePlayer,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,getInputStream:()=>this._options.fileInputStream||this._callInputStream,getSinkIds:()=>this._callSinkIds,maxAverageBitrate:this._options.maxAverageBitrate,preflight:this._options.preflight,rtcConstraints:this._options.rtcConstraints,shouldPlayDisconnect:()=>{var v;return(v=this._audio)===null||v===void 0?void 0:v.disconnect()},twimlParams:n,voiceEventSidGenerator:this._options.voiceEventSidGenerator},o);const f=()=>{if(!this._stream){this._log.warn("UnsetPreferredUri called without a stream");return}this._activeCall===null&&this._calls.length===0&&this._stream.updatePreferredURI(null)},g=new(this._options.Call||se)(d,o);return this._publisher.info("settings","init",{MediaStream:!!this._options.MediaStream,RTCPeerConnection:!!this._options.RTCPeerConnection,enumerateDevices:!!this._options.enumerateDevices,getUserMedia:!!this._options.getUserMedia},g),g.once("accept",()=>{var v,w,N;this._stream.updatePreferredURI(this._preferredURI),this._removeCall(g),this._activeCall=g,this._audio&&this._audio._maybeStartPollingVolume(),g.direction===se.CallDirection.Outgoing&&(!((v=this._audio)===null||v===void 0)&&v.outgoing())&&!s&&this._soundcache.get(oe.SoundName.Outgoing).play();const k={edge:this._edge||this._region};this._options.edge&&(k.selected_edge=Array.isArray(this._options.edge)?this._options.edge:[this._options.edge]),this._publisher.info("settings","edge",k,g),!((w=this._audio)===null||w===void 0)&&w.processedStream&&((N=this._audioProcessorEventObserver)===null||N===void 0||N.emit("enabled"))}),g.addListener("error",v=>{g.status()==="closed"&&(this._removeCall(g),f()),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),g.once("cancel",()=>{this._log.info(`Canceled: ${g.parameters.CallSid}`),this._removeCall(g),f(),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),g.once("disconnect",()=>{this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(g),f(),this._maybeStopIncomingSound()}),g.once("reject",()=>{this._log.info(`Rejected: ${g.parameters.CallSid}`),this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(g),f(),this._maybeStopIncomingSound()}),g.on("transportClose",()=>{g.status()===se.State.Pending&&(this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(g),this._maybeStopIncomingSound())}),g})}_maybeStopIncomingSound(){this._calls.length||this._soundcache.get(oe.SoundName.Incoming).stop()}_removeCall(t){this._activeCall===t&&(this._activeCall=null,this._makeCallPromise=null);for(let i=this._calls.length-1;i>=0;i--)t===this._calls[i]&&this._calls.splice(i,1)}_sendPresence(t){return Ht(this,void 0,void 0,function*(){const i=yield this._streamConnectedPromise;i&&(i.register({audio:t}),t?this._startRegistrationTimer():this._stopRegistrationTimer())})}_setState(t){if(t===this.state)return;this._state=t;const i=this._stateEventMapping[t];this._log.debug(`#${i}`),this.emit(i)}_setupAudioHelper(){this._audioProcessorEventObserver||(this._audioProcessorEventObserver=new zf,this._audioProcessorEventObserver.on("event",({name:i,group:n})=>{this._publisher.info(n,i,{},this._activeCall)}));const t={audioContext:oe.audioContext,audioProcessorEventObserver:this._audioProcessorEventObserver,beforeSetInputDevice:()=>this._makeCallPromise?(this._log.debug("beforeSetInputDevice pause detected"),this._makeCallPromise):(this._log.debug("beforeSetInputDevice pause not detected, setting default"),Promise.resolve()),enumerateDevices:this._options.enumerateDevices,getUserMedia:this._options.getUserMedia||Wh};if(this._audio){this._log.info("Found existing audio helper; updating options..."),this._audio._updateUserOptions(t);return}this._audio=new(this._options.AudioHelper||Vf)(this._updateSinkIds,this._updateInputStream,t),this._audio.on("deviceChange",i=>{const n=this._activeCall,o=i.map(s=>s.deviceId);this._publisher.info("audio","device-change",{lost_active_device_ids:o},n),n&&n._mediaHandler._onInputDevicesChanged()})}_setupLoglevel(t){const i=typeof t=="number"||typeof t=="string"?t:Jn.levels.ERROR;this._log.setDefaultLevel(i),this._log.info("Set logger default level to",i)}_setupPublisher(){this._publisher&&(this._log.info("Found existing publisher; destroying..."),this._destroyPublisher());const t={defaultPayload:this._createDefaultPayload,metadata:{app_name:this._options.appName,app_version:this._options.appVersion}};return this._options.eventgw&&(t.host=this._options.eventgw),this._home&&(t.host=ja(this._home)),this._publisher=new(this._options.Publisher||Wt)(Qh,this.token,t),this._options.publishEvents===!1?this._publisher.disable():this._publisher.on("error",i=>{this._log.warn("Cannot connect to insights.",i)}),this._publisher}_setupStream(){return this._stream&&(this._log.info("Found existing stream; destroying..."),this._destroyStream()),this._log.info("Setting up VSP"),this._stream=new(this._options.PStream||at)(this.token,this._chunderURIs,{backoffMaxMs:this._options.backoffMaxMs,maxPreferredDurationMs:this._options.maxCallSignalingTimeoutMs}),this._stream.addListener("close",this._onSignalingClose),this._stream.addListener("connected",this._onSignalingConnected),this._stream.addListener("error",this._onSignalingError),this._stream.addListener("invite",this._onSignalingInvite),this._stream.addListener("offline",this._onSignalingOffline),this._stream.addListener("ready",this._onSignalingReady),this._streamConnectedPromise=Gs(this._stream,"connected","close").then(()=>this._stream)}_showIncomingCall(t,i){let n;return Promise.race([i(),new Promise((o,s)=>{n=setTimeout(()=>{const a="Playing incoming ringtone took too long; it might not play. Continuing execution...";s(new Error(a))},Yh)})]).catch(o=>{this._log.warn(o.message)}).then(()=>{clearTimeout(n),this._log.debug("#incoming",JSON.stringify({customParameters:t.customParameters,parameters:t.parameters})),this.emit(oe.EventName.Incoming,t)})}_startRegistrationTimer(){this._stopRegistrationTimer(),this._regTimer=setTimeout(()=>{this._sendPresence(!0)},Xh)}_stopRegistrationTimer(){this._regTimer&&clearTimeout(this._regTimer)}_throwIfDestroyed(){if(this.state===oe.State.Destroyed)throw new oi("Device has been destroyed.")}_updateRingtoneSinkIds(t){return Promise.resolve(this._soundcache.get(oe.SoundName.Incoming).setSinkIds(t))}_updateSpeakerSinkIds(t){Array.from(this._soundcache.entries()).filter(n=>n[0]!==oe.SoundName.Incoming).forEach(n=>n[1].setSinkIds(t)),this._callSinkIds=t;const i=this._activeCall;return i?i._setSinkIds(t):Promise.resolve()}}oe._defaultSounds={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}};(function(e){(function(t){t.Error="error",t.Incoming="incoming",t.Destroyed="destroyed",t.Unregistered="unregistered",t.Registering="registering",t.Registered="registered",t.TokenWillExpire="tokenWillExpire"})(e.EventName||(e.EventName={})),function(t){t.Destroyed="destroyed",t.Unregistered="unregistered",t.Registering="registering",t.Registered="registered"}(e.State||(e.State={})),function(t){t.Incoming="incoming",t.Outgoing="outgoing",t.Disconnect="disconnect",t.Dtmf0="dtmf0",t.Dtmf1="dtmf1",t.Dtmf2="dtmf2",t.Dtmf3="dtmf3",t.Dtmf4="dtmf4",t.Dtmf5="dtmf5",t.Dtmf6="dtmf6",t.Dtmf7="dtmf7",t.Dtmf8="dtmf8",t.Dtmf9="dtmf9",t.DtmfS="dtmfs",t.DtmfH="dtmfh"}(e.SoundName||(e.SoundName={}))})(oe||(oe={}));class ks{constructor(t,i=!1){this.deleted=!1;let n;const o=t.candidate.split("network-cost ");o[1]&&(n=parseInt(o[1],10)),this.candidateType=t.type,this.ip=t.ip||t.address,this.isRemote=i,this.networkCost=n,this.port=t.port,this.priority=t.priority,this.protocol=t.protocol,this.relatedAddress=t.relatedAddress,this.relatedPort=t.relatedPort,this.tcpType=t.tcpType,this.transportId=t.sdpMid}toPayload(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}}}const Wa=94.768;function ep(e,t,i){if(typeof e!="number"||typeof t!="number"||typeof i!="number"||!Pr(e)||!Pr(t)||!Pr(i))return null;const n=e+t*2+10;let o=0;switch(!0){case n<160:o=Wa-n/40;break;case n<1e3:o=Wa-(n-120)/10;break}switch(!0){case i<=o/2.5:o=Math.max(o-i*2.5,6.52);break;default:o=0;break}return 1+.035*o+7e-6*o*(o-60)*(100-o)}function Pr(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)&&e>=0}var tp={calculate:ep,isNonNegativeNumber:Pr};const ip=5,np=0,rp=3,sp=1e3,op=5*1e3,ap={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}};function cp(e,t){return t.reduce((i,n)=>i+=n>e?1:0,0)}function lp(e,t){return t.reduce((i,n)=>i+=n<e?1:0,0)}function up(e){if(e.length<=0)return null;const t=e.reduce((o,s)=>o+s,0)/e.length,i=e.map(o=>Math.pow(o-t,2));return Math.sqrt(i.reduce((o,s)=>o+s,0)/i.length)}function dp(e){return e.reduce((t,i)=>[...t,...i],[])}class fp extends Qt.EventEmitter{constructor(t){super(),this._activeWarnings=new Map,this._currentStreaks=new Map,this._inputVolumes=[],this._outputVolumes=[],this._sampleBuffer=[],this._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},this._warningsEnabled=!0,t=t||{},this._getRTCStats=t.getRTCStats||ah,this._mos=t.Mos||tp,this._peerConnection=t.peerConnection,this._thresholds=Object.assign(Object.assign({},ap),t.thresholds);const i=Object.values(this._thresholds).map(n=>n.sampleCount).filter(n=>!!n);this._maxSampleCount=Math.max(ip,...i),this._peerConnection&&this.enable(this._peerConnection)}addVolumes(t,i){this._inputVolumes.push(t),this._outputVolumes.push(i)}disable(){return this._sampleInterval&&(clearInterval(this._sampleInterval),delete this._sampleInterval),this}disableWarnings(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this}enable(t){if(t){if(this._peerConnection&&t!==this._peerConnection)throw new it("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=t}if(!this._peerConnection)throw new it("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),sp),this}enableWarnings(){return this._warningsEnabled=!0,this}hasActiveWarning(t,i){const n=`${t}:${i}`;return!!this._activeWarnings.get(n)}_addSample(t){const i=this._sampleBuffer;i.push(t),i.length>this._maxSampleCount&&i.splice(0,i.length-this._maxSampleCount)}_clearWarning(t,i,n){const o=`${t}:${i}`,s=this._activeWarnings.get(o);!s||Date.now()-s.timeRaised<op||(this._activeWarnings.delete(o),this.emit("warning-cleared",Object.assign(Object.assign({},n),{name:t,threshold:{name:i,value:this._thresholds[t][i]}})))}_createSample(t,i){const n=i&&i.totals.bytesSent||0,o=i&&i.totals.bytesReceived||0,s=i&&i.totals.packetsSent||0,a=i&&i.totals.packetsReceived||0,l=i&&i.totals.packetsLost||0,d=t.bytesSent-n,f=t.bytesReceived-o,g=t.packetsSent-s,v=t.packetsReceived-a,w=t.packetsLost-l,N=v+w,k=N>0?w/N*100:0,b=t.packetsReceived+t.packetsLost,P=b>0?t.packetsLost/b*100:100,C=typeof t.rtt=="number"||!i?t.rtt:i.rtt,I=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(I);const j=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push(j),{audioInputLevel:Math.round(qn(I)),audioOutputLevel:Math.round(qn(j)),bytesReceived:f,bytesSent:d,codecName:t.codecName,jitter:t.jitter,mos:this._mos.calculate(C,t.jitter,i&&k),packetsLost:w,packetsLostFraction:k,packetsReceived:v,packetsSent:g,rtt:C,timestamp:t.timestamp,totals:{bytesReceived:t.bytesReceived,bytesSent:t.bytesSent,packetsLost:t.packetsLost,packetsLostFraction:P,packetsReceived:t.packetsReceived,packetsSent:t.packetsSent}}}_fetchSample(){this._getSample().then(t=>{this._addSample(t),this._raiseWarnings(),this.emit("sample",t)}).catch(t=>{this.disable(),this.emit("error",t)})}_getSample(){return this._getRTCStats(this._peerConnection).then(t=>{let i=null;return this._sampleBuffer.length&&(i=this._sampleBuffer[this._sampleBuffer.length-1]),this._createSample(t,i)})}_raiseWarning(t,i,n){const o=`${t}:${i}`;if(this._activeWarnings.has(o))return;this._activeWarnings.set(o,{timeRaised:Date.now()});const s=this._thresholds[t];let a;if(Array.isArray(s)){const l=s.find(d=>i in d);l&&(a=l[i])}else a=this._thresholds[t][i];this.emit("warning",Object.assign(Object.assign({},n),{name:t,threshold:{name:i,value:a}}))}_raiseWarnings(){this._warningsEnabled&&Object.keys(this._thresholds).forEach(t=>this._raiseWarningsForStat(t))}_raiseWarningsForStat(t){(Array.isArray(this._thresholds[t])?this._thresholds[t]:[this._thresholds[t]]).forEach(n=>{const o=this._sampleBuffer,s=n.clearCount||np,a=n.raiseCount||rp,l=n.sampleCount||this._maxSampleCount;let d=o.slice(-l);const f=d.map(w=>w[t]);if(f.some(w=>typeof w>"u"||w===null))return;let v;if(typeof n.max=="number"&&(v=cp(n.max,f),v>=a?this._raiseWarning(t,"max",{values:f,samples:d}):v<=s&&this._clearWarning(t,"max",{values:f,samples:d})),typeof n.min=="number"&&(v=lp(n.min,f),v>=a?this._raiseWarning(t,"min",{values:f,samples:d}):v<=s&&this._clearWarning(t,"min",{values:f,samples:d})),typeof n.maxDuration=="number"&&o.length>1){d=o.slice(-2);const w=d[0][t],N=d[1][t],k=this._currentStreaks.get(t)||0,b=w===N?k+1:0;this._currentStreaks.set(t,b),b>=n.maxDuration?this._raiseWarning(t,"maxDuration",{value:b}):b===0&&this._clearWarning(t,"maxDuration",{value:k})}if(typeof n.minStandardDeviation=="number"){const w=this._supplementalSampleBuffers[t];if(!w||w.length<n.sampleCount)return;w.length>n.sampleCount&&w.splice(0,w.length-n.sampleCount);const N=dp(w.slice(-l)),k=up(N);if(typeof k!="number")return;k<n.minStandardDeviation?this._raiseWarning(t,"minStandardDeviation",{value:k}):this._clearWarning(t,"minStandardDeviation",{value:k})}[["maxAverage",(w,N)=>w>N],["minAverage",(w,N)=>w<N]].forEach(([w,N])=>{if(typeof n[w]=="number"&&f.length>=l){const k=qn(f);N(k,n[w])?this._raiseWarning(t,w,{values:f,samples:d}):N(k,n.clearValue||n[w])||this._clearWarning(t,w,{values:f,samples:d})}})})}}const qa={factor:1.1,jitter:.5,max:3e4,min:1},hp=70,pp=500,mp=160,gp=10,_p=5e3,Va={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new hi.ConnectionError}},za={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},Ja={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},vp={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"};class se extends Qt.EventEmitter{get direction(){return this._direction}get codec(){return this._codec}get connectToken(){const t=this._signalingReconnectToken,i=this.parameters&&this.parameters.CallSid?this.parameters.CallSid:void 0;if(!t||!i)return;const n=this.customParameters&&typeof this.customParameters.keys=="function"?Array.from(this.customParameters.keys()).reduce((s,a)=>(s[a]=this.customParameters.get(a),s),{}):{},o=this.parameters||{};return btoa(encodeURIComponent(JSON.stringify({customParameters:n,parameters:o,signalingReconnectToken:t})))}constructor(t,i){super(),this.parameters={},this._inputVolumeStreak=0,this._isAnswered=!1,this._isCancelled=!1,this._isRejected=!1,this._latestInputVolume=0,this._latestOutputVolume=0,this._log=new Tt("Call"),this._mediaStatus=se.State.Pending,this._messages=new Map,this._metricsSamples=[],this._options={MediaHandler:Ee,MediaStream:null,enableImprovedSignalingErrorPrecision:!1,offerSdp:null,shouldPlayDisconnect:()=>!0,voiceEventSidGenerator:Qs},this._outputVolumeStreak=0,this._shouldSendHangup=!0,this._signalingStatus=se.State.Pending,this._soundcache=new Map,this._status=se.State.Pending,this._wasConnected=!1,this.toString=()=>"[Twilio.Call instance]",this._emitWarning=(a,l,d,f,g,v)=>{const N=`${a}warning${g?"-cleared":"-raised"}`;if(l==="constant-audio-input-level"&&this.isMuted())return;let k=g?"info":"warning";l==="constant-audio-output-level"&&(k="info");const b={threshold:d};if(f&&(f instanceof Array?b.values=f.map(P=>typeof P=="number"?Math.round(P*100)/100:f):b.value=f),this._publisher.post(k,N,l,{data:b},this),l!=="constant-audio-output-level"){const P=g?"warning-cleared":"warning";this._log.debug(`#${P}`,l),this.emit(P,l,v&&!g?v:null)}},this._onAck=a=>{const{acktype:l,callsid:d,voiceeventsid:f}=a;if(this.parameters.CallSid!==d){this._log.warn(`Received ack from a different callsid: ${d}`);return}l==="message"&&this._onMessageSent(f)},this._onAnswer=a=>{typeof a.reconnect=="string"&&(this._signalingReconnectToken=a.reconnect),!(this._isAnswered&&this._status!==se.State.Reconnecting)&&(this._setCallSid(a),this._isAnswered=!0,this._maybeTransitionToOpen())},this._onCancel=a=>{const l=a.callsid;this.parameters.CallSid===l&&(this._isCancelled=!0,this._publisher.info("connection","cancel",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=se.State.Closed,this._log.debug("#cancel"),this.emit("cancel"),this._pstream.removeListener("cancel",this._onCancel))},this._onConnected=()=>{this._log.info("Received connected from pstream"),this._signalingReconnectToken&&this._mediaHandler.version&&this._pstream.reconnect(this._mediaHandler.version.getSDP(),this.parameters.CallSid,this._signalingReconnectToken)},this._onHangup=a=>{if(this.status()!==se.State.Closed){if(a.callsid&&(this.parameters.CallSid||this.outboundConnectionId)){if(a.callsid!==this.parameters.CallSid&&a.callsid!==this.outboundConnectionId)return}else if(a.callsid)return;if(this._log.info("Received HANGUP from gateway"),a.error){const l=a.error.code,d=zs(this._options.enableImprovedSignalingErrorPrecision,l),f=typeof d<"u"?new d(a.error.message):new $t.ConnectionError("Error sent from gateway in HANGUP",a.error);this._log.error("Received an error from the gateway:",f),this._log.debug("#error",f),this.emit("error",f)}this._shouldSendHangup=!1,this._publisher.info("connection","disconnected-by-remote",null,this),this._disconnect(null,!0),this._cleanupEventListeners()}},this._onMediaFailure=a=>{const{ConnectionDisconnected:l,ConnectionFailed:d,IceGatheringFailed:f,LowBytes:g}=se.MediaFailure,v=a===d||a===f;if(!po(window,window.navigator)&&a===d)return this._mediaHandler.onerror(Va);if(this._mediaStatus===se.State.Reconnecting){if(v){if(Date.now()-this._mediaReconnectStartTime>qa.max)return this._log.warn("Exceeded max ICE retries"),this._mediaHandler.onerror(Va);try{this._mediaReconnectBackoff.backoff()}catch(b){if(!(b.message&&b.message==="Backoff in progress."))throw b}}return}const w=this._mediaHandler.version.pc,N=w&&w.iceConnectionState==="disconnected",k=this._monitor.hasActiveWarning("bytesSent","min")||this._monitor.hasActiveWarning("bytesReceived","min");if(a===g&&N||a===l&&k||v){const b=new hi.ConnectionError("Media connection failed.");this._log.warn("ICE Connection disconnected."),this._publisher.warn("connection","error",b,this),this._publisher.info("connection","reconnecting",null,this),this._mediaReconnectStartTime=Date.now(),this._status=se.State.Reconnecting,this._mediaStatus=se.State.Reconnecting,this._mediaReconnectBackoff.reset(),this._mediaReconnectBackoff.backoff(),this._log.debug("#reconnecting"),this.emit("reconnecting",b)}},this._onMediaReconnected=()=>{this._mediaStatus===se.State.Reconnecting&&(this._log.info("ICE Connection reestablished."),this._mediaStatus=se.State.Open,this._signalingStatus===se.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=se.State.Open))},this._onMessageReceived=a=>{const{callsid:l,content:d,contenttype:f,messagetype:g,voiceeventsid:v}=a;if(this.parameters.CallSid!==l){this._log.warn(`Received a message from a different callsid: ${l}`);return}const w={content:d,contentType:f,messageType:g,voiceEventSid:v};this._publisher.info("call-message",g,{content_type:f,event_type:"received",voice_event_sid:v},this),this._log.debug("#messageReceived",JSON.stringify(w)),this.emit("messageReceived",w)},this._onMessageSent=a=>{if(!this._messages.has(a)){this._log.warn(`Received a messageSent with a voiceEventSid that doesn't exists: ${a}`);return}const l=this._messages.get(a);this._messages.delete(a),this._publisher.info("call-message",l==null?void 0:l.messageType,{content_type:l==null?void 0:l.contentType,event_type:"sent",voice_event_sid:a},this),this._log.debug("#messageSent",JSON.stringify(l)),this.emit("messageSent",l)},this._onRinging=a=>{if(this._setCallSid(a),this._status!==se.State.Connecting&&this._status!==se.State.Ringing)return;const l=!!a.sdp;this._status=se.State.Ringing,this._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:l},this),this._log.debug("#ringing"),this.emit("ringing",l)},this._onRTCSample=a=>{const l=Object.assign(Object.assign({},a),{inputVolume:this._latestInputVolume,outputVolume:this._latestOutputVolume});this._codec=l.codecName,this._metricsSamples.push(l),this._metricsSamples.length>=gp&&this._publishMetrics(),this.emit("sample",a)},this._onSignalingError=a=>{const{callsid:l,voiceeventsid:d,error:f}=a;if(this.parameters.CallSid!==l){this._log.warn(`Received an error from a different callsid: ${l}`);return}if(d&&this._messages.has(d)){this._messages.delete(d),this._log.warn("Received an error while sending a message.",a),this._publisher.error("call-message","error",{code:f.code,message:f.message,voice_event_sid:d},this);let g;const v=zs(!!this._options.enableImprovedSignalingErrorPrecision,f.code);typeof v<"u"&&(g=new v(f)),g||(this._log.error("Unknown Call Message Error: ",f),g=new $t.UnknownError(f.message,f)),this._log.debug("#error",f,g),this.emit("error",g)}},this._onSignalingReconnected=()=>{this._signalingStatus===se.State.Reconnecting&&(this._log.info("Signaling Connection reestablished."),this._signalingStatus=se.State.Open,this._mediaStatus===se.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=se.State.Open))},this._onTransportClose=()=>{this._log.error("Received transportClose from pstream"),this._log.debug("#transportClose"),this.emit("transportClose"),this._signalingReconnectToken?(this._status=se.State.Reconnecting,this._signalingStatus=se.State.Reconnecting,this._publisher.info("connection","reconnecting",null,this),this._log.debug("#reconnecting"),this.emit("reconnecting",new Yt.ConnectionDisconnected)):(this._status=se.State.Closed,this._signalingStatus=se.State.Closed)},this._reemitWarning=(a,l)=>{const d=/^audio/.test(a.name)?"audio-level-":"network-quality-",f=vp[a.threshold.name];let g;a.name in za?g=za[a.name][a.threshold.name]:a.name in Ja&&(g=Ja[a.name]);const v=f+g;this._emitWarning(d,v,a.threshold.value,a.values||a.value,l,a)},this._reemitWarningCleared=a=>{this._reemitWarning(a,!0)},this._soundcache=t.soundcache,typeof t.onIgnore=="function"&&(this._onIgnore=t.onIgnore);const n=i&&i.twimlParams||{};this.customParameters=new Map(Object.entries(n).map(([a,l])=>[a,String(l)])),Object.assign(this._options,i),this._options.callParameters&&(this.parameters=this._options.callParameters),this._options.reconnectToken&&(this._signalingReconnectToken=this._options.reconnectToken),this._voiceEventSidGenerator=this._options.voiceEventSidGenerator||Qs,this._direction=this.parameters.CallSid&&!this._options.reconnectCallSid?se.CallDirection.Incoming:se.CallDirection.Outgoing,this.parameters?this.callerInfo=this.parameters.StirStatus?{isVerified:this.parameters.StirStatus==="TN-Validation-Passed-A"}:null:this.callerInfo=null,this._mediaReconnectBackoff=new Ws(qa),this._mediaReconnectBackoff.on("ready",()=>this._mediaHandler.iceRestart()),this.outboundConnectionId=yp();const o=this._publisher=t.publisher;this._direction===se.CallDirection.Incoming?o.info("connection","incoming",null,this):o.info("connection","outgoing",{preflight:this._options.preflight,reconnect:!!this._options.reconnectCallSid},this);const s=this._monitor=new(this._options.StatsMonitor||fp);s.on("sample",this._onRTCSample),s.disableWarnings(),setTimeout(()=>s.enableWarnings(),_p),s.on("warning",(a,l)=>{(a.name==="bytesSent"||a.name==="bytesReceived")&&this._onMediaFailure(se.MediaFailure.LowBytes),this._reemitWarning(a,l)}),s.on("warning-cleared",a=>{this._reemitWarningCleared(a)}),this._mediaHandler=new this._options.MediaHandler(t.audioHelper,t.pstream,{MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,codecPreferences:this._options.codecPreferences,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,maxAverageBitrate:this._options.maxAverageBitrate}),this.on("volume",(a,l)=>{this._inputVolumeStreak=this._checkVolume(a,this._inputVolumeStreak,this._latestInputVolume,"input"),this._outputVolumeStreak=this._checkVolume(l,this._outputVolumeStreak,this._latestOutputVolume,"output"),this._latestInputVolume=a,this._latestOutputVolume=l}),this._mediaHandler.onaudio=a=>{this._log.debug("#audio"),this.emit("audio",a)},this._mediaHandler.onvolume=(a,l,d,f)=>{s.addVolumes(d/255*32767,f/255*32767),this.emit("volume",a,l)},this._mediaHandler.ondtlstransportstatechange=a=>{const l=a==="failed"?"error":"debug";this._publisher.post(l,"dtls-transport-state",a,null,this)},this._mediaHandler.onpcconnectionstatechange=a=>{let l="debug";const d=this._mediaHandler.getRTCDtlsTransport();a==="failed"&&(l=d&&d.state==="failed"?"error":"warning"),this._publisher.post(l,"pc-connection-state",a,null,this)},this._mediaHandler.onicecandidate=a=>{const l=new ks(a).toPayload();this._publisher.debug("ice-candidate","ice-candidate",l,this)},this._mediaHandler.onselectedcandidatepairchange=a=>{const l=new ks(a.local).toPayload(),d=new ks(a.remote,!0).toPayload();this._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:l,remote_candidate:d},this)},this._mediaHandler.oniceconnectionstatechange=a=>{const l=a==="failed"?"error":"debug";this._publisher.post(l,"ice-connection-state",a,null,this)},this._mediaHandler.onicegatheringfailure=a=>{this._publisher.warn("ice-gathering-state",a,null,this),this._onMediaFailure(se.MediaFailure.IceGatheringFailed)},this._mediaHandler.onicegatheringstatechange=a=>{this._publisher.debug("ice-gathering-state",a,null,this)},this._mediaHandler.onsignalingstatechange=a=>{this._publisher.debug("signaling-state",a,null,this)},this._mediaHandler.ondisconnected=a=>{this._log.warn(a),this._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:a},this),this._log.debug("#warning","ice-connectivity-lost"),this.emit("warning","ice-connectivity-lost"),this._onMediaFailure(se.MediaFailure.ConnectionDisconnected)},this._mediaHandler.onfailed=a=>{this._onMediaFailure(se.MediaFailure.ConnectionFailed)},this._mediaHandler.onconnected=()=>{this._status===se.State.Reconnecting&&this._onMediaReconnected()},this._mediaHandler.onreconnected=a=>{this._log.info(a),this._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:a},this),this._log.debug("#warning-cleared","ice-connectivity-lost"),this.emit("warning-cleared","ice-connectivity-lost"),this._onMediaReconnected()},this._mediaHandler.onerror=a=>{a.disconnect===!0&&this._disconnect(a.info&&a.info.message);const l=a.info.twilioError||new $t.UnknownError(a.info.message);this._log.error("Received an error from MediaStream:",a),this._log.debug("#error",l),this.emit("error",l)},this._mediaHandler.onopen=()=>{this._status===se.State.Open||this._status===se.State.Reconnecting||(this._status===se.State.Ringing||this._status===se.State.Connecting?(this.mute(this._mediaHandler.isMuted),this._mediaStatus=se.State.Open,this._maybeTransitionToOpen()):this._mediaHandler.close())},this._mediaHandler.onclose=()=>{this._status=se.State.Closed,this._options.shouldPlayDisconnect&&this._options.shouldPlayDisconnect()&&!this._isCancelled&&!this._isRejected&&this._soundcache.get(oe.SoundName.Disconnect).play(),s.disable(),this._publishMetrics(),!this._isCancelled&&!this._isRejected&&(this._log.debug("#disconnect"),this.emit("disconnect",this))},this._pstream=t.pstream,this._pstream.on("ack",this._onAck),this._pstream.on("cancel",this._onCancel),this._pstream.on("error",this._onSignalingError),this._pstream.on("ringing",this._onRinging),this._pstream.on("transportClose",this._onTransportClose),this._pstream.on("connected",this._onConnected),this._pstream.on("message",this._onMessageReceived),this.on("error",a=>{this._publisher.error("connection","error",{code:a.code,message:a.message},this),this._pstream&&this._pstream.status==="disconnected"&&this._cleanupEventListeners()}),this.on("disconnect",()=>{this._cleanupEventListeners()})}_setInputTracksFromStream(t){return this._mediaHandler.setInputTracksFromStream(t)}_setSinkIds(t){return this._mediaHandler._setSinkIds(t)}accept(t){if(this._log.debug(".accept",t),this._status!==se.State.Pending){this._log.debug(`.accept noop. status is '${this._status}'`);return}t=t||{};const i=t.rtcConfiguration||this._options.rtcConfiguration,n=t.rtcConstraints||this._options.rtcConstraints||{},o={audio:typeof n.audio<"u"?n.audio:!0};this._status=se.State.Connecting;const s=()=>{if(this._status!==se.State.Connecting){this._cleanupEventListeners(),this._mediaHandler.close();return}const d=g=>{const v=this._direction===se.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote";this._publisher.info("connection",v,null,this);const{codecName:w,codecParams:N}=kh(this._mediaHandler.version.getSDP());this._publisher.info("settings","codec",{codec_params:N,selected_codec:w},this),this._monitor.enable(g)},f=typeof this._options.getSinkIds=="function"&&this._options.getSinkIds();if(Array.isArray(f)&&this._mediaHandler._setSinkIds(f).catch(()=>{}),this._pstream.addListener("hangup",this._onHangup),this._direction===se.CallDirection.Incoming)this._isAnswered=!0,this._pstream.on("answer",this._onAnswer),this._mediaHandler.answerIncomingCall(this.parameters.CallSid,this._options.offerSdp,i,d);else{const g=Array.from(this.customParameters.entries()).map(v=>`${encodeURIComponent(v[0])}=${encodeURIComponent(v[1])}`).join("&");this._pstream.on("answer",this._onAnswer),this._mediaHandler.makeOutgoingCall(g,this._signalingReconnectToken,this._options.reconnectCallSid||this.outboundConnectionId,i,d)}};this._options.beforeAccept&&this._options.beforeAccept(this);const a=typeof this._options.getInputStream=="function"&&this._options.getInputStream();(a?this._mediaHandler.setInputTracksFromStream(a):this._mediaHandler.openDefaultDeviceWithConstraints(o)).then(()=>{this._publisher.info("get-user-media","succeeded",{data:{audioConstraints:o}},this),s()},d=>{let f;d.code===31208||["PermissionDeniedError","NotAllowedError"].indexOf(d.name)!==-1?(f=new En.PermissionDeniedError,this._publisher.error("get-user-media","denied",{data:{audioConstraints:o,error:d}},this)):(f=new En.AcquisitionFailedError,this._publisher.error("get-user-media","failed",{data:{audioConstraints:o,error:d}},this)),this._disconnect(),this._log.debug("#error",d),this.emit("error",f)})}disconnect(){this._log.debug(".disconnect"),this._disconnect()}getLocalStream(){return this._mediaHandler&&this._mediaHandler.stream}getRemoteStream(){return this._mediaHandler&&this._mediaHandler._remoteStream}ignore(){if(this._log.debug(".ignore"),this._status!==se.State.Pending){this._log.debug(`.ignore noop. status is '${this._status}'`);return}this._status=se.State.Closed,this._mediaHandler.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this),this._onIgnore&&this._onIgnore()}isMuted(){return this._mediaHandler.isMuted}mute(t=!0){this._log.debug(".mute",t);const i=this._mediaHandler.isMuted;this._mediaHandler.mute(t);const n=this._mediaHandler.isMuted;i!==n&&(this._publisher.info("connection",n?"muted":"unmuted",null,this),this._log.debug("#mute",n),this.emit("mute",n,this))}postFeedback(t,i){if(typeof t>"u"||t===null)return this._postFeedbackDeclined();if(!Object.values(se.FeedbackScore).includes(t))throw new it(`Feedback score must be one of: ${Object.values(se.FeedbackScore)}`);if(typeof i<"u"&&i!==null&&!Object.values(se.FeedbackIssue).includes(i))throw new it(`Feedback issue must be one of: ${Object.values(se.FeedbackIssue)}`);return this._publisher.info("feedback","received",{issue_name:i,quality_score:t},this,!0)}reject(){if(this._log.debug(".reject"),this._status!==se.State.Pending){this._log.debug(`.reject noop. status is '${this._status}'`);return}this._isRejected=!0,this._pstream.reject(this.parameters.CallSid),this._mediaHandler.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=se.State.Closed,this._log.debug("#reject"),this.emit("reject")}sendDigits(t){if(this._log.debug(".sendDigits",t),t.match(/[^0-9*#w]/))throw new it("Illegal character passed into sendDigits");const i=this._options.customSounds||{},n=[];t.split("").forEach(l=>{let d=l!=="w"?`dtmf${l}`:"";d==="dtmf*"&&(d="dtmfs"),d==="dtmf#"&&(d="dtmfh"),n.push(d)});const o=()=>{const l=n.shift();l&&(this._options.dialtonePlayer&&!i[l]?this._options.dialtonePlayer.play(l):this._soundcache.get(l).play()),n.length&&setTimeout(()=>o(),200)};o();const s=this._mediaHandler.getOrCreateDTMFSender();function a(l){if(!l.length)return;const d=l.shift();d&&d.length&&s.insertDTMF(d,mp,hp),setTimeout(a.bind(null,l),pp)}if(s){if(!("canInsertDTMF"in s)||s.canInsertDTMF){this._log.info("Sending digits using RTCDTMFSender"),a(t.split("w"));return}this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),this._pstream!==null&&this._pstream.status!=="disconnected")this._pstream.dtmf(this.parameters.CallSid,t);else{const l=new $t.ConnectionError("Could not send DTMF: Signaling channel is disconnected");this._log.debug("#error",l),this.emit("error",l)}}sendMessage(t){this._log.debug(".sendMessage",JSON.stringify(t));const{content:i,contentType:n,messageType:o}=t;if(typeof i>"u"||i===null)throw new it("`content` is empty");if(typeof o!="string")throw new it("`messageType` must be a string.");if(o.length===0)throw new it("`messageType` must be a non-empty string.");if(this._pstream===null)throw new oi("Could not send CallMessage; Signaling channel is disconnected");const s=this.parameters.CallSid;if(typeof this.parameters.CallSid>"u")throw new oi("Could not send CallMessage; Call has no CallSid");const a=this._voiceEventSidGenerator();return this._messages.set(a,{content:i,contentType:n,messageType:o,voiceEventSid:a}),this._pstream.sendMessage(s,i,n,o,a),a}status(){return this._status}_checkVolume(t,i,n,o){const s=i>=10;let a=0;return n===t&&(a=i),a>=10?this._emitWarning("audio-level-",`constant-audio-${o}-level`,10,a,!1):s&&this._emitWarning("audio-level-",`constant-audio-${o}-level`,10,a,!0),a}_cleanupEventListeners(){const t=()=>{this._pstream&&(this._pstream.removeListener("ack",this._onAck),this._pstream.removeListener("answer",this._onAnswer),this._pstream.removeListener("cancel",this._onCancel),this._pstream.removeListener("error",this._onSignalingError),this._pstream.removeListener("hangup",this._onHangup),this._pstream.removeListener("ringing",this._onRinging),this._pstream.removeListener("transportClose",this._onTransportClose),this._pstream.removeListener("connected",this._onConnected),this._pstream.removeListener("message",this._onMessageReceived))};t(),setTimeout(t,0)}_createMetricPayload(){const t={call_sid:this.parameters.CallSid,dscp:!!this._options.dscp,sdk_version:xn};return this._options.gateway&&(t.gateway=this._options.gateway),t.direction=this._direction,t}_disconnect(t,i){if(t=typeof t=="string"?t:null,!(this._status!==se.State.Open&&this._status!==se.State.Connecting&&this._status!==se.State.Reconnecting&&this._status!==se.State.Ringing)){if(this._log.info("Disconnecting..."),this._pstream!==null&&this._pstream.status!=="disconnected"&&this._shouldSendHangup){const n=this.parameters.CallSid||this.outboundConnectionId;n&&this._pstream.hangup(n,t)}this._cleanupEventListeners(),this._mediaHandler.close(),i||this._publisher.info("connection","disconnected-by-local",null,this)}}_maybeTransitionToOpen(){this._wasConnected,this._isAnswered&&(this._onSignalingReconnected(),this._signalingStatus=se.State.Open,this._mediaHandler&&this._mediaHandler.status==="open"&&(this._status=se.State.Open,this._wasConnected||(this._wasConnected=!0,this._log.debug("#accept"),this.emit("accept",this))))}_postFeedbackDeclined(){return this._publisher.info("feedback","received-none",null,this,!0)}_publishMetrics(){this._metricsSamples.length!==0&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(t=>{this._log.warn("Unable to post metrics to Insights. Received error:",t)})}_setCallSid(t){const i=t.callsid;i&&(this.parameters.CallSid=i,this._mediaHandler.callSid=i)}}se.toString=()=>"[Twilio.Call class]";(function(e){(function(t){t.Closed="closed",t.Connecting="connecting",t.Open="open",t.Pending="pending",t.Reconnecting="reconnecting",t.Ringing="ringing"})(e.State||(e.State={})),function(t){t.AudioLatency="audio-latency",t.ChoppyAudio="choppy-audio",t.DroppedCall="dropped-call",t.Echo="echo",t.NoisyCall="noisy-call",t.OneWayAudio="one-way-audio"}(e.FeedbackIssue||(e.FeedbackIssue={})),function(t){t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five"}(e.FeedbackScore||(e.FeedbackScore={})),function(t){t.Incoming="INCOMING",t.Outgoing="OUTGOING"}(e.CallDirection||(e.CallDirection={})),function(t){t.Opus="opus",t.PCMU="pcmu"}(e.Codec||(e.Codec={})),function(t){t.None="none",t.Timeout="timeout"}(e.IceGatheringFailureReason||(e.IceGatheringFailureReason={})),function(t){t.ConnectionDisconnected="ConnectionDisconnected",t.ConnectionFailed="ConnectionFailed",t.IceGatheringFailed="IceGatheringFailed",t.LowBytes="LowBytes"}(e.MediaFailure||(e.MediaFailure={}))})(se||(se={}));function yp(){return"TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}let Tr,Bc,Vn,Gn=null,Si=null,xt={};function Ar(e){const{startBtn:t,endBtn:i,closeBtn:n,saveBtn:o}=xt;t&&(t.classList.add("hidden!"),i.classList.add("hidden!"),o.classList.add("hidden!"),n.disabled=!1,e==="initial"?t.classList.remove("hidden!"):e==="in-call"?(i.classList.remove("hidden!"),n.disabled=!0,i.disabled=!0,setTimeout(()=>{i.disabled=!1},4e3)):e==="post-call"&&o.classList.remove("hidden!"))}async function bp(e){if(Ar("in-call"),_n("Conectando la llamada..."),!e){alert("Error: No se ha proporcionado un ID de cliente.");return}const t=document.getElementById("start-call-btn"),i=document.getElementById("end-call-btn"),n=document.getElementById("close-btn");if(t.classList.add("hidden!"),i.classList.remove("hidden!"),n.disabled=!0,Vn=document.getElementById("call-duration"),!Vn){console.error("No se pudieron encontrar los elementos de estado o duración en el DOM.");return}try{const s=await(await fetch("/crm/services/twilio/token")).json();Tr?Tr.updateToken(s.token):Tr=new oe(s.token,{codecPreferences:["opus","pcmu"]});const a={params:{customerId:e}};Si=await Tr.connect(a),Si.on("error",l=>{console.error("Error en la llamada:",l),_n(`Error: ${l.message}`),Ps(),Ar("initial")}),Si.on("accept",l=>{_n("Llamada en curso"),Gn=l.parameters.CallSid,console.log("Llamada conectada con SID:",Gn),Cp()}),Si.on("disconnect",()=>{_n("Finalizaste la llamada. Completa el reporte."),Ps(),Ar("post-call"),Si=null}),Si.on("reject",()=>{_n("El cliente ha rechazado la llamada. Completa el reporte."),Ps(),Ar("post-call"),Si=null})}catch(o){console.error("Error al iniciar la llamada:",o),_n("Error de inicialización"),xp()}}function wp(){console.log("Intentando colgar la llamada..."),Si&&Si.disconnect(),console.log("Llamada finalizada con SID",Gn)}function Sp(){if(Gn){const e=document.getElementById("notes").value,t=document.querySelector('[wire\\:model="status"]').value,i=document.querySelector('[wire\\:model="phase"]').value;Livewire.dispatch("saveCallReport",{callSid:Gn,notes:e,status:t,phase:i}),xt.closeBtn.click(),e.value="",t.value="",i.value=""}else alert("No hay un ID de llamada para guardar. Cierra el modal manualmente."),xt.closeBtn.click()}function _n(e){const t=document.getElementById("loading-title");console.log(e),t.textContent=e}function Cp(){let e=0;if(Vn){if(!Vn){console.error('Error: No se encontró el elemento "call-duration". El temporizador no puede iniciar.');return}Bc=setInterval(()=>{e++;const t=Math.floor(e/60).toString().padStart(2,"0"),i=(e%60).toString().padStart(2,"0");Vn.textContent=`${t}:${i}`},1e3)}}function Ps(){clearInterval(Bc)}function xp(){document.getElementById("start-call-btn").classList.remove("hidden"),document.getElementById("loading-title").classList.remove("hidden"),document.getElementById("end-call-btn").classList.add("hidden"),document.getElementById("call-in-progress-title").classList.add("hidden"),document.getElementById("close-btn").disabled=!1,document.getElementById("call-duration").textContent="00:00"}function Hc(){xt.startBtn=document.getElementById("start-call-btn"),xt.endBtn=document.getElementById("end-call-btn"),xt.closeBtn=document.getElementById("close-btn"),xt.saveBtn=document.getElementById("save-report-btn"),xt.startBtn&&!xt.startBtn.hasAttribute("data-listener-attached")&&(xt.startBtn.setAttribute("data-listener-attached","true"),xt.startBtn.addEventListener("click",e=>{const t=e.currentTarget.dataset.customerId;bp(t)})),xt.endBtn&&!xt.endBtn.hasAttribute("data-listener-attached")&&(xt.endBtn.setAttribute("data-listener-attached","true"),xt.endBtn.addEventListener("click",()=>wp())),xt.saveBtn&&!xt.saveBtn.hasAttribute("data-listener-attached")&&(xt.saveBtn.setAttribute("data-listener-attached","true"),xt.saveBtn.addEventListener("click",()=>Sp()))}document.addEventListener("DOMContentLoaded",Hc);document.addEventListener("livewire:navigated",Hc);jr.start();window.Livewire=jr;
